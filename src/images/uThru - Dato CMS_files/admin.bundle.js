(window.webpackJsonpDato=window.webpackJsonpDato||[]).push([[0],{2234:function(e,t,n){"use strict";var r=n(5),a=n(1),i=n.n(a),o=n(2),l=n(0),c=n.n(l),s=n(38),u=n.n(s),m=n(724),d=n.n(m),f=n(43),p=n.n(f);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_(this,v(t).call(this,e))).state={copied:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"handleCopy",value:function(e){var t=this,n=this.props.value;e.preventDefault(),this.handleFocus(),d()(n),this.setState({copied:!0}),setTimeout((function(){return t.setState({copied:!1})}),2e3)}},{key:"handleFocus",value:function(){var e=u.a.findDOMNode(this.input);e.focus(),e.setSelectionRange(0,e.value.length)}},{key:"renderMultiline",value:function(){var e=this,t=this.state.copied,n=this.props.rows;return c.a.createElement("div",{className:"copy-to-clipboard"},c.a.createElement("textarea",y({rows:n},p()(this.props,["multiline"]),{ref:function(t){e.input=t},readOnly:!0,onFocus:this.handleFocus.bind(this)})),c.a.createElement("a",{href:"#",className:"copy-to-clipboard__button",onClick:this.handleCopy.bind(this)},t?this.t("clipboard.copied"):this.t("clipboard.copy")))}},{key:"renderSingleLine",value:function(){var e=this,t=this.state.copied,n=this.props,r=n.value,a=n.url;return c.a.createElement("div",{className:"input-group"},c.a.createElement("input",y({},p()(this.props,["url","multiline","rows"]),{ref:function(t){e.input=t},readOnly:!0,type:"text",onFocus:this.handleFocus.bind(this)})),c.a.createElement("a",{href:"#",className:"input-group__addon input-group__addon--button",onClick:this.handleCopy.bind(this)},c.a.createElement("span",null,t?this.t("clipboard.copied"):this.t("clipboard.copy"))),a&&c.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"input-group__addon input-group__addon--button"},c.a.createElement("span",null,c.a.createElement(o.FormattedMessage,{id:"imageMetadata.open"}))))}},{key:"render",value:function(){return this.props.multiline?this.renderMultiline():this.renderSingleLine()}}])&&h(n.prototype,r),a&&h(n,a),t}(r.a);E(w,"propTypes",{value:i.a.string,multiline:i.a.bool,url:i.a.bool,rows:i.a.number}),E(w,"defaultProps",{multiline:!1}),t.a=w},2242:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"});t.default=function(e){return a.a.createElement("svg",i({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),o)}},2266:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M466.5 83.7l-192-80a48.15 48.15 0 00-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"});t.default=function(e){return a.a.createElement("svg",i({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),o)}},2293:function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(0),o=n.n(i),l=n(5),c=n(24),s=n(145),u=n.n(s),m=n(62),d=n.n(m),f=n(304),p=n(413),b=n(169);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E,w,O,j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,v(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.namePrefix;return o.a.createElement(c.default,{name:"".concat(e,".heading"),intlLabel:"singleLine.heading",component:b.a})}}])&&h(n.prototype,r),a&&h(n,a),t}(l.a);E=j,w="propTypes",O={namePrefix:a.a.string.isRequired},w in E?Object.defineProperty(E,w,{value:O,enumerable:!0,configurable:!0,writable:!0}):E[w]=O;var k={Component:j,initialValues:{heading:!1}};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,x(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.namePrefix;return o.a.createElement("div",{className:"space--bottom-2"},o.a.createElement(c.default,{name:"".concat(e,".enable_alpha"),intlLabel:"color.enableAlpha",component:b.a}),o.a.createElement(c.default,{name:"".concat(e,".preset_colors"),intlLabel:"color.presetColors",intlHint:"color.presetColors.hint",intlPlaceholder:"color.presetColors.placeholder",type:"text",className:"form__input--code"}))}}])&&P(n.prototype,r),a&&P(n,a),t}(l.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(R,"propTypes",{namePrefix:a.a.string.isRequired});var F={Component:R,initialValues:{enable_alpha:!1,preset_colors:[]},fromJSON:function(e){var t=e.preset_colors,n=e.enable_alpha;return{preset_colors:t.join(", "),enable_alpha:n}},toJSON:function(e){var t=e.preset_colors,n=e.enable_alpha;return{preset_colors:t.replace(/\s/g,"").split(",").filter((function(e){return!!e}))||[],enable_alpha:n}}},M=n(861),C=n(2296);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,A(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.namePrefix;return o.a.createElement(c.default,{name:"".concat(e,".url_prefix"),intlLabel:"slug.urlPrefix",intlHint:"slug.urlPrefix.hint",intlPlaceholder:"slug.urlPrefix.placeholder",type:"text"})}}])&&I(n.prototype,r),a&&I(n,a),t}(l.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(D,"propTypes",{namePrefix:a.a.string.isRequired});var B={Component:D,initialValues:{url_prefix:null}};function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,G(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.namePrefix;return o.a.createElement(c.default,{name:"".concat(e,".start_collapsed"),intlLabel:"richText.start_collapsed",component:b.a})}}])&&U(n.prototype,r),a&&U(n,a),t}(l.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(J,"propTypes",{namePrefix:a.a.string.isRequired});var $={Component:J,initialValues:{start_collapsed:!1}};function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"f",(function(){return oe})),n.d(t,"e",(function(){return le})),n.d(t,"a",(function(){return ce})),n.d(t,"g",(function(){return se})),n.d(t,"b",(function(){return ue})),n.d(t,"c",(function(){return me})),n.d(t,"d",(function(){return de}));var ae={single_line:k,color_picker:F,markdown:M.a,wysiwyg:C.a,slug:B,rich_text:$},ie={string:["single_line"],slug:["slug"],text:["markdown","wysiwyg","textarea"],rich_text:["rich_text"],links:["links_select","links_embed"],link:["link_select","link_embed"],seo:["seo"],lat_lon:["map"],json:["json"],date:["date_picker"],date_time:["date_time_picker"],boolean:["boolean"],integer:["integer"],float:["float"],file:["file"],video:["video"],gallery:["gallery"],color:["color_picker"]};function oe(e,t){return Object(p.a)(e)?function(e){var t=e.attributes.parameter_definitions.instance;if(0===t.length)return null;var n=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),ee(this,te(n).apply(this,arguments))}var r,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(n,e),r=n,(a=[{key:"renderField",value:function(e){var t=this.props.namePrefix,n=e.required?{required:{}}:{},r="text"===e.type?{editor:"textarea",parameters:oe("textarea")}:de(e.type);return o.a.createElement(c.default,Z({key:e.id,name:"".concat(t,".").concat(e.id),label:e.label,hint:e.hint,required:e.required},Object(f.a)({fieldType:e.type,appearance:r,validators:n})))}},{key:"render",value:function(){return o.a.createElement("div",{className:"space--bottom-2"},t.map(this.renderField.bind(this)))}}])&&Y(r.prototype,a),i&&Y(r,i),n}(l.a);return re(n,"propTypes",{namePrefix:a.a.string.isRequired}),{Component:n,validate:u()(t.filter((function(e){return e.required})).reduce((function(e,t){return Q({},e,re({},t.id,[d.a.required()]))}),{})),initialValues:t.reduce((function(e,t){return Q({},e,re({},t.id,t.default||null))}),{})}}(t[e]):ae[e]}function le(e,t){var n=oe(e,t);return n?n.initialValues:{}}function ce(e,t,n){var r=oe(t,n);return r&&r.fromJSON?r.fromJSON(e):e}function se(e,t,n){var r=oe(t,n);return r&&r.toJSON?r.toJSON(e):e}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?["field_editor"]:["sidebar","field_editor"],r=Object.values(t).filter((function(t){return t.attributes.field_types.includes(e)&&n.includes(t.attributes.plugin_type)}));return ie[e].concat(r.map((function(e){return e.id})))}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.values(t).filter((function(t){return t.attributes.field_types.includes(e)&&"field_addon"===t.attributes.plugin_type})).map((function(e){return e.id}))}function de(e){var t=ie[e][0];return{editor:t,parameters:le(t,{})}}},2294:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(0)),i=n(6),o=n(8),l=n(2),c=r(n(1049)),s=n(8);t.default=function(e){var t=e.children,n=e.subSplit,r=i.useSelector((function(e){return e.environments})),u=i.useSelector(s.isMaintenanceModeActive),m=i.useSelector(o.getActiveEnvironment),d=["EnvironmentWarning"];return n&&d.push("EnvironmentWarning--center"),1===Object.values(r).length?t:!m||u?t:a.default.createElement("div",{className:d.join(" ")},a.default.createElement("div",{className:"EnvironmentWarning__warning"},a.default.createElement(l.FormattedMessage,{id:m.meta.primary?"environment.viewingPrimaryEnvironment":"environment.viewingSandboxEnvironment",values:{environment:a.default.createElement(c.default,{environment:m})}})),a.default.createElement("div",{className:"EnvironmentWarning__content"},t))}},2295:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=["calls","k","M"];function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(isNaN(parseFloat(e))||!isFinite(e))return"-";if(e<1)return n?"No calls":"0";if(e<2)return n?"1 call":"1";var a=Math.floor(Math.log(e)/Math.log(1e3)),i=0!==a||n?r[a]:"";return"".concat((e/Math.pow(1e3,Math.floor(a))).toFixed(t)," ").concat(i)}},2296:function(e,t,n){"use strict";n.d(t,"b",(function(){return _}));var r=n(1),a=n.n(r),i=n(0),o=n.n(i),l=n(5),c=n(66),s=n(24);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b,y,h,_=["format","bold","italic","strikethrough","ordered_list","unordered_list","quote","table","link","image","show_source","undo","redo","align_left","align_center","align_right","align_justify","outdent","indent","fullscreen"],v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,f(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props.namePrefix,n=_.map((function(t){return{value:t,label:e.t("wysiwygEditor.toolbar.".concat(t))}}));return o.a.createElement(s.default,{name:"".concat(t,".toolbar"),intlLabel:"wysiwygEditor.toolbar",intlHint:"wysiwygEditor.toolbar.hint",multiple:!0,options:n,component:c.default})}}])&&m(n.prototype,r),a&&m(n,a),t}(l.a);b=v,y="propTypes",h={namePrefix:a.a.string.isRequired},y in b?Object.defineProperty(b,y,{value:h,enumerable:!0,configurable:!0,writable:!0}):b[y]=h,t.a={Component:v,initialValues:{toolbar:["format","bold","italic","strikethrough","ordered_list","unordered_list","quote","table","link","image","show_source","fullscreen"]}}},2297:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(1),a=n.n(r),i=n(0),o=n.n(i),l=n(2528);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=new(n.n(l).a)({colors:{0:"rgb(53, 50, 60)",1:"rgb(255, 12, 76)",2:"rgb(171, 208, 0)",3:"rgb(255, 184, 0)",4:"rgb(123, 140, 255)",5:"rgb(140, 84, 254)",6:"rgb(0, 211, 222)",7:"rgb(232, 232, 232)",8:"rgb(111, 104, 124)",9:"rgb(255, 80, 129)",10:"rgb(204, 243, 90)",11:"rgb(255, 204, 99)",12:"rgb(181, 188, 255)",13:"rgb(197, 144, 254)",14:"rgb(118, 243, 255)",15:"rgb(254, 255, 247)"}});var p,b,y,h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,m(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.log.split("\n").map((function(e){return function(e){for(var t="",n=0,r=0;r<e.length;r+=1){var a=e.charAt(r);"\b"===a?n+=1:(n>0&&(t=t.slice(0,-1*n),n=0),t+=a)}return t}(e.substring(e.lastIndexOf("\r")+1))}));return o.a.createElement("div",{style:{height:"".concat(15*e.length,"px")},className:"Log"},e.map((function(e,t){return o.a.createElement("div",{key:t,dangerouslySetInnerHTML:{__html:f.toHtml(e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;").replace(/'/g,"&#039;"))}})})))}}])&&s(n.prototype,r),a&&s(n,a),t}(o.a.PureComponent);p=h,b="propTypes",y={log:a.a.string},b in p?Object.defineProperty(p,b,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[b]=y},2298:function(e,t,n){"use strict";var r=n(1),a=n.n(r),i=n(0),o=n.n(i);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d,f,p,b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.title,n=e.children;return o.a.createElement("div",{className:"WebhookCall__detail"},o.a.createElement("div",{className:"WebhookCall__detail__title"},this.t(t)),n)}}])&&c(n.prototype,r),a&&c(n,a),t}(n(5).a);d=b,f="propTypes",p={title:a.a.string.isRequired,children:a.a.node},f in d?Object.defineProperty(d,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[f]=p,t.a=b},2355:function(e,t,n){"use strict";var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M194.35 167a16.53 16.53 0 01.28 16.51l-54.79 100.06v64.51a17.14 17.14 0 11-34.28 0V283.3l-54.75-99.79a16.67 16.67 0 1129.24-16l42.78 78 42.53-77.94a16.68 16.68 0 0129-.51zm66.16-62.29h-.07a12.75 12.75 0 00-12.75 12.79l.76 277.13a12.78 12.78 0 0012.68 12.7h.07a12.75 12.75 0 0012.8-12.81l-.76-277.13a12.78 12.78 0 00-12.73-12.7zm185.61 54.12A17.16 17.16 0 00429 175.95v115.92l-66.36-122.66a19.83 19.83 0 00-37.27 9.43v169.45a17.14 17.14 0 1034.28 0V232.16L426 354.83a19.83 19.83 0 0037.27-9.43V175.95a17.16 17.16 0 00-17.15-17.14z"}),l=function(e){return a.a.createElement("svg",i({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),o)};function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=a.a.createElement("path",{d:"M485.6 26.4c-27.1-27.1-71.3-27.1-98.4 0l-87.1 87.1-17.8-17.8c-4.5-4.5-10.5-7-16.9-7-6.4 0-12.4 2.5-16.9 7-9.3 9.3-9.3 24.5 0 33.8l17.8 17.8-223 223C30 383.5 22.8 401 22.8 419.6c0 14.5 4.4 28.2 12.5 39.8L9.7 485.1c-4.8 4.8-4.8 12.5 0 17.2 4.8 4.8 12.5 4.8 17.2 0l25.7-25.7c11.6 8.1 25.4 12.5 39.8 12.5 18.6 0 36.1-7.2 49.2-20.4l223-223 17.8 17.8c4.7 4.7 10.8 7 16.9 7s12.3-2.3 16.9-7c4.5-4.5 7-10.5 7-16.9 0-6.4-2.5-12.4-7-16.9l-17.8-17.8 87.1-87.1c27.2-27.1 27.2-71.2.1-98.4zM127.5 454.7c-9.4 9.4-21.8 14.5-35.1 14.5-13.2 0-25.7-5.2-35.1-14.5-9.4-9.4-14.5-21.8-14.5-35.1 0-13.2 5.2-25.7 14.5-35.1l223-223 70.1 70.1-222.9 223.1z"}),u=function(e){return a.a.createElement("svg",c({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),s)};function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=a.a.createElement("path",{d:"M138.59 212.79a20.16 20.16 0 11-20.16-20.16 20.16 20.16 0 0120.16 20.16zm117.66 20.16a20.16 20.16 0 10-20.16-20.16 20.16 20.16 0 0020.16 20.15zm137.82-40.31a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.17zm-275.64 91.7a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.16zm137.82-22.17a42.33 42.33 0 1042.33 42.33 42.33 42.33 0 00-42.33-42.33zm137.82 22.17a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.16zm-275.64 91.72a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.16zm137.82 0a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.16zm137.82 0a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.16zM489 81.45V448.5a38.6 38.6 0 01-38.56 38.56H63.56A38.6 38.6 0 0125 448.5V81.45a38.6 38.6 0 0138.56-38.56h62V31.35a9.42 9.42 0 0118.83 0v11.54h223.17V31.35a9.42 9.42 0 0118.83 0v11.54h64A38.6 38.6 0 01489 81.45zm-444 0v35.28h424V81.45a18.58 18.58 0 00-18.56-18.56h-64v24a9.42 9.42 0 01-18.83 0v-24H144.44v24a9.42 9.42 0 01-18.83 0v-24h-62A18.58 18.58 0 0045 81.45zM469 448.5V136.73H45V448.5a18.58 18.58 0 0018.56 18.56h386.88A18.58 18.58 0 00469 448.5z"}),f=function(e){return a.a.createElement("svg",m({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),d)};function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var b=a.a.createElement("path",{d:"M433.2 74.4C422.8 65 409 59.1 393.8 59.1c-10.9 0-19.7 8.8-19.7 19.7s8.8 19.7 19.7 19.7c10.9 0 19.7 8.8 19.7 19.7V197c0 23.6 10.7 44.6 27.2 59.1-16.5 14.5-27.2 35.4-27.2 59.1V394c0 10.9-8.8 19.7-19.7 19.7-10.9 0-19.7 8.8-19.7 19.7 0 10.9 8.8 19.7 19.7 19.7 32.6 0 59.1-26.5 59.1-59.1v-78.8c0-21.7 17.7-39.4 39.4-39.4 10.9 0 19.7-8.8 19.7-19.7s-8.8-19.7-19.7-19.7c-21.7 0-39.4-17.7-39.4-39.4v-78.8c0-15.2-5.9-28.9-15.4-39.4l-4.3-4.4zM98.5 196.9v-78.8c0-10.9 8.8-19.7 19.7-19.7 10.9 0 19.7-8.8 19.7-19.7S129.1 59 118.2 59c-32.6 0-59.1 26.5-59.1 59.1v78.8c0 21.7-17.7 39.4-39.4 39.4C8.8 236.3 0 245.1 0 256s8.8 19.7 19.7 19.7c21.7 0 39.4 17.7 39.4 39.4v78.8c0 32.6 26.5 59.1 59.1 59.1 10.9 0 19.7-8.8 19.7-19.7s-8.8-19.7-19.7-19.7c-10.9 0-19.7-8.8-19.7-19.7v-78.8c0-23.6-10.7-44.6-27.2-59.1 16.5-14.5 27.2-35.4 27.2-59.1z"}),y=a.a.createElement("circle",{cx:256,cy:187.1,r:29.5}),h=a.a.createElement("path",{d:"M256 295.4c-10.9 0-19.7 8.8-19.7 19.7v59.1c0 10.9 8.8 19.7 19.7 19.7s19.7-8.8 19.7-19.7v-59.1c0-10.9-8.8-19.7-19.7-19.7z"}),_=function(e){return a.a.createElement("svg",p({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),b,y,h)};function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=a.a.createElement("path",{d:"M256 33.66c-89.14 0-161.67 72.53-161.67 161.68C94.33 283.11 205.9 424 240.09 465a20.31 20.31 0 0015.63 7.34 20.32 20.32 0 0015.63-7.31c14.48-17.33 51.69-63.2 84.5-114.84 41-64.58 61.83-116.68 61.83-154.87C417.7 106.2 345.16 33.66 256 33.66zm83 305.84c-32.18 50.65-68.74 95.72-83 112.74a.32.32 0 01-.28.13.32.32 0 01-.28-.13c-14.17-17-50.6-62.11-82.65-112.75-38.24-60.49-58.46-110.29-58.46-144.14 0-78.13 63.55-141.68 141.67-141.68s141.7 63.57 141.7 141.7c0 33.83-20.3 83.63-58.7 144.14zm-30.15-146.87A52.85 52.85 0 11256 139.78a52.85 52.85 0 0152.85 52.85z"}),E=function(e){return a.a.createElement("svg",v({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),g)};function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var O=a.a.createElement("path",{d:"M466.22 11.16H116.94a35.82 35.82 0 00-35.78 35.78v52.12H45.78A35.82 35.82 0 0010 134.84v331.38A35.82 35.82 0 0045.78 502h349.28a35.82 35.82 0 0035.78-35.78V414.1h35.38A35.82 35.82 0 00502 378.32V46.94a35.82 35.82 0 00-35.78-35.78zM45.78 119.06h349.28a15.8 15.8 0 0115.78 15.78v248.81l-58.17-58.17a37 37 0 00-52.27 0L261 364.87 133.13 237a46.1 46.1 0 00-65.19 0L30 274.91V134.84a15.8 15.8 0 0115.78-15.78zM30 466.22v-163l52.08-52.08a26.1 26.1 0 0136.91 0L349.87 482H45.78A15.8 15.8 0 0130 466.22zM395.06 482h-16.9l-103-103 39.38-39.38a17 17 0 0124 0l72.31 72.31v54.29A15.8 15.8 0 01395.06 482zM482 378.32a15.8 15.8 0 01-15.78 15.78h-35.38V134.84a35.82 35.82 0 00-35.78-35.78h-293.9V46.94a15.8 15.8 0 0115.78-15.78h349.28A15.8 15.8 0 01482 46.94zM248 218.41A43.61 43.61 0 11291.58 262 43.61 43.61 0 01248 218.41z"}),j=function(e){return a.a.createElement("svg",w({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),O)};function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var S=a.a.createElement("path",{d:"M157.14 346.15A16.86 16.86 0 01140.3 363H34.93a16.84 16.84 0 110-33.67h35.42V200.78l-13 13a17 17 0 11-24-24l34.44-34.44a21.73 21.73 0 0137.09 15.36v158.61h35.42a16.86 16.86 0 0116.84 16.84zm159.23-106.48c4.07-8.15 6.14-17.92 6.14-29 0-17.59-6.39-32.91-19-45.51s-27.91-19-45.51-19-32.91 6.39-45.51 19-19 27.91-19 45.51c0 15.8 4.86 29.58 14.46 40.94a17.23 17.23 0 0013 6.12h.15a17.26 17.26 0 0013-5.9 17.26 17.26 0 00.35-22.31 28.7 28.7 0 01-6.45-18.88 30.08 30.08 0 018.81-21.77 29.23 29.23 0 0142.3 0 30.1 30.1 0 018.89 21.77c0 10.35-5.33 21.54-15.9 33.32l-73.21 83.31A21.51 21.51 0 00215 363h90.64a16.84 16.84 0 000-33.67h-63.41l54.86-62.46c9.05-10.46 15.35-19.36 19.28-27.2zm170 31.76a64.4 64.4 0 00-13.81-17.52c12.83-11.75 19.33-26.94 19.33-45.28a62.37 62.37 0 00-62.49-62.49c-17.23 0-32.07 6.15-44.09 18.29a60.64 60.64 0 00-16.5 29.51 17.28 17.28 0 0033.66 7.88 28.43 28.43 0 017.4-13.55 25.63 25.63 0 0119.54-8.44 26.09 26.09 0 0119.71 8.48 28.17 28.17 0 018.24 20.34 27.68 27.68 0 01-8.21 20.16 26.32 26.32 0 01-12.7 7.54A18.05 18.05 0 00422.91 254a18.32 18.32 0 0014 17.74 26.11 26.11 0 0113.83 8.26c5.89 6.87 8.63 13.64 8.63 21.32a30.08 30.08 0 01-8.81 21.77 29.23 29.23 0 01-42.31 0 30.07 30.07 0 01-8.06-14.64 17.26 17.26 0 10-33.75 7.3 62.78 62.78 0 0017.45 31.08c12.59 12.6 27.91 19 45.51 19s32.91-6.39 45.51-19 19-27.91 19-45.51a62.33 62.33 0 00-7.54-29.89z"}),P=function(e){return a.a.createElement("svg",k({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),S)};function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var x=a.a.createElement("path",{d:"M458.39 187.7h-127.8V71.51A27.56 27.56 0 00303.06 44H65.6a27.56 27.56 0 00-27.53 27.51V296.8a27.56 27.56 0 0027.53 27.52h59.86a167.35 167.35 0 0067.94 68.11v48.08A27.56 27.56 0 00220.93 468h237.46a27.56 27.56 0 0027.53-27.53V215.23a27.56 27.56 0 00-27.53-27.53zm7.53 27.53V233H213.4v-17.77a7.54 7.54 0 017.53-7.53h237.46a7.53 7.53 0 017.53 7.53zM65.6 64h237.46a7.54 7.54 0 017.53 7.53V89.3H58.07V71.51A7.54 7.54 0 0165.6 64zm0 240.34a7.53 7.53 0 01-7.53-7.53V109.3h252.52v78.4h-89.66a27.56 27.56 0 00-27.53 27.53v89.09H138A145 145 0 01126.83 263a20.16 20.16 0 10-20 1.12 164.84 164.84 0 009.57 40.24zm83 20h44.8v44.93a147.33 147.33 0 01-44.79-44.95zM458.39 448H220.93a7.54 7.54 0 01-7.53-7.53v-39a164.84 164.84 0 0040.6 9.8 20.15 20.15 0 101.12-20A145 145 0 01213.4 380V253h252.52v187.51a7.54 7.54 0 01-7.53 7.49z",fill:"#231f20"}),T=function(e){return a.a.createElement("svg",N({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),x)};function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var F=a.a.createElement("path",{d:"M409.356 336.464h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 100 20h21a10 10 0 000-20zm-57.15 0h-21a10 10 0 000 20h21a10 10 0 100-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 100-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 000-20zm285.71-124.6h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.15 0h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 100-20zm-74.67 51.8a10 10 0 00-10 10v21a10 10 0 0020 0v-21a10 10 0 00-10-10zm414.05 0a10 10 0 00-10 10v21a10 10 0 0020 0v-21a10 10 0 00-10-10zm0 55.27a10 10 0 00-10 10 7.541 7.541 0 01-7.53 7.53 10 10 0 000 20 27.561 27.561 0 0027.53-27.53 10 10 0 00-10-10zM445.5 211.864a10 10 0 000 20 7.541 7.541 0 017.53 7.53 10 10 0 0020 0 27.561 27.561 0 00-27.53-27.53zm-378.99 124.6a7.541 7.541 0 01-7.53-7.53 10 10 0 00-20 0 27.561 27.561 0 0027.53 27.53 10 10 0 100-20zm0-124.6a27.561 27.561 0 00-27.53 27.53 10 10 0 0020 0 7.541 7.541 0 017.53-7.53 10 10 0 000-20zM445.5 39.784H66.506a27.561 27.561 0 00-27.53 27.53v88.61a27.561 27.561 0 0027.53 27.53H445.5a27.561 27.561 0 0027.53-27.53v-88.61a27.561 27.561 0 00-27.53-27.53zm7.53 116.14a7.541 7.541 0 01-7.53 7.53H66.506a7.541 7.541 0 01-7.53-7.53v-88.61a7.541 7.541 0 017.53-7.53H445.5a7.541 7.541 0 017.53 7.53zM119.986 426.544a10 10 0 01-10 10h-20.67v20.67a10 10 0 01-20 0v-20.67h-20.66a10 10 0 010-20h20.66v-20.67a10 10 0 0120 0v20.67h20.67a10 10 0 0110 10z"}),M=function(e){return a.a.createElement("svg",R({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),F)};function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var q=a.a.createElement("path",{d:"M145.52 183.39L72.9 256l72.61 72.61a16.93 16.93 0 01-23.94 23.94l-90.16-90.16a9 9 0 010-12.78l90.17-90.17a17 17 0 0123.75-.19 16.93 16.93 0 01.19 24.13zM327 116.88a17 17 0 00-23 7.37l-126.54 248a17 17 0 1030.37 15.5l126.53-248a17.1 17.1 0 00-7.36-22.87zm153.59 132.73l-90.17-90.17a17 17 0 00-23.75-.19 16.93 16.93 0 00-.19 24.13L439.1 256l-72.61 72.61a16.93 16.93 0 0023.94 23.94l90.17-90.16a9 9 0 000-12.78z"}),I=function(e){return a.a.createElement("svg",C({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),q)};function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var A=a.a.createElement("path",{d:"M49.52 92.64v-40A11.45 11.45 0 0161 41.22h148.5a11.45 11.45 0 0111.45 11.45v40a17.14 17.14 0 01-17.14 17.14 17.14 17.14 0 01-17.14-17.14V75.5h-34.3v120a17.14 17.14 0 01-34.28 0v-120H83.8v17.14a17.14 17.14 0 11-34.28 0zm411.74 166.25H51a10 10 0 000 20h410.3a10 10 0 000-20zm0 60H51a10 10 0 000 20h410.3a10 10 0 000-20zm0 61H51a10 10 0 000 20h410.3a10 10 0 000-20zm-178-221.34h178a10 10 0 000-20h-178a10 10 0 000 20zm178 40h-178a10 10 0 000 20h178a10 10 0 000-20zm0 242.34H51a10 10 0 000 20h410.3a10 10 0 000-20z"}),z=function(e){return a.a.createElement("svg",L({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),A)};n.d(t,"b",(function(){return D}));t.a=[{name:"text",types:["string","text"]},{name:"rich_text",types:["rich_text"]},{name:"media",types:["file","gallery","video"]},{name:"datetime",types:["date","date_time"]},{name:"number",types:["integer","float"]},{name:"boolean",types:["boolean"]},{name:"location",types:["lat_lon"]},{name:"color",types:["color"]},{name:"seo",types:["slug","seo"]},{name:"reference",types:["link","links"]},{name:"json",types:["json"]}];var D={boolean:l,color:u,datetime:f,json:_,location:E,media:j,number:P,reference:T,rich_text:M,seo:I,text:z}},2356:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(1),o=n.n(i),l=n(282),c=n(64);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function d(e){var t=e.userLinks,n=e.limit,r=m(e,["userLinks","limit"]),i=u(new Set(t.map((function(e){return JSON.stringify(e)})))).map(JSON.parse),o=function(e){return a.a.createElement(c.a,s({userLink:e},r))};return i.length>n?a.a.createElement(a.a.Fragment,null,Object(l.a)(i.slice(0,n).map(o),", "),"and ",i.length-n," other users"):Object(l.a)(i.map(o),", "," and ")}d.propTypes={userLinks:o.a.array,limit:o.a.number},d.defaultProps={limit:2},t.default=d},2357:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=["h","k h","M h"];function a(e){if(isNaN(parseFloat(e))||!isFinite(e))return"-";if(e<1)return"0";if(e<60)return"".concat(e," s");if(e<3600)return"".concat(Math.floor(e/60)," m");var t=Math.floor(e/3600),n=Math.floor(Math.log(t)/Math.log(1e3));return"".concat((t/Math.pow(1e3,Math.floor(n))).toFixed(0)," ").concat(r[n])}},2362:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(2363);function a(e){return e.split(/\-/).map((function(e){return Object(r.a)(e)})).join("-")}},2363:function(e,t,n){"use strict";function r(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)}n.d(t,"a",(function(){return r}))},2364:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return p}));var r=n(148),a=n(629),i=n(1045);function o(){var e=r.default.netlifyClientId,t=r.default.netlifyRedirectUrl;return new Promise((function(n){var r=(window.screen.height-500)/2,i=(window.screen.width-780)/2,o="width=".concat(780,",height=").concat(500,",toolbar=0,\n      scrollbars=0,status=0,resizable=0,location=0,menubar=0,left=").concat(i,",\n      top=").concat(r,", directories=no"),l="".concat(window.location.protocol,"//").concat(window.location.host),c=window.open("https://app.netlify.com/authorize?client_id=".concat(e,"&response_type=token&redirect_uri=").concat(t,"&state=").concat(l),"netlify",o),s=Object(a.a)(t),u=s.protocol,m=s.host;window.addEventListener("message",(function e(t){t.origin==="".concat(u,"//").concat(m)&&(c.close(),window.removeEventListener("message",e),n(t.data))}))}))}var l=function(e){return function(t,n){for(var r={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}},a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return e.apply(void 0,["https://api.netlify.com/api/v1"+n].concat(i,[r]))}},c=l(i.post),s=l(i.get);function u(e){return s(e,"/sites?filter=all")}function m(e,t){return s(e,"/sites/".concat(t))}function d(e,t){return c(e,"/hooks",t)}function f(e,t,n){return c(e,"/sites/".concat(t,"/build_hooks"),n)}function p(e,t){return s(e,"/deploys/".concat(t))}},2365:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return b}));var r,a=n(148),i=n(629),o=n(1045),l="https://vercel.com/api",c=(r=o.post,function(e,t){for(var n={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(e)}},a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return r.apply(void 0,[l+t].concat(i,[n]))}),s=function(e){return function(t,n){for(var r={headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}},a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];return e.apply(void 0,[l+n].concat(i,[r]))}}(o.get);function u(e){var t,n,r,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(s(e,"/v1/teams/"));case 2:return t=i.sent,n=t.teams,r=s(e,"/v2/projects/"),a=n.map((function(t){return s(e,"/v2/projects?teamId=".concat(t.id))})),i.abrupt("return",Promise.all(a.concat(r)));case 7:case"end":return i.stop()}}))}function m(e,t,n){var r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.startsWith("team_")?"?teamId=".concat(n):"",a.abrupt("return",s(e,"/v1/projects/".concat(t).concat(r)));case 2:case"end":return a.stop()}}))}function d(e,t,n,r){var a=r?"?teamId=".concat(r):"";return c(e,"/v2/projects/".concat(t,"/deploy-hooks").concat(a),{name:"DatoCMS deploy hook",ref:n})}function f(e,t,n){var r,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r=n?"?teamId=".concat(n):"",i.next=3,regeneratorRuntime.awrap(s(e,"/v1/integrations/webhooks".concat(r)));case 3:if(a=i.sent,a.find((function(e){return e.url.includes("/zeit-deploy-results")}))){i.next=8;break}return i.next=8,regeneratorRuntime.awrap(c(e,"/v1/integrations/webhooks".concat(r),{name:"DatoCMS deploy status",url:t,events:["deployment-ready","deployment-error"]}));case 8:case"end":return i.stop()}}))}function p(e,t){return s(e,"/v2/now/deployments/".concat(t,"/events?limit=-1"))}function b(){var e=a.default.zeitClientId,t=a.default.zeitRedirectUrl;return new Promise((function(n){var r=(window.screen.height-500)/2,a=(window.screen.width-780)/2,o="width=".concat(780,",height=").concat(500,",toolbar=0,\n      scrollbars=0,status=0,resizable=0,location=0,menubar=0,left=").concat(a,",\n      top=").concat(r,", directories=no"),l="".concat(window.location.protocol,"//").concat(window.location.host),c=window.open("https://vercel.com/oauth/authorize?client_id=".concat(e,"&response_type=token&redirect_uri=").concat(t,"&state=").concat(l),"zeit",o),s=Object(i.a)(t),u=s.protocol,m=s.host;window.addEventListener("message",(function e(t){t.origin==="".concat(u,"//").concat(m)&&(window.removeEventListener("message",e),c.close(),n(t.data))}))}))}},2366:function(e,t,n){"use strict";var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M500 8h-27.711c-6.739 0-12.157 5.548-11.997 12.286l2.347 98.575C418.212 52.043 342.256 8 256 8 134.813 8 33.933 94.924 12.296 209.824 10.908 217.193 16.604 224 24.103 224h28.576c5.674 0 10.542-3.982 11.737-9.529C83.441 126.128 161.917 60 256 60c79.545 0 147.942 47.282 178.676 115.302l-126.39-3.009c-6.737-.16-12.286 5.257-12.286 11.997V212c0 6.627 5.373 12 12 12h192c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12zm-12.103 280h-28.576c-5.674 0-10.542 3.982-11.737 9.529C428.559 385.872 350.083 452 256 452c-79.546 0-147.942-47.282-178.676-115.302l126.39 3.009c6.737.16 12.286-5.257 12.286-11.997V300c0-6.627-5.373-12-12-12H12c-6.627 0-12 5.373-12 12v192c0 6.627 5.373 12 12 12h27.711c6.739 0 12.157-5.548 11.997-12.286l-2.347-98.575C93.788 459.957 169.744 504 256 504c121.187 0 222.067-86.924 243.704-201.824 1.388-7.369-4.308-14.176-11.807-14.176z"});t.a=function(e){return a.a.createElement("svg",i({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),o)}},2487:function(e,t,n){"use strict";n.r(t);var r,a,i,o=n(1),l=n.n(o),c=n(0),s=n.n(c),u=n(5),m=n(2),d=n(67),f=n(74),p=n.n(f),b=n(24),y=n(2234),h=n(145),_=n.n(h),v=n(62),g=n.n(v),E=n(39),w=n(6),O=n(1042),j=n.n(O),k=n(169),S=n(1041);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C,q,I,L=Object(w.connect)((function(e){var t=e.subscriptionLimits;return{pagesLimit:t.indexable_pages&&t.indexable_pages.attributes.limit}}))((i=a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,R(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(e(Object(S.fetch)("indexable_pages")));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"render",value:function(){var e=this.props.pagesLimit;return s.a.createElement(s.a.Fragment,null,s.a.createElement(b.default,{name:"name",intlLabel:"buildTrigger.name.label",type:"text",className:"form__input form__input--large"}),s.a.createElement(b.default,{name:"frontend_url",intlLabel:"buildTrigger.frontendUrl.label",intlHint:"buildTrigger.frontendUrl.hint",type:"text",className:"form__input"}),s.a.createElement("div",{className:"Page__content__section"},s.a.createElement("div",{className:"Page__content__section__title"},s.a.createElement("span",null,s.a.createElement(m.FormattedMessage,{id:"buildTrigger.options"}))),s.a.createElement(b.default,{name:"autotrigger_on_scheduled_publications",intlLabel:"buildTrigger.schedule.label",component:k.a}),s.a.createElement(b.default,{name:"indexing_enabled",intlLabel:"buildTrigger.spidering.label",hint:e?this.t("buildTrigger.spidering.hintWithLimit",{limit:e}):this.t("buildTrigger.spidering.hint"),intlDocs:"buildTrigger.spidering.guide",docsHref:"https://www.datocms.com/docs/guides/installing-site-search",component:k.a})),s.a.createElement("div",{className:"Page__content__section"},s.a.createElement("div",{className:"Page__content__section__title"},s.a.createElement("span",null,s.a.createElement(m.FormattedMessage,{id:"buildTrigger.buildMethod"})))))}}])&&x(n.prototype,r),a&&x(n,a),t}(u.a),M(a,"propTypes",{pagesLimit:l.a.number,dispatch:l.a.func.isRequired}),M(a,"contextTypes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({route:l.a.object},u.a.contextTypes)),r=i))||r,A=n(117),z=n.n(A);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G,W,J,$=Object(w.connect)((function(e,t){var n=t.buildTrigger,r=n.attributes,a=r.adapter_settings||{},i=r.adapter_settings?Object(O.deserialize)(r.adapter_settings.build_parameters):[];return{initialValues:{name:r.name,frontend_url:r.frontend_url||null,indexing_enabled:r.indexing_enabled,autotrigger_on_scheduled_publications:r.autotrigger_on_scheduled_publications,trigger_url:a.trigger_url,branch:a.ref,token:a.token,build_parameters:i},onSubmit:function(e){var r=z()(n);return r.attributes={name:e.name,indexing_enabled:e.indexing_enabled,frontend_url:e.frontend_url||null,autotrigger_on_scheduled_publications:e.autotrigger_on_scheduled_publications,adapter:"gitlab",webhook_token:e.webhook_token,adapter_settings:{trigger_url:e.trigger_url,token:e.token,ref:e.branch,build_parameters:Object(O.serialize)(e.build_parameters)||{}}},t.onSubmit(r)}}}))(C=Object(E.withForm)({form:"GitlabSettings",validate:_()({name:[g.a.required()],frontend_url:[g.a.url()],trigger_url:[g.a.required(),g.a.url()],token:[g.a.required()],branch:[g.a.required()],build_parameters:O.validator})})((I=q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,U(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.buildTrigger;return s.a.createElement(d.default,null,s.a.createElement(L,{buildTrigger:e}),s.a.createElement("div",{className:"trigger-config"},s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"gitlab.trigger"})),s.a.createElement("div",{className:"trigger-config__step__image"},s.a.createElement("img",{src:"/assets/images/gitlab/trigger.gif",alt:"Trigger tutorial",className:"framed-image"})),s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"token",intlLabel:"gitlab.triggerDescription1",intlPlaceholder:"gitlab.trigger.placeholder",type:"text",className:"form__input--code"}),s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"trigger_url",intlLabel:"gitlab.triggerDescription3",intlPlaceholder:"gitlab.trigger.placeholder3",type:"text",className:"form__input--code"}),s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"branch",intlLabel:"gitlab.branch",intlPlaceholder:"gitlab.branch.placeholder",type:"text",className:"form__input--code"}),s.a.createElement("div",{className:"form__field--less-margin form__field--black-label"},s.a.createElement("div",{className:"form__label"},this.t("gitlab.buildParameters")),s.a.createElement(E.FieldArray,{name:"build_parameters",component:j.a,intlPrefix:"buildTriggerVariablesInput"})))),s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"gitlab.webhook"})),s.a.createElement("div",{className:"trigger-config__step__image"},s.a.createElement("img",{src:"/assets/images/gitlab/webhook.gif",alt:"Webhook tutorial",className:"framed-image"})),s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"gitlab.webhookDescription"})),s.a.createElement("div",{className:"space--bottom-1"},s.a.createElement(y.a,{value:e.attributes.webhook_url,className:"form__input--code"}))))),s.a.createElement(p.a,{intlLabel:"gitlab.button"}))}}])&&B(n.prototype,r),a&&B(n,a),t}(u.a),G=q,W="propTypes",J={buildTrigger:l.a.object},W in G?Object.defineProperty(G,W,{value:J,enumerable:!0,configurable:!0,writable:!0}):G[W]=J,C=I))||C)||C,K=n(2364),X=n(29);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Z,Y,ee,te=s.a.createElement("defs",null,s.a.createElement("radialGradient",{id:"netlify_svg__a",cy:"0%",r:"100.11%",fx:"50%",fy:"0%",gradientTransform:"matrix(0 .9989 -1.152 0 .5 -.5)"},s.a.createElement("stop",{offset:"0%",stopColor:"#20C6B7"}),s.a.createElement("stop",{offset:"100%",stopColor:"#4D9ABF"}))),ne=s.a.createElement("path",{fill:"url(#netlify_svg__a)",d:"M28.589 14.135l-.014-.006c-.008-.003-.016-.006-.023-.013a.11.11 0 01-.028-.093l.773-4.726 3.625 3.626-3.77 1.604a.083.083 0 01-.033.006h-.015a.104.104 0 01-.02-.017 1.716 1.716 0 00-.495-.381zm5.258-.288l3.876 3.876c.805.806 1.208 1.208 1.355 1.674.022.069.04.138.054.209l-9.263-3.923a.728.728 0 00-.015-.006c-.037-.015-.08-.032-.08-.07 0-.038.044-.056.081-.071l.012-.005 3.98-1.684zm5.127 7.003c-.2.376-.59.766-1.25 1.427l-4.37 4.369-5.652-1.177-.03-.006c-.05-.008-.103-.017-.103-.062a1.706 1.706 0 00-.655-1.193c-.023-.023-.017-.059-.01-.092 0-.005 0-.01.002-.014l1.063-6.526.004-.022c.006-.05.015-.108.06-.108a1.73 1.73 0 001.16-.665c.009-.01.015-.021.027-.027.032-.015.07 0 .103.014l9.65 4.082zm-6.625 6.801l-7.186 7.186 1.23-7.56.002-.01a.136.136 0 01.006-.029c.01-.024.036-.034.061-.044l.012-.005a1.85 1.85 0 00.695-.517c.024-.028.053-.055.09-.06a.09.09 0 01.029 0l5.06 1.04zm-8.707 8.707l-.81.81-8.955-12.942a.424.424 0 00-.01-.014c-.014-.019-.029-.038-.026-.06.001-.016.011-.03.022-.042l.01-.013c.027-.04.05-.08.075-.123l.02-.035.003-.003c.014-.024.027-.047.051-.06.021-.01.05-.006.073-.001l9.921 2.046a.164.164 0 01.076.033c.013.013.016.027.019.043a1.757 1.757 0 001.028 1.175c.028.014.016.045.003.078a.238.238 0 00-.015.045c-.125.76-1.197 7.298-1.485 9.063zm-1.692 1.691c-.597.591-.949.904-1.347 1.03a2 2 0 01-1.206 0c-.466-.148-.869-.55-1.674-1.356L8.73 28.73l2.349-3.643a.15.15 0 01.04-.047c.025-.018.061-.01.091 0a2.434 2.434 0 001.638-.083c.027-.01.054-.017.075.002a.19.19 0 01.028.032L21.95 38.05zM7.863 27.863L5.8 25.8l4.074-1.738a.084.084 0 01.033-.007c.034 0 .054.034.072.065a2.91 2.91 0 00.13.184l.013.016c.012.017.004.034-.008.05l-2.25 3.493zm-2.976-2.976l-2.61-2.61c-.444-.444-.766-.766-.99-1.043l7.936 1.646a.84.84 0 00.03.005c.049.008.103.017.103.063 0 .05-.059.073-.109.092l-.023.01-4.337 1.837zM.831 19.892a2 2 0 01.09-.495c.148-.466.55-.868 1.356-1.674l3.34-3.34a2175.525 2175.525 0 004.626 6.687c.027.036.057.076.026.106a2.776 2.776 0 00-.395.528.16.16 0 01-.05.062c-.013.008-.027.005-.042.002H9.78L.831 19.891zm5.68-6.403l4.491-4.491c.422.185 1.958.834 3.332 1.414 1.04.44 1.988.84 2.286.97.03.012.057.024.07.054.008.018.004.041 0 .06a2.003 2.003 0 00.523 1.828c.03.03 0 .073-.026.11l-.014.021-4.56 7.063a.138.138 0 01-.043.05c-.024.015-.058.008-.086.001a2.274 2.274 0 00-.543-.074c-.164 0-.342.03-.522.063h-.001c-.02.003-.038.007-.054-.005a.21.21 0 01-.045-.051l-4.808-7.013zm5.398-5.398l5.814-5.814c.805-.805 1.208-1.208 1.674-1.355a2 2 0 011.206 0c.466.147.869.55 1.674 1.355l1.26 1.26-4.135 6.404a.155.155 0 01-.041.048c-.025.017-.06.01-.09 0a2.097 2.097 0 00-1.92.37c-.027.028-.067.012-.101-.003-.54-.235-4.74-2.01-5.341-2.265zm12.506-3.676l3.818 3.818-.92 5.698v.015a.135.135 0 01-.008.038c-.01.02-.03.024-.05.03a1.83 1.83 0 00-.548.273.154.154 0 00-.02.017c-.011.012-.022.023-.04.025a.114.114 0 01-.043-.007l-5.818-2.472-.011-.005c-.037-.015-.081-.033-.081-.071a2.198 2.198 0 00-.31-.915c-.028-.046-.059-.094-.035-.141l4.066-6.303zm-3.932 8.606l5.454 2.31c.03.014.063.027.076.058a.106.106 0 010 .057c-.016.08-.03.171-.03.263v.153c0 .038-.039.054-.075.069l-.011.004c-.864.369-12.13 5.173-12.147 5.173-.017 0-.035 0-.052-.017-.03-.03 0-.072.027-.11a.76.76 0 00.014-.02l4.482-6.94.008-.012c.026-.042.056-.089.104-.089l.045.007c.102.014.192.027.283.027.68 0 1.31-.331 1.69-.897a.16.16 0 01.034-.04c.027-.02.067-.01.098.004zm-6.246 9.185l12.28-5.237s.018 0 .035.017c.067.067.124.112.179.154l.027.017c.025.014.05.03.052.056 0 .01 0 .016-.002.025L25.756 23.7l-.004.026c-.007.05-.014.107-.061.107a1.729 1.729 0 00-1.373.847l-.005.008c-.014.023-.027.045-.05.057-.021.01-.048.006-.07.001l-9.793-2.02c-.01-.002-.152-.519-.163-.52z"}),re=function(e){return s.a.createElement("svg",Q({width:"1em",height:"1em"},e),te,ne)};function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var se=Object(w.connect)((function(e,t){var n=t.buildTrigger,r=t.buildHookUrl,a=t.linkedSite,i=t.accessToken,o=t.webhookToken,l=n.attributes,c=t.settings||{};return{initialValues:{name:l.name,frontend_url:l.frontend_url||null,indexing_enabled:l.indexing_enabled,autotrigger_on_scheduled_publications:l.autotrigger_on_scheduled_publications,branch:c.branch,trigger_url:r||c.trigger_url,site_id:a.id,access_token:i||c.access_token},onSubmit:function(e){var l=z()(n);return l.attributes={name:e.name,indexing_enabled:e.indexing_enabled,frontend_url:e.frontend_url||null,autotrigger_on_scheduled_publications:e.autotrigger_on_scheduled_publications,adapter:"netlify",webhook_token:o,adapter_settings:{trigger_url:r||e.trigger_url,site_id:a.id,access_token:i||e.access_token,branch:e.branch}},t.onSubmit(l)}}}))(Z=Object(E.withForm)({form:"NetlifySettings",validate:_()({name:[g.a.required()],frontend_url:[g.a.url()]})})((ee=Y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),oe(this,le(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.linkedSite,n=e.onReset,r=e.buildTrigger;return s.a.createElement("div",{className:"NetlifySettings__linkedStep"},s.a.createElement(d.default,null,s.a.createElement(L,{buildTrigger:r}),t?s.a.createElement("div",{className:"NetlifySettings__linkedStep__inner"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"netlifySettings.noLink"})),s.a.createElement("a",{className:"NetlifySettings__selectSite__site",href:t.admin_url,target:"_blank",rel:"noopener noreferrer"},s.a.createElement(re,null),s.a.createElement("span",{className:"NetlifySettings__selectSite__site__name"},t.name),s.a.createElement("span",{className:"NetlifySettings__selectSite__site__url"},t.url)),s.a.createElement(b.default,{name:"branch",intlLabel:"netlify.branch",intlHint:"netlify.branch.hint",intlPlaceholder:"netlify.branch.placeholder",type:"text",className:"form__input form__input--code"}),s.a.createElement(p.a,{intlLabel:"netlify.button",forceDirty:!0}),s.a.createElement("a",{href:"#",onClick:n.bind(this),className:"NetlifySettings__linkedStep__reset"},s.a.createElement(m.FormattedMessage,{id:"netlifySettings.changeLink"}))):s.a.createElement("div",{className:"NetlifySettings__linkedStep__loading"},s.a.createElement(X.default,{size:80}))))}}])&&ie(n.prototype,r),a&&ie(n,a),t}(c.Component),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Y,"propTypes",{onReset:l.a.func.isRequired,buildTrigger:l.a.object.isRequired,linkedSite:l.a.object}),Z=ee))||Z)||Z,ue=function(e){var t=e.onSubmit;return s.a.createElement("div",{className:"NetlifySettings__signIn"},s.a.createElement("div",{className:"NetlifySettings__signIn__inner"},s.a.createElement("a",{href:"#",onClick:t.bind(void 0)},s.a.createElement("img",{src:"/assets/images/netlify/signin.svg",alt:"Deploy with Netlify"})),s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"netlifySettings.integrationStart"}))))};ue.propTypes={onSubmit:l.a.func.isRequired};var me=ue,de=function(){return s.a.createElement("div",{className:"NetlifySettings__loadingSites"},s.a.createElement("div",{className:"NetlifySettings__loadingSites__inner"},s.a.createElement(X.default,{inline:!0,size:70}),s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"netlifySettings.loadingProjects"}))))},fe=function(e){var t=e.onReset,n=e.onSubmit,r=e.sites;return 0===r.length?s.a.createElement("div",{className:"NetlifySettings__noSites"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"netlifySettings.noProjects"})),s.a.createElement("a",{href:"https://app.netlify.com/start",target:"_blank",rel:"noopener noreferrer",className:"button button--primary button--large"},s.a.createElement(m.FormattedMessage,{id:"netlifySettings.createProject"})),s.a.createElement("a",{className:"NetlifySettings__noSites__refresh",href:"#",onClick:t.bind(void 0)},s.a.createElement(m.FormattedMessage,{id:"netlifySettings.projectCreated"}))):s.a.createElement("div",{className:"NetlifySettings__selectSite"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"netlifySettings.projectSelect"})),r.map((function(e){return function(e){return s.a.createElement("a",{key:e.id,className:"NetlifySettings__selectSite__site",href:"#",onClick:n.bind(void 0,e)},s.a.createElement(re,null),s.a.createElement("span",{className:"NetlifySettings__selectSite__site__name"},e.name),s.a.createElement("span",{className:"NetlifySettings__selectSite__site__url"},e.url))}(e)})))};fe.propTypes={onSubmit:l.a.func.isRequired,onReset:l.a.func.isRequired,sites:l.a.array.isRequired};var pe,be,ye,he=fe,_e=function(e){var t=e.state,n=function(e,n){return s.a.createElement("div",{className:"NetlifySettings__creatingHooks__hook"},t[e]?s.a.createElement("div",null,s.a.createElement("i",{className:"icon--check-circle"}),s.a.createElement(m.FormattedMessage,{id:"netlifySettings.hooks.".concat(n)})," ",s.a.createElement("strong",null,s.a.createElement(m.FormattedMessage,{id:"netlifySettings.hooks.done"}))):s.a.createElement("div",null,s.a.createElement(X.default,{size:20}),s.a.createElement(m.FormattedMessage,{id:"netlifySettings.hooks.".concat(n)})))};return s.a.createElement("div",{className:"NetlifySettings__creatingHooks"},s.a.createElement("div",{className:"NetlifySettings__creatingHooks__inner"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"netlifySettings.hooks.creation"})),n("successHookCreated","success"),n("failureHookCreated","failure"),n("buildHookUrl","build")))},ve=_e;function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oe(e){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}_e.propTypes={state:l.a.object.isRequired};var ke=Object(w.connect)((function(e,t){return{settings:t.buildTrigger.attributes.adapter_settings,webhookUrl:t.buildTrigger.attributes.webhook_url,webhookToken:t.buildTrigger.attributes.webhook_token}}))((ye=be=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=we(this,Oe(t).call(this,e))).state={accessToken:null,linkedSite:null,sites:null,sitesLoaded:!1,selectedSite:null,successHookCreated:!1,failureHookCreated:!1,buildHookUrl:!1,ignoreSavedSettings:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.settings;t&&t.access_token&&Object(K.d)(t.access_token,t.site_id).then((function(t){return e.setState({linkedSite:t})})).catch((function(){return e.setState({ignoreSavedSettings:!0})})),t&&t.access_token||this.handleOpenAuthPopup()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props,r=e.settings;n&&r&&n.site_id!==r.site_id&&Object(K.d)(r.access_token,r.site_id).then((function(e){return t.setState({linkedSite:e,ignoreSavedSettings:!1})})).catch((function(){return t.setState({ignoreSavedSettings:!0})}))}},{key:"handleSiteSelect",value:function(e,t){var n,r,a,i=this;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=this.props.webhookUrl,t.preventDefault(),r=this.state.accessToken,this.setState({selectedSite:e}),o.prev=4,o.next=7,regeneratorRuntime.awrap(Promise.all([Object(K.b)(r,{type:"url",site_id:e.id,event:"deploy_created",data:{url:n}}).then((function(){return i.setState({successHookCreated:!0})})),Object(K.b)(r,{type:"url",site_id:e.id,event:"deploy_failed",data:{url:n}}).then((function(){return i.setState({failureHookCreated:!0})})),Object(K.a)(r,e.id,{title:"DatoCMS Build Hook"}).then((function(e){var t=e.url;return i.setState({buildHookUrl:t})}))]));case 7:a=this.state.selectedSite,setTimeout((function(){i.setState({linkedSite:a,selectedSite:null,sitesLoaded:!1,ignoreSavedSettings:!1})}),2e3),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(4),alert("Error creating hooks: ".concat(o.t0));case 14:case"end":return o.stop()}}),null,this,[[4,11]])}},{key:"handleSubmit",value:function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,this.props.onSubmit)(e),t.abrupt("return",this.setState({accessToken:null}));case 3:case"end":return t.stop()}}),null,this)}},{key:"handleOpenAuthPopup",value:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e&&e.preventDefault(),r.prev=1,r.next=4,regeneratorRuntime.awrap(Object(K.f)());case 4:return t=r.sent,this.setState({accessToken:t}),r.next=8,regeneratorRuntime.awrap(Object(K.e)(t));case 8:n=r.sent,this.setState({sites:n,sitesLoaded:!0}),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(1),alert("Error fetching sites: ".concat(r.t0));case 15:case"end":return r.stop()}}),null,this,[[1,12]])}},{key:"handleRefreshSites",value:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.state.accessToken,e.preventDefault(),this.setState({sitesLoaded:!1}),r.prev=3,r.next=6,regeneratorRuntime.awrap(Object(K.e)(t));case 6:n=r.sent,this.setState({sites:n,sitesLoaded:!0}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),alert("Error fetching sites: ".concat(r.t0));case 13:case"end":return r.stop()}}),null,this,[[3,10]])}},{key:"handleReset",value:function(e){e.preventDefault(),this.setState({ignoreSavedSettings:!0,accessToken:null})}},{key:"currentStep",value:function(){var e=this.props,t=e.settings,n=e.buildTrigger,r=e.webhookToken,a=this.state,i=a.accessToken,o=a.sitesLoaded,l=a.selectedSite,c=a.ignoreSavedSettings,u=a.linkedSite,m=a.successHookCreated,d=a.failureHookCreated,f=a.buildHookUrl,p=a.sites;return!c&&u?s.a.createElement(se,{linkedSite:u,buildTrigger:n,settings:t,buildHookUrl:f,webhookToken:r,accessToken:i,onReset:this.handleReset.bind(this),onSubmit:this.handleSubmit.bind(this)}):l?s.a.createElement(ve,{state:{failureHookCreated:d,successHookCreated:m,buildHookUrl:f}}):o?s.a.createElement(he,{onReset:this.handleRefreshSites.bind(this),onSubmit:this.handleSiteSelect.bind(this),sites:p}):i?s.a.createElement(de,null):!n.id||c?s.a.createElement(me,{onSubmit:this.handleOpenAuthPopup.bind(this)}):s.a.createElement("div",null)}},{key:"render",value:function(){var e=this.currentStep();return s.a.createElement("div",{className:"NetlifySettings"},e)}}])&&Ee(n.prototype,r),a&&Ee(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(be,"propTypes",{buildTrigger:l.a.object,settings:l.a.object,onSubmit:l.a.func.isRequired,webhookUrl:l.a.string.isRequired,webhookToken:l.a.string.isRequired}),pe=ye))||pe;ke.smallModal=!0;var Se=n(10),Pe=n(2365);function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var xe,Te,Re,Fe=s.a.createElement("defs",null,s.a.createElement("linearGradient",{x1:"100.93%",y1:"181.283%",x2:"41.769%",y2:"100%",id:"zeit_svg__a"},s.a.createElement("stop",{stopColor:"#FFF",offset:"0%"}),s.a.createElement("stop",{offset:"100%"}))),Me=s.a.createElement("path",{d:"M350 150l57 100H293z",transform:"translate(-293 -150)",fill:"url(#zeit_svg__a)",fillRule:"evenodd"}),Ce=function(e){return s.a.createElement("svg",Ne({width:"1em",height:"1em",viewBox:"0 0 114 100"},e),Fe,Me)};function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=Object(w.connect)((function(e,t){var n=t.buildTrigger,r=t.deployHookUrl,a=t.zeitProject,i=t.token,o=t.branch,l=n.attributes,c=t.settings||{};return{initialValues:{name:l.name,branch:l.branch,frontend_url:l.frontend_url||null,indexing_enabled:l.indexing_enabled,autotrigger_on_scheduled_publications:l.autotrigger_on_scheduled_publications,project_id:a.name},forceDirty:l.adapter_settings&&a.name!==l.adapter_settings.project_id,onSubmit:function(e){var l=z()(n);return l.attributes={name:e.name,indexing_enabled:e.indexing_enabled,frontend_url:e.frontend_url||null,autotrigger_on_scheduled_publications:e.autotrigger_on_scheduled_publications,adapter:"zeit",adapter_settings:{deploy_hook_url:r||c.deploy_hook_url,project_id:a.name,account_id:a.accountId,branch:o||c.branch,token:i||c.token}},t.onSubmit(l)}}}))(xe=Object(E.withForm)({form:"ZeitSettings",validate:_()({name:[g.a.required()],frontend_url:[g.a.url()]})})((Re=Te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Le(this,Ae(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.zeitProject,n=e.onReset,r=e.buildTrigger,a=e.forceDirty;return s.a.createElement("div",{className:"NetlifySettings__linkedStep"},s.a.createElement(d.default,null,s.a.createElement(L,{buildTrigger:r}),s.a.createElement("div",{className:"NetlifySettings__linkedStep__inner"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"zeitSettings.noLink"})),s.a.createElement("a",{className:"NetlifySettings__selectSite__site",href:"https://vercel.com/dashboard",target:"_blank",rel:"noopener noreferrer"},s.a.createElement(Ce,null),s.a.createElement("span",{className:"NetlifySettings__selectSite__site__name"},t.name),t.link&&t.link.type&&s.a.createElement("span",{className:"NetlifySettings__selectSite__site__url"},t.link.type)),s.a.createElement(p.a,{intlLabel:"netlify.button",forceDirty:a}),s.a.createElement("a",{href:"#",onClick:n,className:"NetlifySettings__linkedStep__reset"},s.a.createElement(m.FormattedMessage,{id:"zeitSettings.changeLink"})))))}}])&&Ie(n.prototype,r),a&&Ie(n,a),t}(c.Component),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Te,"propTypes",{onReset:l.a.func.isRequired,buildTrigger:l.a.object.isRequired,zeitProject:l.a.object,forceDirty:l.a.bool}),xe=Re))||xe)||xe,Be=function(e){var t=e.onSubmit;return s.a.createElement("div",{className:"NetlifySettings__signIn"},s.a.createElement("div",{className:"NetlifySettings__signIn__inner"},s.a.createElement("a",{href:"#",onClick:t.bind(void 0),className:"button--large"},s.a.createElement(Ce,null),s.a.createElement(m.FormattedMessage,{id:"zeitSettings.deployToZeit"})),s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"zeitSettings.integrationStart"}))))};Be.propTypes={onSubmit:l.a.func.isRequired};var He=Be,Ue=function(){return s.a.createElement("div",{className:"NetlifySettings__loadingSites"},s.a.createElement("div",{className:"NetlifySettings__loadingSites__inner"},s.a.createElement(X.default,{inline:!0,size:70}),s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"zeitSettings.loadingProjects"}))))},Ve=function(e){var t=e.onReset,n=e.onClick,r=e.projects;return 0===r.length?s.a.createElement("div",{className:"NetlifySettings__noSites"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"zeitSettings.noProjects"})),s.a.createElement("a",{href:"https://vercel.com/dashboard",target:"_blank",rel:"noopener noreferrer",className:"button button--primary button--large"},s.a.createElement(m.FormattedMessage,{id:"zeitSettings.createProject"})),s.a.createElement("a",{className:"NetlifySettings__noSites__refresh",href:"#",onClick:t.bind(null,null)},s.a.createElement(m.FormattedMessage,{id:"zeitSettings.projectCreated"}))):s.a.createElement("div",{className:"NetlifySettings__selectSite"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"zeitSettings.projectSelect"})),r.map((function(e){return function(e){var t=e.link;return s.a.createElement("button",{key:e.id,type:"button",className:"NetlifySettings__selectSite__site ".concat(t?"":"is-disabled"),disabled:!t,onClick:n.bind(null,e)},s.a.createElement(Ce,null),s.a.createElement("span",{className:"NetlifySettings__selectSite__site__name"},e.name),s.a.createElement("span",{className:"NetlifySettings__selectSite__site__url "},t?"":s.a.createElement(m.FormattedMessage,{id:"zeitSettings.notLinkable"})))}(e)})),s.a.createElement("a",{className:"NetlifySettings__noSites__refresh",href:"#",onClick:t.bind(null,null)},s.a.createElement(m.FormattedMessage,{id:"zeitSettings.projectCreated"})))};Ve.propTypes={onClick:l.a.func.isRequired,onReset:l.a.func.isRequired,projects:l.a.array.isRequired};var Ge=Ve;var We={form:"SelectBranch",validate:_()({branch:[g.a.required()]})},Je=Object(E.withForm)(We)((function(){return s.a.createElement("div",{className:"NetlifySettings__linkedStep"},s.a.createElement(d.default,null,s.a.createElement(b.default,{name:"branch",intlLabel:"zeitSettings.branch",intlPlaceholder:"zeitSettings.branch.placeholder",intlHint:"zeitSettings.branch.hint",type:"text",className:"form__input"}),s.a.createElement(p.a,{intlLabel:"netlify.button"})))})),$e=function(e){var t=e.state,n=function(e,n){return s.a.createElement("div",{className:"NetlifySettings__creatingHooks__hook"},t[e]?s.a.createElement("div",null,s.a.createElement("i",{className:"icon--check-circle"}),s.a.createElement(m.FormattedMessage,{id:"zeitSettings.hooks.".concat(n)})," ",s.a.createElement("strong",null,s.a.createElement(m.FormattedMessage,{id:"zeitSettings.hooks.done"}))):s.a.createElement("div",null,s.a.createElement(X.default,{size:20}),s.a.createElement(m.FormattedMessage,{id:"zeitSettings.hooks.".concat(n)})))};return s.a.createElement("div",{className:"NetlifySettings__creatingHooks"},s.a.createElement("div",{className:"NetlifySettings__creatingHooks__inner"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"zeitSettings.hooks.creation"})),n("deployHookUrl","build"),n("statusHookCreated","status")))},Ke=$e;function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Qe(e){var t=e.buildTrigger,n=e.onSubmit,r=t.attributes.adapter_settings,a=t.attributes.webhook_url,i=Xe(Object(c.useState)(null),2),o=i[0],l=i[1],u=Xe(Object(c.useState)(null),2),m=u[0],d=u[1],f=Xe(Object(c.useState)(null),2),p=f[0],b=f[1],y=Xe(Object(c.useState)(null),2),h=y[0],_=y[1],v=Xe(Object(c.useState)(null),2),g=v[0],E=v[1],O=Xe(Object(c.useState)(!1),2),j=O[0],k=O[1],S=Xe(Object(c.useState)(null),2),P=S[0],N=S[1],x=Xe(Object(c.useState)(t.id?"loading":"authorize"),2),T=x[0],R=x[1],F=Object(w.useDispatch)(),M=function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(Object(Pe.e)(e||o));case 3:t=n.sent,_(t.flat()),R("selectProject"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),F(Object(Se.alert)("Error fetching projects: ".concat(n.t0.error.message),{plainMessage:!0}));case 11:case"end":return n.stop()}}),null,null,[[0,8]])},C=function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return R("loadingProjects"),e&&e.preventDefault(),r.prev=2,r.next=5,regeneratorRuntime.awrap(Object(Pe.f)());case 5:return t=r.sent,n=t.token,l(n),r.next=10,regeneratorRuntime.awrap(M(n));case 10:r.next=16;break;case 12:r.prev=12,r.t0=r.catch(2),R("authorize"),F(Object(Se.alert)("Error: ".concat(r.t0.error&&r.t0.error.message||r.t0),{plainMessage:!0}));case 16:case"end":return r.stop()}}),null,null,[[2,12]])},q=function(){var e,t,n,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(!r||!r.token){i.next=13;break}return e=r.token,t=r.project_id,n=r.account_id,i.prev=2,i.next=5,regeneratorRuntime.awrap(Object(Pe.d)(e,t,n));case 5:a=i.sent,d(a),R("editTrigger"),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(2),R("authorize");case 13:r&&r.token||C();case 14:case"end":return i.stop()}}),null,null,[[2,10]])};Object(c.useEffect)((function(){q()}),[]),Object(c.useEffect)((function(){t.id&&q()}),[t.id]);var I=function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:try{t=e.accountId.startsWith("team_")&&e.accountId,b({project:e,teamId:t}),R("selectBranch")}catch(e){F(Object(Se.alert)("Vercel has problem fetching this project: ".concat(e.error&&e.error.message||e),{plainMessage:!0}))}case 1:case"end":return n.stop()}}))},L=function(e){var t,n,r,i;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.branch,E(t),R("creatingHooks"),l.prev=3,n=p.project,r=p.teamId,i=n&&n.link&&n.link.deployHooks.find((function(e){return e.ref===t}))){l.next=14;break}return l.next=10,regeneratorRuntime.awrap(Object(Pe.a)(o,n.id,t,r));case 10:return l.next=12,regeneratorRuntime.awrap(Object(Pe.d)(o,n.id,n.accountId));case 12:n=l.sent,i=n.link&&n.link.deployHooks.find((function(e){return e.ref===t}));case 14:if(i){l.next=16;break}throw new Error("A deployment hook could not be created");case 16:return N(i.url),l.next=19,regeneratorRuntime.awrap(Object(Pe.b)(o,a,r));case 19:return k(!0),l.next=22,regeneratorRuntime.awrap(setTimeout((function(){d(n),R("editTrigger")}),2e3));case 22:l.next=28;break;case 24:l.prev=24,l.t0=l.catch(3),F(Object(Se.alert)("Error creating deploy hooks: ".concat(l.t0.error&&l.t0.error.message||l.t0),{plainMessage:!0})),R("authorize");case 28:case"end":return l.stop()}}),null,null,[[3,24]])},A=function(e){return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(n(e));case 2:l(null);case 3:case"end":return t.stop()}}))},z=function(e){e.preventDefault(),E(null),d(null),R("authorize")};return s.a.createElement("div",{className:"ZeitSettings"},function(){switch(T){case"editTrigger":return s.a.createElement(De,{zeitProject:m,buildTrigger:t,settings:r,deployHookUrl:P,branch:g,token:o,onReset:z,onSubmit:A});case"authorize":return s.a.createElement(He,{onSubmit:C});case"creatingHooks":return s.a.createElement(Ke,{state:{statusHookCreated:j,deployHookUrl:P}});case"selectProject":return s.a.createElement(Ge,{onReset:M,onClick:I,projects:h});case"selectBranch":return s.a.createElement(Je,{onSubmit:L});case"loadingProjects":return s.a.createElement(Ue,null);default:return s.a.createElement("div",{className:"NetlifySettings__linkedStep__loading"},s.a.createElement(X.default,{size:80}))}}())}$e.propTypes={state:l.a.object.isRequired},Qe.propTypes={buildTrigger:l.a.object,onSubmit:l.a.func.isRequired};var Ze,Ye,et,tt=n(66);function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return!t||"object"!==nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){return(ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lt,ct,st,ut=Object(w.connect)((function(e,t){var n=t.buildTrigger,r=n.attributes,a=r.adapter_settings||{};return{initialValues:{name:r.name,frontend_url:r.frontend_url||null,indexing_enabled:r.indexing_enabled,autotrigger_on_scheduled_publications:r.autotrigger_on_scheduled_publications,revision:a.revision,token:a.token,project:a.project,vcs:a.vcs,build_parameters:Object(O.deserialize)(a.build_parameters)},onSubmit:function(e){var r=z()(n);return r.attributes={name:e.name,indexing_enabled:e.indexing_enabled,frontend_url:e.frontend_url||null,autotrigger_on_scheduled_publications:e.autotrigger_on_scheduled_publications,adapter:"circle_ci",webhook_token:e.webhook_token,adapter_settings:{revision:e.revision,token:e.token,project:e.project,vcs:e.vcs,build_parameters:Object(O.serialize)(e.build_parameters)}},t.onSubmit(r)}}}))(Ze=Object(E.withForm)({form:"CircleCiSettings",validate:_()({name:[g.a.required()],frontend_url:[g.a.url()],revision:[g.a.required()],token:[g.a.required()],project:[g.a.required()],vcs:[g.a.required()],build_parameters:O.validator})})((et=Ye=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),at(this,it(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ot(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.buildTrigger,t=e.attributes.webhook_url,n='- run:\n      name: Notify DatoCMS about the status of the job\n      command: \'curl -X POST --data-binary "{\\"payload\\": { \\"branch\\": \\"$CIRCLE_BRANCH\\", \\"status\\": \\"failed\\" } }" '.concat(t,'\'\n      when: on_fail\n\n    - run:\n      name: Notify DatoCMS about the status of the job\n      command: \'curl -X POST --data-binary "{\\"payload\\": { \\"branch\\": \\"$CIRCLE_BRANCH\\", \\"status\\": \\"success\\" } }" ').concat(t,"'\n      when: on_success\n    ");return s.a.createElement(d.default,null,s.a.createElement(L,{buildTrigger:e}),s.a.createElement("div",{className:"trigger-config"},s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"circle_ci.apiToken"})),s.a.createElement("div",{className:"trigger-config__step__image"},s.a.createElement("img",{src:"/assets/images/circle_ci/api_token.gif",alt:"API token tutorial",className:"framed-image"})),s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"token",intlLabel:"circle_ci.apiTokenDescription",intlPlaceholder:"circle_ci.token",type:"text",className:"form__input--code"}))),s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"circle_ci.project"})),s.a.createElement("div",{className:"trigger-config__step__image"},s.a.createElement("img",{src:"/assets/images/circle_ci/project_name.png",alt:"API token tutorial",className:"framed-image"})),s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"vcs",intlLabel:"circle_ci.vcs",intlPlaceholder:"",options:[{label:"GitHub",value:"github"},{label:"Bitbucket",value:"bitbucket"}],component:tt.default}),s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"project",intlLabel:"circle_ci.projectDescription",intlPlaceholder:"circle_ci.project.placeholder",type:"text",className:"form__input--code"}),s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"revision",intlLabel:"circle_ci.projectDescription3",intlPlaceholder:"circle_ci.branch.placeholder",type:"text",className:"form__input--code"}),s.a.createElement("div",{className:"form__field--less-margin form__field--black-label"},s.a.createElement("div",{className:"form__label"},s.a.createElement(m.FormattedMessage,{id:"circle_ci.buildParameters"})),s.a.createElement(E.FieldArray,{name:"build_parameters",component:j.a,intlPrefix:"buildTriggerVariablesInput"})))),s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"circle_ci.config"})),s.a.createElement("div",{className:"trigger-config__step__image"}),s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"circle_ci.configDescription1"})),s.a.createElement("div",{className:"space--bottom-1"},s.a.createElement(y.a,{multiline:!0,value:n,rows:10,className:"form__input--code"}))))),s.a.createElement(p.a,{intlLabel:"circle_ci.button"}))}}])&&rt(n.prototype,r),a&&rt(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ye,"propTypes",{buildTrigger:l.a.object}),Ze=et))||Ze)||Ze;function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yt,ht,_t,vt=Object(w.connect)((function(e,t){var n=t.buildTrigger,r=n.attributes,a=r.adapter_settings||{};return{initialValues:{name:r.name,frontend_url:r.frontend_url||null,indexing_enabled:r.indexing_enabled,autotrigger_on_scheduled_publications:r.autotrigger_on_scheduled_publications,auth_token:a.auth_token,project_hash_id:a.project_hash_id,branch:a.branch},onSubmit:function(e){var r=z()(n);return r.attributes={name:e.name,indexing_enabled:e.indexing_enabled,frontend_url:e.frontend_url||null,autotrigger_on_scheduled_publications:e.autotrigger_on_scheduled_publications,adapter:"semaphore",webhook_token:e.webhook_token,adapter_settings:{auth_token:e.auth_token,project_hash_id:e.project_hash_id,branch:e.branch}},t.onSubmit(r)}}}))(lt=Object(E.withForm)({form:"SemaphoreSettings",validate:_()({name:[g.a.required()],frontend_url:[g.a.url()],auth_token:[g.a.required()],project_hash_id:[g.a.required()],branch:[g.a.required()]})})((st=ct=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ft(this,pt(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.buildTrigger;return s.a.createElement(d.default,null,s.a.createElement(L,{buildTrigger:e}),s.a.createElement("div",{className:"trigger-config"},s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"semaphore.authenticationToken"})),s.a.createElement("div",{className:"trigger-config__step__image"},s.a.createElement("img",{src:"/assets/images/semaphore/auth_token.gif",alt:"Authentication token",className:"framed-image"})),s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"auth_token",intlLabel:"semaphore.authenticationTokenDescription",intlPlaceholder:"semaphore.token.placeholder",type:"text",className:"form__input--code"}))),s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"semaphore.projectHashId"})),s.a.createElement("div",{className:"trigger-config__step__image"},s.a.createElement("img",{src:"/assets/images/semaphore/project_hash_id.gif",alt:"Project hash_id",className:"framed-image"})),s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"project_hash_id",intlLabel:"semaphore.projectHashIdDescription",intlPlaceholder:"semaphore.hash.placeholder",type:"text",className:"form__input--code"}),s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"branch",intlLabel:"semaphore.branch",intlPlaceholder:"semaphore.branch.placeholder",type:"text",className:"form__input--code"}))),s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"semaphore.notification"})),s.a.createElement("div",{className:"trigger-config__step__image"},s.a.createElement("img",{src:"/assets/images/semaphore/notifications.gif",alt:"Notifications tutorial",className:"framed-image"})),s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"semaphore.notificationDescription"})),s.a.createElement("div",{className:"space--bottom-1"},s.a.createElement(y.a,{value:e.attributes.webhook_url,className:"form__input--code"}))))),s.a.createElement(p.a,{intlLabel:"semaphore.button"}))}}])&&dt(n.prototype,r),a&&dt(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ct,"propTypes",{buildTrigger:l.a.object}),lt=st))||lt)||lt,gt=n(254);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var St,Pt,Nt,xt=Object(w.connect)((function(e,t){var n=t.buildTrigger,r=n.attributes,a=r.adapter_settings||{};return{initialValues:{name:r.name,frontend_url:r.frontend_url||null,indexing_enabled:r.indexing_enabled,autotrigger_on_scheduled_publications:r.autotrigger_on_scheduled_publications,api_token:a.api_token,repo:a.repo,branch:a.branch,config:a.config||null},buildTrigger:n,onSubmit:function(e){var r=z()(n);return r.attributes={name:e.name,indexing_enabled:e.indexing_enabled,frontend_url:e.frontend_url||null,autotrigger_on_scheduled_publications:e.autotrigger_on_scheduled_publications,adapter:"travis",webhook_token:e.webhook_token,adapter_settings:{api_token:e.api_token,repo:e.repo,branch:e.branch,config:e.config||null}},t.onSubmit(r)}}}))(yt=Object(E.withForm)({form:"TravisSettings",validate:_()({name:[g.a.required()],frontend_url:[g.a.url()],api_token:[g.a.required()],repo:[g.a.required()],branch:[g.a.required()],config:[g.a.json()]})})((_t=ht=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ot(this,jt(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.buildTrigger,t="notifications:\n  webhooks:\n  - ".concat(e.attributes.webhook_url);return s.a.createElement(d.default,null,s.a.createElement(L,{buildTrigger:e}),s.a.createElement("div",{className:"trigger-config"},s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"travis.selectRepo"})),s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"repo",intlLabel:"travis.repo",intlPlaceholder:"travis.repo.placeholder",type:"text",className:"form__input--code"}),s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"branch",intlLabel:"travis.branch",intlPlaceholder:"travis.branch.placeholder",type:"text",className:"form__input--code"}))),s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"travis.trigger"})),s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"api_token",intlLabel:"travis.triggerDescription1",intlPlaceholder:"travis.trigger.placeholder",type:"text",className:"form__input--code"}))),s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"travis.webhook"})),s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"travis.webhookDescription"})),s.a.createElement("div",{className:"space--bottom-1"},s.a.createElement(y.a,{value:t,multiline:!0,rows:3,className:"form__input--code"})),s.a.createElement(b.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"config",intlLabel:"travis.config",intlHint:"travis.configHint",intlPlaceholder:"travis.config.placeholder",className:"form__input--code",component:gt.default})))),s.a.createElement(p.a,{intlLabel:"travis.button"}))}}])&&wt(n.prototype,r),a&&wt(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ht,"propTypes",{buildTrigger:l.a.object}),yt=_t))||yt)||yt,Tt=n(719);function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var It=Object(w.connect)((function(e,t){var n=t.buildTrigger,r=n.attributes,a=r.adapter_settings||{};return{initialValues:{name:r.name,frontend_url:r.frontend_url||null,indexing_enabled:r.indexing_enabled,autotrigger_on_scheduled_publications:r.autotrigger_on_scheduled_publications,trigger_url:a.trigger_url,headers:Object(O.deserialize)(a.headers),payload:JSON.stringify(a.payload||{},null,2)},buildTrigger:n,onSubmit:function(e){var r=z()(n);return r.attributes={name:e.name,indexing_enabled:e.indexing_enabled,frontend_url:e.frontend_url||null,autotrigger_on_scheduled_publications:e.autotrigger_on_scheduled_publications,adapter:"custom",webhook_token:e.webhook_token,adapter_settings:{headers:e.headers?Object(O.serialize)(e.headers):{},payload:JSON.parse(e.payload),trigger_url:e.trigger_url}},t.onSubmit(r)}}}))(St=Object(E.withForm)({form:"CustomSettings",validate:_()({name:[g.a.required()],frontend_url:[g.a.url()],trigger_url:[g.a.required(),g.a.url()],payload:[g.a.required(),g.a.json()],headers:O.validator})})((Nt=Pt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mt(this,Ct(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.buildTrigger,t=e.attributes.webhook_url,n=["# Successful build notification example","curl -n -X POST ".concat(t," \\"),"  -H 'Content-Type: application/json' \\",'  -d \'{ "status": "success" }\'',"","# Failed build notification example","curl -n -X POST ".concat(t," \\"),"  -H 'Content-Type: application/json' \\",'  -d \'{ "status": "error" }\''].join("\n");return s.a.createElement(d.default,null,s.a.createElement(L,{buildTrigger:e}),s.a.createElement("div",{className:"trigger-config"},s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"custom.trigger"})),s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"custom.triggerDescription"})),s.a.createElement(b.default,{name:"trigger_url",intlLabel:"custom.triggerUrl",intlPlaceholder:"custom.triggerUrlPlaceholder",extraClassName:"form__field--less-margin form__field--black-label",type:"text",className:"form__input--code"}),s.a.createElement("div",{className:"form__field"},s.a.createElement("div",{className:"form__label"},s.a.createElement(m.FormattedMessage,{id:"custom.headers"})),s.a.createElement(E.FieldArray,{name:"headers",component:j.a})),s.a.createElement(b.default,{name:"payload",intlLabel:"custom.payload",className:"form__field--less-margin",component:Tt.a}))),s.a.createElement("div",{className:"trigger-config__step"},s.a.createElement("div",{className:"trigger-config__step__content"},s.a.createElement("h3",{className:"trigger-config__step__title"},s.a.createElement(m.FormattedMessage,{id:"custom.webhook"})),s.a.createElement("p",null,s.a.createElement(m.FormattedMessage,{id:"custom.webhookDescription"})),s.a.createElement("div",{className:"space--bottom-1"},s.a.createElement(y.a,{multiline:!0,rows:9,value:n,className:"form__input--code"}))))),s.a.createElement(p.a,{intlLabel:"custom.button"}))}}])&&Ft(n.prototype,r),a&&Ft(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pt,"propTypes",{buildTrigger:l.a.object}),St=Nt))||St)||St;t.default={gitlab:$,netlify:ke,circle_ci:ut,semaphore:vt,travis:xt,custom:It,zeit:Qe}},2513:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5L288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z"});t.default=function(e){return a.a.createElement("svg",i({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),o)}},2514:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M512 320v160c0 17.67-14.33 32-32 32H320c-17.67 0-32-14.33-32-32V320c0-17.67 14.33-32 32-32h160c17.67 0 32 14.33 32 32zm-384-64C57.31 256 0 313.31 0 384s57.31 128 128 128 128-57.31 128-128-57.31-128-128-128zm351.03-32c25.34 0 41.18-26.67 28.51-48L412.51 16c-12.67-21.33-44.35-21.33-57.02 0l-95.03 160c-12.67 21.33 3.17 48 28.51 48h190.06z"});t.default=function(e){return a.a.createElement("svg",i({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),o)}},2515:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M519.442 288.651c-41.519 0-59.5 31.593-82.058 31.593C377.409 320.244 432 144 432 144s-196.288 80-196.288-3.297c0-35.827 36.288-46.25 36.288-85.985C272 19.216 243.885 0 210.539 0c-34.654 0-66.366 18.891-66.366 56.346 0 41.364 31.711 59.277 31.711 81.75C175.885 207.719 0 166.758 0 166.758v333.237s178.635 41.047 178.635-28.662c0-22.473-40-40.107-40-81.471 0-37.456 29.25-56.346 63.577-56.346 33.673 0 61.788 19.216 61.788 54.717 0 39.735-36.288 50.158-36.288 85.985 0 60.803 129.675 25.73 181.23 25.73 0 0-34.725-120.101 25.827-120.101 35.962 0 46.423 36.152 86.308 36.152C556.712 416 576 387.99 576 354.443c0-34.199-18.962-65.792-56.558-65.792z"});t.default=function(e){return a.a.createElement("svg",i({viewBox:"0 0 576 512",width:"1em",height:"1em"},e),o)}},2516:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"});t.default=function(e){return a.a.createElement("svg",i({viewBox:"0 0 640 512",width:"1em",height:"1em"},e),o)}},2517:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 00-19.2 0L192 48 137.6 3.2a15.9 15.9 0 00-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0019.2 0L192 464l54.4 44.8a15.9 15.9 0 0019.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"});t.default=function(e){return a.a.createElement("svg",i({viewBox:"0 0 384 512",width:"1em",height:"1em"},e),o)}},2518:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"});t.default=function(e){return a.a.createElement("svg",i({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),o)}},2519:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M592 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h544c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 408c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V104c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304zm64 0c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8V104c0-4.4 3.6-8 8-8h16c4.4 0 8 3.6 8 8v304zm64 0c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8V104c0-4.4 3.6-8 8-8h16c4.4 0 8 3.6 8 8v304zm128 0c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V104c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304zm128 0c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V104c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304z"});t.default=function(e){return a.a.createElement("svg",i({viewBox:"0 0 640 512",width:"1em",height:"1em"},e),o)}},2520:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=a.a.createElement("path",{d:"M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"});t.default=function(e){return a.a.createElement("svg",i({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),o)}},2521:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function l(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=c(n(1)),u=n(2),m=i(n(0)),d=n(6),f=c(n(81)),p=n(445),b=n(444),y=c(n(720)),h=c(n(721)),_=c(n(579)),v=c(n(60)),g=c(n(55)),E=n(58),w=n(39),O=c(n(24)),j=c(n(74)),k=n(10),S=c(n(77)),P=c(n(62)),N=n(47),x=n(8),T=c(n(1057)),R=c(n(2488)),F=c(n(2356));function M(e){var t=this,n=e.environment,r=d.useDispatch(),a=d.useSelector((function(e){return x.getActiveEnvironment(e)})),i=m.useCallback((function(){return o(t,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,N.showConfirm("messages.confirm.destroyEnvironment")];case 1:return t.sent()?[4,r(p.requestDestroy(n.id))]:[2];case 2:return t.sent(),r(k.notice("environment.destroy.success")),[3,4];case 3:return e=t.sent(),r(k.alertResponseFailure(e,"environment.destroy.failure")),[3,4];case 4:return[2]}}))}))}),[n.id,a]),c=m.useCallback((function(){return o(t,void 0,void 0,(function(){var e;return l(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,N.showConfirm("messages.confirm.promoteEnvironment")];case 1:return t.sent()?[4,r(p.promote(n.id))]:[2];case 2:return t.sent(),r(k.notice("environment.promote.success")),[3,4];case 3:return e=t.sent(),r(k.alertResponseFailure(e,"environment.promote.failure")),[3,4];case 4:return[2]}}))}))}),[n.id]),s=["Environment"];n.meta.primary&&s.push("Environment--primary");var b=n.meta.primary?y.default:h.default;return m.default.createElement("div",{className:s.join(" ")},m.default.createElement(b,{width:"2em",height:"2em"}),m.default.createElement("div",{className:"Environment__left"},m.default.createElement("div",{className:"Environment__title"},n.id," ",m.default.createElement("div",{className:"Environment__badge"},n.meta.primary?m.default.createElement(u.FormattedMessage,{id:"environment.primary"}):m.default.createElement(u.FormattedMessage,{id:"environment.sandbox"}))),m.default.createElement("div",{className:"Environment__sub"},"ready"===n.meta.status?m.default.createElement(m.default.Fragment,null,m.default.createElement("div",{className:"Environment__sub__item"},"Created ",m.default.createElement(f.default,{value:n.meta.created_at})),n.meta.created_at!==n.meta.last_data_change_at&&m.default.createElement("div",{className:"Environment__sub__item"},"Last change"," ",m.default.createElement(f.default,{value:n.meta.last_data_change_at}))):m.default.createElement("div",{className:"Environment__sub__item"},m.default.createElement(u.FormattedMessage,{id:"environment.status."+n.meta.status})))),"ready"===n.meta.status&&m.default.createElement("div",{className:"Environment__actions"},!n.meta.primary&&m.default.createElement("button",{onClick:c,className:"button button--micro"},m.default.createElement(u.FormattedMessage,{id:"environment.promote"})),m.default.createElement(E.Link,{to:"/admin/environments/"+n.id+"/fork",className:"button button--micro"},m.default.createElement(u.FormattedMessage,{id:"environment.fork"})),!n.meta.primary&&m.default.createElement("button",{onClick:i,className:"button button--micro button--alert"},m.default.createElement(u.FormattedMessage,{id:"environment.delete"}))))}function C(e){var t=this,n=e.match.params,r=e.history,a=d.useSelector((function(e){return e.environments[n.environmentId]})),i=d.useDispatch(),c=m.useCallback((function(e){return o(t,void 0,void 0,(function(){var t,a;return l(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=p.fork(n.environmentId,{id:e.id,type:"environment"}),[4,i(t)];case 1:return o.sent(),i(k.notice("environment.fork.success")),r.push("/admin/environments"),[3,3];case 2:throw a=o.sent(),i(k.alertResponseFailure(a,"environment.fork.failure")),S.default(a);case 3:return[2]}}))}))}),[]),s={id:a.id+"-copy-"+R.default(new Date,"yyyy-MM-dd")};return m.default.createElement(v.default,{localeKey:"environment.forkTitle",onClose:function(){return r.push("/admin/environments")},disableModalPrompt:!0},m.default.createElement(w.Form,{initialValues:s,validate:{id:[P.default.required()]},onSubmit:c},m.default.createElement(O.default,{name:"id",intlLabel:"environment.fork.newId",intlHint:"environment.fork.newId.hint"}),m.default.createElement(j.default,{intlLabel:"environment.fork.button",forceDirty:!0})))}C.propTypes={history:s.default.object.isRequired,match:s.default.object.isRequired},t.default=function(e){var t=this,n=e.match.url,r=d.useSelector((function(e){return Object.values(e.environments).sort((function(e,t){return e.meta.primary&&!t.meta.primary?-1:t.meta.primary&&!e.meta.primary?1:e.id.localeCompare(t.id)}))})),a=d.useSelector((function(e){return e.maintenanceMode})),i=(d.useSelector(x.getCurrentUser),d.useDispatch()),c=m.useCallback((function(){return o(t,void 0,void 0,(function(){var e,t,n,r,o;return l(this,(function(l){switch(l.label){case 0:return l.trys.push([0,8,,9]),a?[3,2]:[4,N.showConfirm("messages.confirm.activateMaintenanceMode")];case 1:if(!l.sent())return[2];l.label=2;case 2:return l.trys.push([2,4,,7]),[4,i(a?b.deactivate():b.activate(!1))];case 3:return l.sent(),[3,7];case 4:if(e=l.sent(),!(t=null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.find((function(e){return"ACTIVE_EDITING_SESSIONS"===e.attributes.code}))))throw e;return n=t.attributes.details.editing_sessions.map((function(e){return e.relationships.editor})),[4,N.showConfirm("messages.confirm.activateMaintenanceMode.activeSessions",{names:m.default.createElement(F.default,{userLinks:n}),count:n.length})];case 5:return l.sent()?[4,i(b.activate(!0))]:[2];case 6:return l.sent(),[3,7];case 7:return i(k.notice("environment.maintenanceMode."+(a?"deactivate":"activate")+".success")),[3,9];case 8:return r=l.sent(),i(k.alertResponseFailure(r,"environment.maintenanceMode.failure")),[3,9];case 9:return[2]}}))}))}),[i,a]);return _.default((function(){return o(t,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,i(p.fetchAll())];case 1:return e.sent(),[2]}}))}))}),[]),m.default.createElement("div",{className:"Page Page--large"},m.default.createElement("div",{className:"Page__inner"},m.default.createElement("div",{className:"Page__header"},m.default.createElement("div",{className:"Page__title"},m.default.createElement(u.FormattedMessage,{id:"admin.environments.title"})),m.default.createElement("div",{className:"Page__space"}),m.default.createElement("button",{className:"Page__action--delete",onClick:c},m.default.createElement(T.default,null),m.default.createElement(u.FormattedMessage,{id:"admin.environments.maintenanceMode."+(a?"deactivate":"activate")}))),m.default.createElement("div",{className:"Page__content--transparent"},r.map((function(e){return m.default.createElement(M,{environment:e,key:e.id})})))),m.default.createElement(g.default,{path:n+"/:environmentId/fork",component:C}))}},2522:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function l(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TextualTrigger=void 0;var s=i(n(0)),u=c(n(579)),m=n(15),d=c(n(415)),f=c(n(2295)),p=n(2),b=n(13),y=c(n(37)),h=c(n(29)),_=n(2523),v=["today","current_month","last_month"];t.TextualTrigger=function(e){var t=e.onClick;return s.default.createElement("button",{type:"button",className:"UsageCounter__expand",onClick:t},"Change report...")};t.default=function(e){var n=e.counters,r=s.useState(n[0]),a=r[0],i=r[1],c=s.useState("today"),g=c[0],E=c[1],w=s.useState(null),O=w[0],j=w[1],k=s.useState(!0),S=k[0],P=k[1],N=s.useState(!1),x=N[0],T=N[1],R=s.useCallback((function(e){return a.endsWith("bytes")?d.default(e,0):f.default(e,0,!0)}),[a]),F=s.useCallback((function(e){if(a.includes("_referrer"))return s.default.createElement("a",{href:e,target:"_blank"},e);if(a.includes("_path"))return s.default.createElement("a",{href:"https://www.datocms-assets.com"+e,target:"_blank"},e);if(a.includes("_access_token_id"))return s.default.createElement(y.default,{to:"/admin/access_tokens/"+e+"/edit"},"API Token #",e);if(a.includes("_user")){var t=e.split(":"),n=t[0],r=t[1];return s.default.createElement(s.default.Fragment,null,n," #",r)}return e}),[a]);return u.default((function(){return o(void 0,void 0,void 0,(function(){var e,t;return l(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),j(null),P(!0),[4,m.getUsageCounter(a,{period:g})];case 1:return e=n.sent().data,j(e),P(!1),[3,3];case 2:throw t=n.sent(),P(!1),t;case 3:return[2]}}))}))}),[a,g]),s.default.createElement("div",{className:"UsageCounter"},s.default.createElement("div",{className:"UsageCounter__inner"},s.default.createElement("div",{className:"UsageCounter__header"},s.default.createElement("div",{className:"UsageCounter__header__left"},s.default.createElement("div",null,s.default.createElement("span",{className:"UsageCounter__title"},s.default.createElement(p.FormattedMessage,{id:"usageCounter."+a}),""),s.default.createElement(b.Dropdown,{triggerComponent:t.TextualTrigger},s.default.createElement(b.Menu,null,n.map((function(e){return s.default.createElement(b.Option,{active:a===e,key:e,onClick:function(){return i(e)}},s.default.createElement(p.FormattedMessage,{id:"usageCounter."+e}))}))))),s.default.createElement("div",{className:"button-group button-group--small"},s.default.createElement("div",{className:"button-group__title"},"Period"),s.default.createElement("div",{className:"button-group__buttons"},v.map((function(e){return s.default.createElement("button",{type:"button",onClick:function(){return E(e)},className:["button-group__button"].concat(e===g?["is-selected"]:[]).join(" ")},s.default.createElement(p.FormattedMessage,{id:"usageCounter.period."+e}))}))))),s.default.createElement("div",{className:"UsageCounter__aside"},O&&s.default.createElement(_.CSVLink,{data:O.attributes.result,className:"button button--micro",filename:a+".csv"},"Download as CSV"))),s.default.createElement("div",{className:"UsageCounter__content"},S&&s.default.createElement(h.default,null),O&&s.default.createElement(s.default.Fragment,null,s.default.createElement("table",{className:"UsageCounter__table"},s.default.createElement("tbody",null,(x?O.attributes.result.slice(0,20):O.attributes.result.slice(0,5)).map((function(e,t){return s.default.createElement("tr",{key:e.value},s.default.createElement("td",null,"#",t+1),s.default.createElement("td",null,F(e.value)),s.default.createElement("td",null,R(e.counter)))})),O.attributes.result.length>5&&s.default.createElement("tr",null,s.default.createElement("td",null),s.default.createElement("td",null,s.default.createElement("button",{onClick:function(){return T((function(e){return!e}))},className:"UsageCounter__expand"},x?s.default.createElement(s.default.Fragment,null,"Only show top 5 results"):s.default.createElement(s.default.Fragment,null,"View more..."))),s.default.createElement("td",null))))),!S&&(!O||0===O.attributes.result.length)&&s.default.createElement("div",null,"No data available."))),s.default.createElement("div",{className:"UsageCounter__info"},s.default.createElement(p.FormattedMessage,{id:"usageCounter.info"})))}},2536:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function l(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((r=r.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=i(n(0)),u=n(6),m=c(n(60)),d=n(348),f=c(n(77)),p=n(10),b=c(n(3082)),y=c(n(2487)),h=n(2),_=c(n(2242)),v=n(157);t.default=u.connect()((function(e){var t=this,n=e.history,r=e.dispatch,a=s.useState(null),i=a[0],c=a[1],u=s.useState({}),g=u[0],E=u[1],w=y.default[i];return s.default.createElement("div",{className:"Page"},s.default.createElement("div",{className:"Page__inner"},s.default.createElement("div",{className:"Page__header"},s.default.createElement("div",{className:"Page__title"},s.default.createElement(h.FormattedMessage,{id:"form.newBuildTriggerForm.title"})),s.default.createElement("a",{href:"#",onClick:function(){c(null)}.bind(this),className:"Page__action"},s.default.createElement("span",null,s.default.createElement(h.FormattedMessage,{id:"form.editBuildTriggerForm.changeAdapter"})))),s.default.createElement("div",{className:"Info"},s.default.createElement("div",{className:"Info__icon"},s.default.createElement(_.default,null)),s.default.createElement("div",{className:"Info__body"},s.default.createElement(h.FormattedHTMLMessage,{id:"instructions.deployment"}))),s.default.createElement("div",{className:"Page__content"},i&&s.default.createElement(s.default.Fragment,null,s.default.createElement(w,{onSubmit:function(e){return o(t,void 0,void 0,(function(){var t,a;return l(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,5]),[4,r(d.create(e))];case 1:return t=i.sent().data,[4,r(p.notice("editor.buildTrigger.create.success"))];case 2:return i.sent(),n.push("/admin/build_triggers/"+t.id+"/edit"),[3,5];case 3:return a=i.sent(),[4,r(p.alert("editor.buildTrigger.create.failure"))];case 4:throw i.sent(),f.default(a);case 5:return[2]}}))}))}.bind(this),buildTrigger:g})))),!i&&s.default.createElement(m.default,{wide:!0,localeKey:"buildTrigger.chooseAdapter",onClose:function(){c(null),n.push("/admin/build_triggers/")}.bind(this)},s.default.createElement(b.default,{onSelect:function(e){var t=e.activeAdapter;c(t),E(v.generateEmptyBuildTrigger(t))}.bind(this)})))}))},2537:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return z}));var r,a,i,o=n(1),l=n.n(o),c=n(0),s=n.n(c),u=n(5),m=n(43),d=n.n(m),f=n(6),p=n(10),b=n(77),y=n(1048),h=n(2),_=n(8),v=n(13),g=n(2266),E=n(49),w=n(2366),O=n(121),j=n(117),k=n.n(j),S=n(47),P=n(96),N=n(1044);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e,t){return e.attributes.priority-t.attributes.priority},z=Object(f.connect)((function(e){var t=Object(_.getCurrentRole)(e),n=Object.values(e.ssoGroups),r=e.ssoSettings;return{roles:e.roles,ssoSettings:r,ssoGroups:n.sort(A),hasPermission:t.attributes.can_edit_site}}))((i=a=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=this,n=!(a=(e=C(t)).call.apply(e,[this].concat(o)))||"object"!==x(a)&&"function"!=typeof a?q(r):a,L(q(n),"state",{pendingMovement:null,disableRender:!1}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(Promise.all([e(Object(N.fetch)()),e(Object(y.fetchAll)())]));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"shouldComponentUpdate",value:function(e,t){return!t.disableRender}},{key:"handleDestroy",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.props.dispatch,n.next=3,regeneratorRuntime.awrap(Object(S.showConfirm)("messages.confirm.destroySsoGroup"));case 3:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.prev=5,n.next=8,regeneratorRuntime.awrap(t(Object(y.destroy)(e.id)));case 8:t(Object(p.notice)("editor.editor.destroy.success")),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(5),t(Object(p.alertResponseFailure)(n.t0,"editor.editor.destroy.failure"));case 14:case"end":return n.stop()}}),null,this,[[5,11]])}},{key:"handleSsoCopyRoles",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.dispatch,t.prev=1,t.next=4,regeneratorRuntime.awrap(e(Object(y.copyRoles)()));case 4:e(Object(p.notice)("admin.ssoGroups.copy.success")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e(Object(p.alertResponseFailure)(t.t0,"admin.ssoGroups.copy.failure"));case 10:case"end":return t.stop()}}),null,this,[[1,7]])}},{key:"handleEdit",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=this.props.dispatch,a.prev=1,r={type:"sso_group",id:e.id,attributes:{priority:e.attributes.priority},relationships:{role:{data:{id:t.id,type:"role"}}}},a.next=5,regeneratorRuntime.awrap(n(Object(y.update)(e.id,r)));case 5:n(Object(p.notice)("editor.editor.update.success")),a.next=12;break;case 8:throw a.prev=8,a.t0=a.catch(1),n(Object(p.alertResponseFailure)(a.t0,"editor.editor.update.failure")),Object(b.default)(a.t0);case 12:case"end":return a.stop()}}),null,this,[[1,8]])}},{key:"handleDragEnd",value:function(e){var t,n,r,a,i,o,l,c,s,u,m,f,b,h=this;return regeneratorRuntime.async((function(_){for(;;)switch(_.prev=_.next){case 0:if(t=e.source,n=e.destination,r=this.props,a=r.dispatch,i=r.ssoGroups,o={source:t,destination:n},n){_.next=5;break}return _.abrupt("return");case 5:return _.next=7,regeneratorRuntime.awrap(new Promise((function(e){h.setState({pendingMovement:o},e)})));case 7:return _.next=9,regeneratorRuntime.awrap(new Promise((function(e){h.setState({disableRender:!0},e)})));case 9:return _.prev=9,l=i[o.source.index],c=k()(l),s=c.id,u=c.type,m=c.relationships,f={priority:Object(O.a)(i,o,"priority")},b=d()(m,["users"]),_.next=16,regeneratorRuntime.awrap(a(Object(y.update)(s,{id:s,type:u,attributes:f,relationships:b})));case 16:return _.next=18,regeneratorRuntime.awrap(a(Object(y.fetchAll)()));case 18:a(Object(p.notice)("admin.ssoGroups.reorderField.success")),this.setState({pendingMovement:null,disableRender:!1}),_.next=27;break;case 22:throw _.prev=22,_.t0=_.catch(9),a(Object(p.alertResponseFailure)(_.t0,"admin.ssoGroups.reorderField.failure")),this.setState({pendingMovement:null,disableRender:!1}),_.t0;case 27:case"end":return _.stop()}}),null,this,[[9,22]])}},{key:"renderGroups",value:function(){var e=this,t=this.props.ssoGroups,n=this.state.pendingMovement;return 0===t.length?this.renderBlankSlate():s.a.createElement("table",{className:"table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null),s.a.createElement("th",null,"Group"),s.a.createElement("th",null,"Role"))),s.a.createElement(E.a,{onDragEnd:this.handleDragEnd.bind(this)},s.a.createElement(E.c,{droppableId:"items"},(function(r,a){return s.a.createElement("tbody",F({className:[].concat(a.isDraggingOver?["is-dragging-over"]:[]).join(" "),ref:r.innerRef},r.droppableProps),Object(O.b)(t,n).map((function(t,n){return e.renderRow(t,n)})),r.placeholder)}))))}},{key:"renderRow",value:function(e,t){var n=this,r=this.props.roles,a=e.relationships.role.data&&r[e.relationships.role.data.id];return s.a.createElement(E.b,{draggableId:e.id,index:t},(function(t,i){return s.a.createElement("tr",F({key:e.id,ref:t.innerRef},t.draggableProps,{style:R({},t.draggableProps.style,{display:i.isDragging?"table":null})}),s.a.createElement("td",t.dragHandleProps,s.a.createElement("i",{className:"icon--hamburger"})),s.a.createElement("td",null,s.a.createElement("div",{className:"Users__profile"},s.a.createElement("div",{className:"Users__profile__info"},s.a.createElement("div",{className:"Users__profile__name"},e.attributes.name)))),s.a.createElement("td",null,s.a.createElement(v.Dropdown,{label:a?a.attributes.name:"No role",icon:g.default},s.a.createElement(v.Menu,null,s.a.createElement(v.Group,{intlName:"admin.ssoUsers.changeRole"},Object.values(r).map((function(t){return s.a.createElement(v.Option,{key:t.id,active:a&&t.id===a.id,onClick:n.handleEdit.bind(n,e,t)},t.attributes.name)})),s.a.createElement(v.Separator,null),s.a.createElement(v.Option,{red:!0,icon:P.default,onClick:n.handleDestroy.bind(n,e)},s.a.createElement(h.FormattedMessage,{id:"admin.ssoGroups.remove"})))))))}))}},{key:"renderBlankSlate",value:function(){return s.a.createElement("div",{className:"blank-slate"},s.a.createElement("p",{className:"blank-slate__title"},s.a.createElement(h.FormattedMessage,{id:"admin.ssoGroups.noGroups.title"})),s.a.createElement("p",{className:"blank-slate__description"},s.a.createElement(h.FormattedHTMLMessage,{id:"admin.ssoGroups.noGroups.description"})))}},{key:"render",value:function(){var e=this.props,t=e.ssoSettings;return e.hasPermission?s.a.createElement("div",{className:"Page"},s.a.createElement("div",{className:"Page__inner"},s.a.createElement("div",{className:"Page__header"},s.a.createElement("div",{className:"Page__title"},s.a.createElement(h.FormattedMessage,{id:"admin.ssoGroups.title"})),s.a.createElement("div",{className:"Page__space"}),t&&t.relationships.default_role.data&&s.a.createElement("button",{type:"button",className:"Page__action--primary",onClick:this.handleSsoCopyRoles.bind(this)},s.a.createElement(w.a,null),s.a.createElement(h.FormattedMessage,{id:"admin.ssoGroups.copyRoles.button.default"}))),this.renderGroups())):s.a.createElement("div",{className:"permission-denied"},s.a.createElement("div",{className:"permission-denied__inner"},s.a.createElement("div",{className:"permission-denied__icon"},s.a.createElement("i",{className:"icon--blocked"})),s.a.createElement("div",{className:"permission-denied__title"},s.a.createElement(h.FormattedMessage,{id:"permissionDenied.title"})),s.a.createElement("div",{className:"permission-denied__subtitle"},s.a.createElement(h.FormattedMessage,{id:"permissionDenied.subtitle"}))))}}])&&M(n.prototype,r),a&&M(n,a),t}(u.a),L(a,"propTypes",{dispatch:l.a.func.isRequired,ssoGroups:l.a.array,roles:l.a.object,hasPermission:l.a.bool,ssoSettings:l.a.object}),r=i))||r},3064:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(2),o=n(0),l=n.n(o),c=n(5),s=n(6),u=n(117),m=n.n(u),d=n(215),f=n(107),p=n(157),b=n(60),y=n(39),h=n(145),_=n.n(h),v=n(62),g=n.n(v);function E(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/(^_|_$)/g,"").replace(/_([0-9]+)/g,"$1")}var w=n(67),O=n(66),j=n(74),k=n.n(j),S=n(24),P=n(169);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M,C,q,I=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=T(this,R(t).call(this,e))).state={activeIndex:0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(t,e),n=t,(r=[{key:"handleClick",value:function(e,t){t.preventDefault(),this.setState({activeIndex:e})}},{key:"renderHandle",value:function(e,t){var n=this.state.activeIndex;if(e){var r=["Tabs__handle"];return t===n?r.push("is-active"):e.props.invalid&&r.push("is-invalid"),l.a.createElement("a",{key:t,href:"#",onClick:this.handleClick.bind(this,t),className:r.join(" ")},this.t(e.props.intlLabel))}}},{key:"renderContent",value:function(e,t){var n=this.state.activeIndex;if(e)return l.a.createElement("div",{key:"content",className:"Tabs__content",style:{display:t===n?"block":"none"}},e.props.children)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.extraInfo;return l.a.createElement("div",{className:"Tabs ".concat(n||"")},l.a.createElement("div",{className:"Tabs__handles"},l.a.Children.map(t,this.renderHandle.bind(this)),r&&l.a.createElement("div",{className:"Tabs__extra-info"},r)),l.a.Children.map(t,this.renderContent.bind(this)))}}])&&x(n.prototype,r),a&&x(n,a),t}(c.a);function L(){return null}M=I,C="propTypes",q={children:a.a.node,className:a.a.string,extraInfo:a.a.oneOfType([a.a.string,a.a.bool])},C in M?Object.defineProperty(M,C,{value:q,enumerable:!0,configurable:!0,writable:!0}):M[C]=q;var A,z,D,B=n(140),H=n.n(B),U=n(43),V=n.n(U),G=n(8);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Y,ee,te,ne=Object(s.connect)((function(e,t){var n=H()(t.itemType.attributes,["name","api_key","singleton","draft_mode_active","all_locales_required","collection_appearance"]);return n.ordering_direction="asc",n.title_field_id=t.itemType.relationships.title_field.data&&t.itemType.relationships.title_field.data.id,t.itemType.attributes.singleton?n.ordering_method="auto":t.itemType.attributes.sortable?n.ordering_method="manual":t.itemType.attributes.tree?n.ordering_method="tree":t.itemType.relationships.ordering_field.data?(n.ordering_method="field",n.ordering_field_id=t.itemType.relationships.ordering_field.data.id,n.ordering_direction=t.itemType.attributes.ordering_direction):n.ordering_method="auto",{fields:Object.values(e.fields).filter((function(e){return e.relationships.item_type.data.id===t.itemType.id})),initialValues:n,maintenanceMode:Object(G.isMaintenanceModeActive)(e),isNewItemType:!t.itemType.id,onSubmit:function(e){var n=m()(t.itemType);return n.attributes=H()(e,["name","api_key","singleton","draft_mode_active","all_locales_required","collection_appearance"]),n.attributes.modular_block=t.itemType.attributes.modular_block,n.attributes.sortable=!1,n.attributes.tree=!1,n.attributes.ordering_direction=null,n.relationships={ordering_field:{data:null},title_field:{data:e.title_field_id?{type:"field",id:e.title_field_id}:null}},e.singleton||("field"===e.ordering_method?(n.attributes.ordering_direction=e.ordering_direction||null,n.relationships.ordering_field.data={type:"field",id:e.ordering_field_id}):"manual"===e.ordering_method?n.attributes.sortable=!0:"tree"===e.ordering_method&&(n.attributes.tree=!0)),t.onSubmit(n)}}}))(A=Object(y.withForm)({form:"itemType",validate:_()({name:[g.a.required()],api_key:[g.a.required()],ordering_method:[g.a.required()],ordering_field_id:[g.a.requiredIf((function(e){return"field"===e.ordering_method}))],ordering_direction:[g.a.requiredIf((function(e){return"field"===e.ordering_method}))]})})((D=z=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),K(this,X(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t=this.props,n=t.isNewItemType,r=t.fields,a=t.itemType,i=t.maintenanceMode,o=t.formikBag,c=o.errors,s=o.values,u=s.singleton,m=s.ordering_method,d={basic:Object.values(H()(c,["name","api_key","singleton"])).some((function(e){return e})),extra:Object.values(V()(c,["name","api_key","singleton"])).some((function(e){return e}))},f=[{value:"auto",label:this.t("fieldType.options.orderByTime")},{value:"field",label:this.t("fieldType.options.orderByField")},{value:"manual",label:this.t("fieldType.options.orderDnd")},{value:"tree",label:this.t("fieldType.options.orderTree")}],p=[{value:"compact",label:this.t("fieldType.options.view.compact")},{value:"table",label:this.t("fieldType.options.view.tabular")}],b=[{value:"asc",label:this.t("fieldType.options.sorting.ascendant")},{value:"desc",label:this.t("fieldType.options.sorting.descendant")}],y=["string","date","date_time","boolean","integer","float"],h=function(t){return e.t("fieldType.".concat(t.attributes.field_type))},_=r.filter((function(e){return y.includes(e.attributes.field_type)})).sort((function(e,t){return e.attributes.position-t.attributes.position})).map((function(e){return{value:e.id,label:"".concat(e.attributes.label," (").concat(h(e),")")}})),v=r.filter((function(e){return"string"===e.attributes.field_type})).sort((function(e,t){return e.attributes.position-t.attributes.position})).map((function(e){return{value:e.id,label:"".concat(e.attributes.label," (").concat(h(e),")")}}));return l.a.createElement("div",{className:"FieldForm"},l.a.createElement(w.default,{disabled:i},l.a.createElement(I,{className:"Tabs--no-modal",extraInfo:a.id&&"Model ID: ".concat(a.id)},l.a.createElement(L,{intlLabel:"itemTypeForm.tab.basic",invalid:d.basic},l.a.createElement(S.default,{name:"name",intlLabel:"itemType.name",intlPlaceholder:"itemType.name.placeholder",intlHint:"itemType.name.hint",wrapInput:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{onChange:function(r){var a=e.props.formikBag.setFieldValue,i=t.onChange(r);return n&&a("api_key",E(r.target.value)),i}})},type:"text",className:"form__input--large",autoFocus:!0}),l.a.createElement(S.default,{name:"api_key",intlLabel:"itemType.api_key",intlPlaceholder:"itemType.api_key.placeholder",intlHint:"itemType.api_key.hint",type:"text",className:"form__input--code"}),!a.attributes.modular_block&&l.a.createElement(S.default,{name:"singleton",intlLabel:"itemType.singleton",intlHint:"itemType.singleton.hint",intlDocs:"itemType.singleton.guide",docsHref:"https://www.datocms.com/docs/content-modelling/single-instance",component:P.a}),l.a.createElement(k.a,{intlLabel:"itemType.button"})),!a.attributes.modular_block&&l.a.createElement(L,{intlLabel:"itemTypeForm.tab.extra",invalid:d.extra},l.a.createElement(S.default,{name:"draft_mode_active",intlLabel:"itemType.draftMode",intlHint:"itemType.draftMode.hint",intlDocs:"itemType.draftMode.guide",docsHref:"https://www.datocms.com/docs/general-concepts/draft-published",component:P.a}),l.a.createElement(S.default,{name:"all_locales_required",intlLabel:"itemType.allLocalesRequired",intlHint:"itemType.allLocalesRequired.hint",component:P.a}),!u&&l.a.createElement("div",{className:"space--bottom-2"},l.a.createElement(S.default,{name:"collection_appearance",intlLabel:"itemType.collectionAppearance",clearable:!1,options:p,style:{width:"100%"},component:O.default})),!u&&l.a.createElement("div",{className:"space--bottom-2"},l.a.createElement(S.default,{name:"ordering_method",intlLabel:"itemType.orderingMethod",clearable:!1,options:f,style:{width:"100%"},component:O.default})),"field"===m&&l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},"Ordering field"),l.a.createElement("div",{className:"grid"},l.a.createElement("div",{className:"grid__item desk-8-12"},l.a.createElement(S.default,{showLabel:!1,name:"ordering_field_id",intlLabel:"itemType.orderingField",clearable:!1,options:_,style:{width:"100%"},component:O.default})),l.a.createElement("div",{className:"grid__item desk-4-12"},l.a.createElement(S.default,{showLabel:!1,name:"ordering_direction",intlLabel:"itemType.orderingDirection",clearable:!1,options:b,style:{width:"100%"},component:O.default})))),l.a.createElement(S.default,{name:"title_field_id",intlLabel:"itemType.titleField",clearable:!0,options:v,style:{width:"100%"},component:O.default}),l.a.createElement(k.a,{intlLabel:"itemType.button"})))))}}])&&$(n.prototype,r),a&&$(n,a),t}(c.a),Z(z,"propTypes",{itemType:a.a.object.isRequired,isNewItemType:a.a.bool,fields:a.a.array.isRequired,formikBag:a.a.object.isRequired,maintenanceMode:a.a.bool}),A=D))||A)||A,re=n(10),ae=n(77),ie=n(37),oe=n(194),le=n(308),ce=n(47),se=n(282),ue=n(2355),me=n(202),de=n(69);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e,ve,ge,Ee,we=Object(s.connect)((function(e,t){return{itemTypes:e.itemTypes,otherRichTextFields:Object.values(e.fields).filter((function(e){return"rich_text"===e.attributes.field_type})).filter((function(e){return e.id!==t.field.id}))}}))((te=ee=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),be(this,ye(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,e),n=t,(r=[{key:"handleDeleteModularBlock",value:function(e,t){var n,r,a,i,o,l,c;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,n=this.props,r=n.dispatch,a=n.otherRichTextFields,i=n.field,t.preventDefault(),s.next=5,regeneratorRuntime.awrap(Object(ce.showConfirm)("messages.confirm.destroyBlock"));case 5:if(s.sent){s.next=7;break}return s.abrupt("return");case 7:return o=a.filter((function(t){return t.attributes.validators.rich_text_blocks.item_types.includes(e)})).length>0,delete(l=m()(i)).relationships,l.attributes.validators.rich_text_blocks.item_types=i.attributes.validators.rich_text_blocks.item_types.filter((function(t){return t!==e})),s.next=13,regeneratorRuntime.awrap(r(Object(me.update)(i.id,l)));case 13:if(s.t0=!o,!s.t0){s.next=18;break}return s.next=17,regeneratorRuntime.awrap(Object(ce.showConfirm)("admin.modularBlock.destroyConfirm"));case 17:s.t0=s.sent;case 18:if(!s.t0){s.next=24;break}return s.next=21,regeneratorRuntime.awrap(r(Object(d.destroy)(e)));case 21:return c=["item_types","item_types.singleton_item","item_types.fields","menu_items"].join(","),s.next=24,regeneratorRuntime.awrap(r(Object(f.fetch)({include:c})));case 24:r(Object(re.notice)("admin.modularBlock.removed.success")),s.next=30;break;case 27:s.prev=27,s.t1=s.catch(0),this.setState((function(){throw s.t1}));case 30:case"end":return s.stop()}}),null,this,[[0,27]])}},{key:"renderModularBlock",value:function(e){var t=this.props,n=t.itemTypes,r=t.itemTypeId;return l.a.createElement("div",{className:"FieldRow__modular-blocks__item",href:"#",key:e},l.a.createElement("span",{className:"FieldRow__modular-blocks__item__name"},n[e].attributes.name),l.a.createElement("span",{className:"FieldRow__modular-blocks__item__api-key"},n[e].attributes.api_key),l.a.createElement("div",{className:"FieldRow__modular-blocks__item__actions"},l.a.createElement(ie.default,{to:"/admin/item_types/".concat(r,"/modular_blocks/").concat(e),className:"button button--micro"},l.a.createElement(i.FormattedMessage,{id:"fieldRow.edit"})),l.a.createElement("a",{href:"#",onClick:this.handleDeleteModularBlock.bind(this,e),className:"button button--micro button--alert"},l.a.createElement(i.FormattedMessage,{id:"fieldRow.remove"}))))}},{key:"render",value:function(){var e=this.props,t=e.field,n=e.itemTypeId,r=e.itemTypes;return l.a.createElement("div",{className:"FieldRow__modular-blocks"},l.a.createElement("div",{className:"FieldRow__modular-blocks__title"},l.a.createElement(i.FormattedMessage,{id:"itemType.modularBlocks"})),t.attributes.validators.rich_text_blocks.item_types.concat().filter((function(e){return r[e]})).sort((function(e,t){return r[e].attributes.name.localeCompare(r[t].attributes.name)})).map(this.renderModularBlock.bind(this)),l.a.createElement("div",{className:"FieldRow__modular-blocks__actions"},l.a.createElement(ie.default,{to:"/admin/item_types/".concat(n,"/fields/").concat(t.id,"/modular_blocks/new"),className:"button button--tiny"},l.a.createElement(de.default,null),l.a.createElement(i.FormattedMessage,{id:"itemType.modularBlock.add"}))))}}])&&pe(n.prototype,r),a&&pe(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ee,"propTypes",{field:a.a.object.isRequired,itemTypes:a.a.object.isRequired,otherRichTextFields:a.a.array.isRequired,dispatch:a.a.func.isRequired,itemTypeId:a.a.string.isRequired}),Y=te))||Y,Oe=n(124),je=n(49);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re=(_e=Object(s.connect)((function(e){return{itemTypes:e.itemTypes}})),Object(Oe.o)(ve=_e((Ee=ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ne(this,xe(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,e),n=t,(r=[{key:"handleDestroy",value:function(e){var t=this.props.onDestroy;return e.preventDefault(),e.stopPropagation(),t()}},{key:"render",value:function(){var e=this,t=this.props,n=t.field,r=t.index,a=t.itemTypes,o=t.itemTypeId,c=t.match.url,s=[l.a.createElement("span",{key:"desc"},l.a.createElement(i.FormattedMessage,{id:"fieldType.".concat(n.attributes.field_type)}))];if(["link","links"].includes(n.attributes.field_type)){var u=(n.attributes.validators.items_item_type||n.attributes.validators.item_item_type).item_types.map((function(e){return l.a.createElement(ie.default,{key:e,to:"/admin/item_types/".concat(e)},a[e]?a[e].attributes.name:"Model #".concat(e))}));s.push(l.a.createElement("span",{key:"links"},"",Object(se.a)(u,", ")))}var m=ue.a.find((function(e){return e.types.includes(n.attributes.field_type)})),d=ue.b[m.name];return l.a.createElement(je.b,{draggableId:n.id,index:r},(function(t,r){return l.a.createElement("div",Se({className:["FieldRow"].concat(r.isDragging?["is-dragging"]:[""]).join(" "),ref:t.innerRef},t.draggableProps),l.a.createElement("div",{className:"FieldRow__row"},l.a.createElement("div",Se({className:"FieldRow__handle"},t.dragHandleProps),l.a.createElement("i",{className:"icon--hamburger"})),l.a.createElement("div",{className:"FieldRow__body"},l.a.createElement("div",{className:"FieldRow__icon"},l.a.createElement(d,null)),l.a.createElement("div",{className:"FieldRow__info"},l.a.createElement("div",null,l.a.createElement("span",{className:"FieldRow__label"},n.attributes.label,n.attributes.validators.required&&"*"),l.a.createElement("span",{className:"FieldRow__api"},n.attributes.api_key),l.a.createElement("span",{className:"FieldRow__item-type"},s))),l.a.createElement("div",{className:"FieldRow__actions"},l.a.createElement(ie.default,{to:"".concat(c,"/fields/").concat(n.id,"/edit"),className:"button button--micro"},l.a.createElement(i.FormattedMessage,{id:"fieldRow.edit"})),l.a.createElement("a",{href:"#",onClick:e.handleDestroy.bind(e),className:"button button--micro button--alert"},l.a.createElement(i.FormattedMessage,{id:"fieldRow.remove"}))))),"rich_text"===n.attributes.field_type&&l.a.createElement(we,{itemTypeId:o,field:n}))}))}}])&&Pe(n.prototype,r),a&&Pe(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ge,"propTypes",{field:a.a.object.isRequired,itemTypes:a.a.object.isRequired,match:a.a.object.isRequired,index:a.a.number.isRequired,itemTypeId:a.a.string.isRequired,onDestroy:a.a.func.isRequired}),ve=Ee))||ve)||ve),Fe=n(57),Me=n(121),Ce=n(149),qe=n(29);function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Le,Ae,ze,De,Be,He=Object(o.createContext)((function(){}));function Ue(e){var t=e.children,n=Ie(Object(o.useState)(!1),2),r=n[0],a=n[1];return l.a.createElement(He.Provider,{value:a},r&&l.a.createElement("div",{className:"overlay"},l.a.createElement(qe.default,{size:80,reverse:!0})),t)}function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(n,!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ue.propTypes={children:a.a.node};var Ye,et,tt,nt,rt,at,it=(Le=Object(Ce.a)(He,"setPendingOperation"),Object(Oe.o)(Ae=Le((Be=De=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=this,n=!(a=(e=Ke(t)).call.apply(e,[this].concat(o)))||"object"!==Ve(a)&&"function"!=typeof a?Xe(r):a,Ze(Xe(n),"state",{pendingMovement:null,disableRender:!1}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,e),n=t,(r=[{key:"shouldComponentUpdate",value:function(e,t){return!t.disableRender}},{key:"handleDestroyField",value:function(e){var t,n,r,a,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,r=t.itemType,a=t.setPendingOperation,o.next=3,regeneratorRuntime.awrap(Object(ce.showConfirm)("messages.confirm.destroyField"));case 3:if(o.sent){o.next=5;break}return o.abrupt("return");case 5:return a(!0),o.prev=6,o.next=9,regeneratorRuntime.awrap(n(Object(me.destroy)(e.id)));case 9:n(Object(re.notice)("admin.itemType.destroyField.success")),n(Object(d.fetch)(r.id)),this.setState({pendingMovement:null}),o.next=19;break;case 14:o.prev=14,o.t0=o.catch(6),this.setState({pendingMovement:null}),i=o.t0.data&&o.t0.data.find((function(e){return"USED_AS_SLUG_SOURCE"===e.attributes.code})),n(i?Object(re.alert)("admin.itemType.destroyField.neededBySlugField",{intlValues:{slugField:i.attributes.details.field_label}}):Object(re.alert)("admin.itemType.destroyField.failure"));case 19:a(!1);case 20:case"end":return o.stop()}}),null,this,[[6,14]])}},{key:"handleDragEnd",value:function(e){var t,n,r,a,i,o,l,c,s,u,f=this;return regeneratorRuntime.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=this.props,n=t.dispatch,r=t.itemType,a=t.fields,e.destination){p.next=3;break}return p.abrupt("return");case 3:return p.next=5,regeneratorRuntime.awrap(new Promise((function(t){f.setState({pendingMovement:e},t)})));case 5:return p.next=7,regeneratorRuntime.awrap(new Promise((function(e){f.setState({disableRender:!0},e)})));case 7:return p.prev=7,i=a[e.source.index],o=m()(i),l=o.id,c=o.type,s=o.attributes,delete(u=Je({},s,{position:Object(Me.a)(a,e)})).appearance.type,delete u.updated_at,p.next=15,regeneratorRuntime.awrap(n(Object(me.update)(l,{id:l,type:c,attributes:u})));case 15:return p.next=17,regeneratorRuntime.awrap(n(Object(d.fetch)(r.id)));case 17:n(Object(re.notice)("admin.itemType.reorderField.success")),this.setState({pendingMovement:null,disableRender:!1}),p.next=25;break;case 21:p.prev=21,p.t0=p.catch(7),n(Object(re.alertResponseFailure)(p.t0,"admin.itemType.reorderField.failure")),this.setState({pendingMovement:null,disableRender:!1});case 25:case"end":return p.stop()}}),null,this,[[7,21]])}},{key:"renderFields",value:function(){var e=this,t=this.props,n=t.fields,r=t.match.url,a=t.locales,o=t.itemType,c=t.maintenanceMode,s=this.state.pendingMovement;return l.a.createElement("div",{className:"Page__content Page__content--transparent"},l.a.createElement(je.a,{onDragEnd:this.handleDragEnd},l.a.createElement(je.c,{droppableId:"droppable"},(function(t,r){return l.a.createElement("div",Ge({},t.droppableProps,{ref:t.innerRef,className:r.isDraggingOver?"is-dragging-over":""}),Object(Me.b)(n,s).map((function(t,n){return l.a.createElement(Re,{key:t.id,index:n,itemTypeId:o.id,field:t,locales:a,onDestroy:e.handleDestroyField.bind(e,t)})})),t.placeholder)}))),!c&&l.a.createElement("div",{className:"space--top-2"},l.a.createElement(ie.default,{to:"".concat(r,"/fields/new"),className:"button"},l.a.createElement(de.default,null),l.a.createElement(i.FormattedMessage,{id:"itemType.row.add"}))))}},{key:"renderBlankSlate",value:function(){var e=this.props,t=e.itemType,n=e.modularBlock,r=e.match.url,a=n?"modularBlock":"itemType",o=["blank-slate"],c=["button","button--primary"];return n?o.push("blank-slate--tiny"):c.push("button--large"),l.a.createElement("div",{className:o.join(" ")},l.a.createElement("p",{className:"blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.".concat(a,".noFields.title")})),l.a.createElement("p",{className:"blank-slate__description"},this.t("admin.".concat(a,".noFields.description"),{name:t.attributes.name})),l.a.createElement(ie.default,{to:"".concat(r,"/fields/new"),className:c.join(" ")},l.a.createElement(de.default,null),l.a.createElement(i.FormattedMessage,{id:"itemType.row.add"})))}},{key:"render",value:function(){return 0===this.props.fields.length?this.renderBlankSlate():this.renderFields()}}])&&$e(n.prototype,r),a&&$e(n,a),t}(c.a),Ze(De,"propTypes",{dispatch:a.a.func.isRequired,modularBlock:a.a.bool,fields:a.a.array,locales:a.a.array,itemType:a.a.object,match:a.a.object.isRequired,maintenanceMode:a.a.bool,setPendingOperation:a.a.func.isRequired}),Ye=(ze=Be).prototype,et="handleDragEnd",tt=[Fe.a],nt=Object.getOwnPropertyDescriptor(ze.prototype,"handleDragEnd"),rt=ze.prototype,at={},Object.keys(nt).forEach((function(e){at[e]=nt[e]})),at.enumerable=!!at.enumerable,at.configurable=!!at.configurable,("value"in at||at.initializer)&&(at.writable=!0),at=tt.slice().reverse().reduce((function(e,t){return t(Ye,et,e)||e}),at),rt&&void 0!==at.initializer&&(at.value=at.initializer?at.initializer.call(rt):void 0,at.initializer=void 0),void 0===at.initializer&&(Object.defineProperty(Ye,et,at),at=null),Ae=ze))||Ae)||Ae);var ot,lt,ct,st=Object(i.injectIntl)(Object(s.connect)((function(e,t){var n=t.itemType,r=e.site?e.site.attributes.locales:[];return{itemType:n,fields:Object(G.getFieldsForItemType)(e,n).sort((function(e,t){return e.attributes.position-t.attributes.position})).filter((function(e){return!!e})),locales:r,maintenanceMode:Object(G.isMaintenanceModeActive)(e)}}))(it)),ut=n(2356),mt=n(55);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ht=Object(s.connect)()((ct=lt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pt(this,bt(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(t,e),n=t,(r=[{key:"handleClose",value:function(){var e=this.props,t=e.itemType;e.history.replace("/admin/item_types/".concat(t.id))}},{key:"handleSubmitItemType",value:function(e){var t,n,r,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,r=t.history,i.prev=1,a=m()(e),i.next=5,regeneratorRuntime.awrap(n(Object(d.update)(e.id,a)));case 5:n(Object(re.notice)("admin.itemType.update.success")),r.replace("/admin/item_types/".concat(e.id)),i.next=13;break;case 9:throw i.prev=9,i.t0=i.catch(1),n(Object(re.alertResponseFailure)(i.t0,"admin.itemType.update.failure")),Object(ae.default)(i.t0);case 13:case"end":return i.stop()}}),null,this,[[1,9]])}},{key:"render",value:function(){var e=this.props.itemType;return l.a.createElement(b.default,{freeContent:!0,localeKey:e.attributes.modular_block?"itemType.editModularBlock":"itemType.editItemType",disableModalPrompt:!0,onClose:this.handleClose.bind(this)},l.a.createElement(ne,{itemType:e,onSubmit:this.handleSubmitItemType.bind(this)}))}}])&&ft(n.prototype,r),a&&ft(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(lt,"propTypes",{dispatch:a.a.func.isRequired,itemType:a.a.object,history:a.a.object.isRequired}),ot=ct))||ot;function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ot=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=gt(this,Et(t).call(this,e))).state={selectedGroup:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(t,e),n=t,(r=[{key:"handleSelectFieldType",value:function(e,t){var n=this.props.onSelect;t.preventDefault(),n(e)}},{key:"handleSelectGroup",value:function(e,t){var n=this.props.onSelect;t.preventDefault(),null===e||e.types.length>1?this.setState({selectedGroup:e}):n(e.types[0])}},{key:"renderFieldType",value:function(e){return l.a.createElement("a",{key:e,href:"#",onClick:this.handleSelectFieldType.bind(this,e),className:"FieldTypeSelector__field"},l.a.createElement("div",{className:"FieldTypeSelector__field__label"},l.a.createElement(i.FormattedMessage,{id:"fieldType.".concat(e)})),l.a.createElement("div",{className:"FieldTypeSelector__field__description"},l.a.createElement(i.FormattedMessage,{id:"fieldTypeHint.".concat(e)})))}},{key:"renderGroupFieldTypes",value:function(){var e=this.state.selectedGroup,t=ue.b[e.name];return l.a.createElement("div",{className:"FieldTypeSelector"},l.a.createElement("div",{className:"FieldTypeSelector__fields"},l.a.createElement("div",{className:"FieldTypeSelector__fields__group"},l.a.createElement("div",null,l.a.createElement("div",{className:"FieldTypeSelector__group__icon"},l.a.createElement(t,null)),l.a.createElement("div",{className:"FieldTypeSelector__group__label"},l.a.createElement(i.FormattedMessage,{id:"fieldGroup.".concat(e.name,".title")}))),l.a.createElement("a",{href:"#",onClick:this.handleSelectGroup.bind(this,null),className:"FieldTypeSelector__fields__group__back"}," Change field type")),l.a.createElement("div",{className:"FieldTypeSelector__fields__items"},e.types.map(this.renderFieldType.bind(this)))))}},{key:"renderGroup",value:function(e){var t=ue.b[e.name];return l.a.createElement("div",{className:"FieldTypeSelector__group",key:e.name},l.a.createElement("a",{key:e.name,href:"#",onClick:this.handleSelectGroup.bind(this,e),className:"FieldTypeSelector__group__icon"},l.a.createElement(t,null)),l.a.createElement("div",{className:"FieldTypeSelector__group__label"},l.a.createElement(i.FormattedMessage,{id:"fieldGroup.".concat(e.name,".title")})),l.a.createElement("div",{className:"FieldTypeSelector__group__description"},l.a.createElement(i.FormattedMessage,{id:"fieldGroup.".concat(e.name,".description")})))}},{key:"renderGroups",value:function(){var e=this.props.modularBlock;return l.a.createElement("div",{className:"FieldTypeSelector__groups"},ue.a.filter((function(t){return!e||"rich_text"!==t.name})).map(this.renderGroup.bind(this)))}},{key:"render",value:function(){return null===this.state.selectedGroup?this.renderGroups():this.renderGroupFieldTypes()}}])&&vt(n.prototype,r),a&&vt(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ot,"propTypes",{onSelect:a.a.func.isRequired,modularBlock:a.a.bool.isRequired});var jt=Ot;function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pt(this,Nt(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(t,e),n=t,(r=[{key:"handleClose",value:function(){var e=this.props,t=e.parentUrl;e.history.push(t)}},{key:"handleEditNewField",value:function(e){var t=this.props,n=t.history,r=t.match.url;n.push("".concat(r,"/").concat(e))}},{key:"render",value:function(){var e=this.props.modularBlock;return l.a.createElement(b.default,{wide:!0,localeKey:"itemType.chooseFieldType",onClose:this.handleClose.bind(this)},l.a.createElement(jt,{modularBlock:!!e,onSelect:this.handleEditNewField.bind(this)}))}}])&&St(n.prototype,r),a&&St(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Tt,"propTypes",{match:a.a.object.isRequired,modularBlock:a.a.object,parentUrl:a.a.string.isRequired,history:a.a.object.isRequired});var Rt=n(2527),Ft=n.n(Rt),Mt=n(34),Ct=n(347),qt=n(163),It=n(16),Lt=n.n(It),At=n(254),zt=n(2293),Dt=n(507);function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ut(e,t){return!t||"object"!==Bt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vt(e){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ut(this,Vt(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,r=t,a=[{value:"between",label:this.t("validators.date_range.between")},{value:"min",label:this.t("validators.date_range.min")},{value:"max",label:this.t("validators.date_range.max")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(S.default,{name:"".concat(r,".type"),showLabel:!1,inline:!0,clearable:!1,options:a,autosize:!0,component:O.default}),("min"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".min"),showLabel:!1,intlPlaceholder:"validators.date_range.minValue",inline:!0,component:Dt.a}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.date_range.and"})),("max"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".max"),showLabel:!1,intlPlaceholder:"validators.date_range.maxValue",inline:!0,component:Dt.a}))}}])&&Ht(n.prototype,r),a&&Ht(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Wt,"propTypes",{value:a.a.object.isRequired,namePrefix:a.a.string.isRequired});var Jt,$t,Kt,Xt={between:_()({min:[g.a.required()],max:[g.a.required(),g.a.greaterDateThan("min")]}),min:_()({min:[g.a.required()]}),max:_()({max:[g.a.required()]})},Qt={Component:Wt,validate:function(e){return Xt[e.type](e)},fromJSON:function(e){var t=e.min,n=e.max,r=function(e){return null!=e};return r(t)&&!r(n)?{type:"min",min:t}:r(n)&&!r(t)?{type:"max",max:n}:{type:"between",min:t,max:n}},toJSON:function(e){var t=e.type,n=e.min,r=e.max;switch(t){case"between":return{min:n,max:r};case"min":return{min:n};default:return{max:r}}},fields:["type","min","max"]},Zt=n(224),Yt=n(503),en=n(387),tn=n.n(en),nn=n(722);function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t){return!t||"object"!==rn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sn=Object(s.connect)((function(e){return{timezone:e.site&&e.site.attributes.timezone}}))((Kt=$t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),on(this,ln(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value,r=e.timezone,a=n.type,o=t,c=[{value:"between",label:this.t("validators.date_range.between")},{value:"min",label:this.t("validators.date_range.min")},{value:"max",label:this.t("validators.date_range.max")}],s=null;return r&&tn()(r)!==(new Date).getTimezoneOffset()&&(s="Expressed in ".concat(Object(nn.b)(r)," timezone")),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"form__field-group"},l.a.createElement(S.default,{name:"".concat(o,".type"),showLabel:!1,inline:!0,clearable:!1,options:c,autosize:!0,component:O.default}),("min"===a||"between"===a)&&l.a.createElement(S.default,{name:"".concat(o,".min"),showLabel:!1,intlPlaceholder:"validators.date_range.minValue",inline:!0,component:Zt.a}),"between"===a&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.date_range.and"})),("max"===a||"between"===a)&&l.a.createElement(S.default,{name:"".concat(o,".max"),showLabel:!1,intlPlaceholder:"validators.date_range.maxValue",inline:!0,component:Zt.a})),s&&l.a.createElement(Yt.a,{extraHint:s}))}}])&&an(n.prototype,r),a&&an(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}($t,"propTypes",{value:a.a.object.isRequired,namePrefix:a.a.string.isRequired,timezone:a.a.string}),Jt=Kt))||Jt,un={between:_()({min:[g.a.required()],max:[g.a.required(),g.a.greaterDateThan("min")]}),min:_()({min:[g.a.required()]}),max:_()({max:[g.a.required()]})},mn={Component:sn,validate:function(e){return un[e.type](e)},fromJSON:function(e){var t=e.min,n=e.max,r=function(e){return null!=e};return r(t)&&!r(n)?{type:"min",min:t}:r(n)&&!r(t)?{type:"max",max:n}:{type:"between",min:t,max:n}},toJSON:function(e){var t=e.type,n=e.min,r=e.max;switch(t){case"between":return{min:n,max:r};case"min":return{min:n};default:return{max:r}}},fields:["type","min","max"]};function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pn(e,t){return!t||"object"!==dn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pn(this,bn(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.namePrefix;return l.a.createElement("div",null,l.a.createElement(S.default,{name:"".concat(e,".csv"),intlPlaceholder:"validators.enum.valuePlaceholder",intlHint:"validators.enum.hint",type:"text"}))}}])&&fn(n.prototype,r),a&&fn(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(hn,"propTypes",{namePrefix:a.a.string.isRequired});var _n={Component:hn,validate:_()({csv:[g.a.required()]}),fromJSON:function(e){var t=e.values;return{csv:(void 0===t?[]:t).join(", ")}},toJSON:function(e){return{values:e.csv.split(/\s*,\s*/)}},fields:["csv"]};function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function En(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var jn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),En(this,wn(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,r=[{value:"image",label:this.t("validators.extension.image")},{value:"video",label:this.t("validators.extension.video")},{value:"document",label:this.t("validators.extension.document")},{value:"csv",label:this.t("validators.extension.csv")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(S.default,{name:"".concat(t,".type"),showLabel:!1,inline:!0,clearable:!1,options:r,autosize:!0,component:O.default}),"csv"===n&&l.a.createElement(S.default,{showLabel:!1,name:"".concat(t,".csv"),intlPlaceholder:"validators.extension.valuePlaceholder",intlHint:"validators.extension.hint",type:"text"}))}}])&&gn(n.prototype,r),a&&gn(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(jn,"propTypes",{value:a.a.object.isRequired,namePrefix:a.a.string.isRequired});var kn={Component:jn,validate:_()({type:[g.a.oneOf(["csv","document","video","image"])],csv:[g.a.requiredIf((function(e){return"csv"===e.type}))]}),fromJSON:function(e){var t=e.predefined_list,n=e.extensions;return t?{type:t}:{type:"csv",csv:(void 0===n?[]:n).join(", ")}},toJSON:function(e){var t=e.type,n=e.csv;return"csv"!==t?{predefined_list:t}:{extensions:n.split(/\s*,\s*/)}},fields:["type","csv"]},Sn=n(860);function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e,t){return!t||"object"!==Pn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e,t){return(Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xn(this,Tn(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,r=t,a=[{value:"url",label:this.t("validators.format.url")},{value:"email",label:this.t("validators.format.email")},{value:"custom",label:this.t("validators.format.custom")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(S.default,{name:"".concat(r,".type"),showLabel:!1,inline:!0,clearable:!1,options:a,autosize:!0,component:O.default}),"custom"===n&&l.a.createElement(S.default,{name:"".concat(r,".custom"),showLabel:!1,intlHint:"validators.format.hint",intlPlaceholder:"validators.format.placeholder",className:"input-group--code",pre:"/",post:"/",type:"text",component:Sn.a}))}}])&&Nn(n.prototype,r),a&&Nn(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fn,"propTypes",{value:a.a.object.isRequired,namePrefix:a.a.string.isRequired});var Mn={Component:Fn,validate:_()({type:[g.a.oneOf(["custom","email","url"])],custom:[g.a.requiredIf((function(e){return"custom"===e.type}))]}),fromJSON:function(e){var t=e.custom_pattern,n=e.predefined_pattern;return t?{type:"custom",custom:t}:n?{type:n}:{type:"url"}},toJSON:function(e){var t=e.type,n=e.custom;return"url"===t?{predefined_pattern:"url"}:"email"===t?{predefined_pattern:"email"}:{custom_pattern:n}},fields:["type","custom"]};function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e,t){return!t||"object"!==Cn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),In(this,Ln(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,r=t,a=[{value:"between",label:this.t("validators.number_range.between")},{value:"min",label:this.t("validators.number_range.min")},{value:"max",label:this.t("validators.number_range.max")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(S.default,{name:"".concat(r,".type"),showLabel:!1,inline:!0,clearable:!1,options:a,autosize:!0,component:O.default}),("min"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".min"),showLabel:!1,intlPlaceholder:"validators.number_range.minValue",inline:!0,type:"text",size:"6"}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.number_range.and"})),("max"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".max"),showLabel:!1,intlPlaceholder:"validators.number_range.maxValue",inline:!0,type:"text",size:"6"}))}}])&&qn(n.prototype,r),a&&qn(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(zn,"propTypes",{value:a.a.object.isRequired,namePrefix:a.a.string.isRequired});var Dn={between:_()({min:[g.a.floatingPoint()],max:[g.a.floatingPoint(),g.a.greaterThan("min")]}),min:_()({min:[g.a.floatingPoint()]}),max:_()({max:[g.a.floatingPoint()]})},Bn={Component:zn,validate:function(e){return Dn[e.type](e)},fromJSON:function(e){var t=e.min,n=e.max,r=function(e){return null!=e};return r(t)&&!r(n)?{type:"min",min:t}:r(n)&&!r(t)?{type:"max",max:n}:{type:"between",min:t,max:n}},toJSON:function(e){var t=e.type,n=e.min,r=e.max;switch(t){case"between":return{min:n,max:r};case"min":return{min:n};default:return{max:r}}},fields:["type","min","max"]};function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t){return!t||"object"!==Hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e,t){return(Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vn(this,Gn(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wn(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,r=t,a=[{value:"between",label:this.t("validators.size.between")},{value:"min",label:this.t("validators.size.min")},{value:"max",label:this.t("validators.size.max")},{value:"eq",label:this.t("validators.size.eq")}];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"form__field-group"},l.a.createElement(S.default,{name:"".concat(r,".type"),showLabel:!1,inline:!0,clearable:!1,options:a,autosize:!0,component:O.default}),("min"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".min"),showLabel:!1,intlPlaceholder:"validators.length.minValue",inline:!0,type:"text",size:"6"}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.length.and"})),("max"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".max"),showLabel:!1,intlPlaceholder:"validators.length.maxValue",inline:!0,type:"text",size:"6"}),"eq"===n&&l.a.createElement(S.default,{name:"".concat(r,".eq"),showLabel:!1,intlPlaceholder:"validators.length.eqValue",inline:!0,type:"text",size:"6"})),"eq"!==n&&l.a.createElement("div",{className:"form__field-group space--top-1"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.size.multipleOf"})),l.a.createElement(S.default,{name:"".concat(r,".multipleOf"),showLabel:!1,intlPlaceholder:"validators.size.multipleOfValue",inline:!0,type:"text",size:"6"})))}}])&&Un(n.prototype,r),a&&Un(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Jn,"propTypes",{value:a.a.object.isRequired,namePrefix:a.a.string.isRequired});var $n={between:_()({min:[g.a.positiveInteger()],max:[g.a.positiveInteger(),g.a.greaterThan("min")]}),min:_()({min:[g.a.positiveInteger()]}),max:_()({max:[g.a.positiveInteger()]}),eq:_()({eq:[g.a.positiveInteger()]}),multipleOf:_()({multipleOf:[g.a.positiveInteger()]})},Kn={Component:Jn,validate:function(e){return $n[e.type](e)},fromJSON:function(e){var t=e.min,n=e.max,r=e.eq,a=e.multiple_of,i=function(e){return null!=e},o={};return o=i(r)?{type:"eq",eq:r}:i(t)&&!i(n)?{type:"min",min:t}:i(n)&&!i(t)?{type:"max",max:n}:{type:"between",min:t,max:n},i(a)&&(o.multipleOf=a),o},toJSON:function(e){var t=e.type,n=e.min,r=e.max,a=e.eq,i=e.multipleOf,o={};switch(t){case"between":o={min:n,max:r};break;case"eq":o={eq:a};break;case"min":o={min:n};break;default:o={max:r}}return i&&(o.multiple_of=i),o},fields:["type","min","max","eq","multipleOf"]};function Xn(e){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zn(e,t){return!t||"object"!==Xn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function er(e,t){return(er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zn(this,Yn(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&er(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,r=t,a=[{value:"between",label:this.t("validators.file_size.between")},{value:"max",label:this.t("validators.file_size.max")},{value:"min",label:this.t("validators.file_size.min")}],o=[{value:"MB",label:this.t("validators.file_size.unit.mib")},{value:"KB",label:this.t("validators.file_size.unit.kib")},{value:"B",label:this.t("validators.file_size.unit.b")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(S.default,{name:"".concat(r,".type"),showLabel:!1,inline:!0,clearable:!1,options:a,autosize:!0,component:O.default}),("min"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".min_value"),showLabel:!1,intlPlaceholder:"validators.file_size.minValue",inline:!0,type:"text",size:"6"}),("min"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".min_unit"),showLabel:!1,clearable:!1,inline:!0,autosize:!0,options:o,component:O.default}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.file_size.and"})),("max"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".max_value"),showLabel:!1,intlPlaceholder:"validators.file_size.maxValue",inline:!0,type:"text",size:"6"}),("max"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".max_unit"),showLabel:!1,inline:!0,clearable:!1,autosize:!0,options:o,component:O.default}))}}])&&Qn(n.prototype,r),a&&Qn(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(tr,"propTypes",{value:a.a.object.isRequired,namePrefix:a.a.string.isRequired});var nr={between:_()({min_value:[g.a.positiveInteger()],min_unit:[g.a.required(),g.a.fileSizeUnit()],max_value:[g.a.positiveInteger()],max_unit:[g.a.required(),g.a.fileSizeUnit()]}),min:_()({min_value:[g.a.positiveInteger()],min_unit:[g.a.required(),g.a.fileSizeUnit()]}),max:_()({max_value:[g.a.positiveInteger()],max_unit:[g.a.required(),g.a.fileSizeUnit()]})},rr={Component:tr,validate:function(e){return nr[e.type](e)},fromJSON:function(e){var t=e.min_value,n=e.min_unit,r=e.max_value,a=e.max_unit,i=function(e){return null!=e};return i(t)&&!i(r)?{type:"min",min_value:t,min_unit:n}:i(r)&&!i(t)?{type:"max",max_value:r,max_unit:a}:{type:"between",min_value:t,min_unit:n,max_value:r,max_unit:a}},toJSON:function(e){var t=e.type,n=e.min_value,r=e.min_unit,a=e.max_value,i=e.max_unit;switch(t){case"between":return{min_value:n,min_unit:r,max_value:a,max_unit:i};case"min":return{min_value:n,min_unit:r};default:return{max_value:a,max_unit:i}}},fields:["type","min_value","min_unit","max_value","max_unit"]};function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function or(e,t){return!t||"object"!==ar(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cr(e,t){return(cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),or(this,lr(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,r=t,a=[{value:"between",label:this.t("validators.file_size.between")},{value:"max",label:this.t("validators.file_size.max")},{value:"min",label:this.t("validators.file_size.min")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(S.default,{name:"".concat(r,".type"),showLabel:!1,inline:!0,clearable:!1,options:a,autosize:!0,component:O.default}),("min"===n||"between"===n)&&l.a.createElement("div",{className:"input-group input-group--inline"},l.a.createElement(S.default,{name:"".concat(r,".width_min_value"),showLabel:!1,intlPlaceholder:"validators.dimensions.width",inline:!0,type:"text",size:"5"}),l.a.createElement("span",{className:"input-group__addon"},"x"),l.a.createElement(S.default,{name:"".concat(r,".height_min_value"),showLabel:!1,intlPlaceholder:"validators.dimensions.height",inline:!0,type:"text",size:"5"}),l.a.createElement("span",{className:"input-group__addon"},"px")),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.file_size.and"})),("max"===n||"between"===n)&&l.a.createElement("div",{className:"input-group input-group--inline"},l.a.createElement(S.default,{name:"".concat(r,".width_max_value"),showLabel:!1,intlPlaceholder:"validators.dimensions.width",inline:!0,type:"text",size:"5"}),l.a.createElement("span",{className:"input-group__addon"},"x"),l.a.createElement(S.default,{name:"".concat(r,".height_max_value"),showLabel:!1,intlPlaceholder:"validators.dimensions.height",inline:!0,type:"text",size:"5"}),l.a.createElement("span",{className:"input-group__addon"},"px")))}}])&&ir(n.prototype,r),a&&ir(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(sr,"propTypes",{value:a.a.object.isRequired,namePrefix:a.a.string.isRequired});var ur={between:_()({width_min_value:[g.a.required(),g.a.positiveInteger()],height_min_value:[g.a.required(),g.a.positiveInteger()],width_max_value:[g.a.required(),g.a.positiveInteger()],height_max_value:[g.a.required(),g.a.positiveInteger()]}),min:_()({width_min_value:[g.a.required(),g.a.positiveInteger()],height_min_value:[g.a.required(),g.a.positiveInteger()]}),max:_()({width_max_value:[g.a.required(),g.a.positiveInteger()],height_max_value:[g.a.required(),g.a.positiveInteger()]})},mr={Component:sr,validate:function(e){return ur[e.type](e)},fromJSON:function(e){var t=e.width_min_value,n=e.height_min_value,r=e.width_max_value,a=e.height_max_value,i=function(e){return null!=e};return i(t)&&!i(r)?{type:"min",width_min_value:t,height_min_value:n}:i(r)&&!i(t)?{type:"max",width_max_value:r,height_max_value:a}:{type:"between",width_min_value:t,height_min_value:n,width_max_value:r,height_max_value:a}},toJSON:function(e){var t=e.type,n=e.width_min_value,r=e.height_min_value,a=e.width_max_value,i=e.height_max_value;switch(t){case"between":return{width_min_value:n,height_min_value:r,width_max_value:a,height_max_value:i};case"min":return{width_min_value:n,height_min_value:r};default:return{width_max_value:a,height_max_value:i}}},fields:["type","width_min_value","height_min_value","width_max_value","height_max_value"]};function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pr(e,t){return!t||"object"!==dr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pr(this,br(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,r=t,a=[{value:"between",label:this.t("validators.length.between")},{value:"min",label:this.t("validators.length.min")},{value:"max",label:this.t("validators.length.max")},{value:"eq",label:this.t("validators.length.eq")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(S.default,{name:"".concat(r,".type"),showLabel:!1,inline:!0,clearable:!1,options:a,autosize:!0,component:O.default}),("min"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".min"),showLabel:!1,intlPlaceholder:"validators.length.minValue",inline:!0,type:"text",size:"6"}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.length.and"})),("max"===n||"between"===n)&&l.a.createElement(S.default,{name:"".concat(r,".max"),showLabel:!1,intlPlaceholder:"validators.length.maxValue",inline:!0,type:"text",size:"6"}),"eq"===n&&l.a.createElement(S.default,{name:"".concat(r,".eq"),showLabel:!1,intlPlaceholder:"validators.length.eqValue",inline:!0,type:"text",size:"6"}))}}])&&fr(n.prototype,r),a&&fr(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(hr,"propTypes",{value:a.a.object.isRequired,namePrefix:a.a.string.isRequired});var _r={between:_()({min:[g.a.positiveInteger()],max:[g.a.positiveInteger(),g.a.greaterThan("min")]}),min:_()({min:[g.a.positiveInteger()]}),max:_()({max:[g.a.positiveInteger()]}),eq:_()({eq:[g.a.positiveInteger()]})},vr={Component:hr,validate:function(e){return _r[e.type](e)},fromJSON:function(e){var t=e.min,n=e.max,r=e.eq,a=function(e){return null!=e};return a(t)&&!a(n)?{type:"min",min:t}:a(n)&&!a(t)?{type:"max",max:n}:a(r)?{type:"eq",eq:r}:{type:"between",min:t,max:n}},toJSON:function(e){var t=e.type,n=e.min,r=e.max,a=e.eq;switch(t){case"between":return{min:n,max:r};case"eq":return{eq:a};case"min":return{min:n};default:return{max:r}}},fields:["type","min","max","eq"]};function gr(e){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wr(e,t){return!t||"object"!==gr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Or(e){return(Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jr(e,t){return(jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wr(this,Or(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.itemTypes,n=e.namePrefix,r=t.sort((function(e,t){return e.attributes.name-t.attributes.name})).map((function(e){return{value:e.id,label:e.attributes.name}}));return l.a.createElement(S.default,{name:"".concat(n,".item_types"),intlPlaceholder:"itemType.validator.placeholder",multiple:!0,options:r,component:O.default})}}])&&Er(n.prototype,r),a&&Er(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(kr,"propTypes",{namePrefix:a.a.string.isRequired,itemTypes:a.a.array});var Sr={Component:Object(s.connect)((function(e){return{itemTypes:Object.values(e.itemTypes).filter((function(e){return!e.attributes.modular_block}))}}))(kr),isRequired:!0,validate:_()({item_types:[g.a.minArrayLength(1)]}),fromJSON:function(e){return{item_types:e.item_types||[]}},toJSON:function(e){return{item_types:e.item_types}},fields:["item_types"]};function Pr(e){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t){return!t||"object"!==Pr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tr(e){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e,t){return(Rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xr(this,Tr(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.fields,n=e.namePrefix,r=t.map((function(e){return{value:e.id,label:e.attributes.label}}));return l.a.createElement(S.default,{name:"".concat(n,".title_field_id"),intlPlaceholder:"form.slugField.placeholder",multiple:!1,options:r,component:O.default})}}])&&Nr(n.prototype,r),a&&Nr(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fr,"propTypes",{namePrefix:a.a.string.isRequired,fields:a.a.array});var Mr={Component:Object(s.connect)((function(e,t){return{fields:Object.values(e.fields).filter((function(e){return e.relationships.item_type.data.id===t.itemTypeId})).filter((function(e){return"string"===e.attributes.field_type})).sort((function(e,t){return e.attributes.position-t.attributes.position}))}}))(Fr),isRequired:!0,validate:_()({title_field_id:[g.a.required()]}),fromJSON:function(e){return{title_field_id:e.title_field_id||null}},toJSON:function(e){return{title_field_id:e.title_field_id}},fields:["title_field_id"]};function Cr(e){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ir(e,t){return!t||"object"!==Cr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ar(e,t){return(Ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zr=["title","description","image","twitter_card"],Dr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ir(this,Lr(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ar(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.namePrefix,t=[{value:"title",label:this.t("seo.title")},{value:"description",label:this.t("seo.description")},{value:"image",label:this.t("seo.image")},{value:"twitter_card",label:this.t("seoInput.twitter")}];return l.a.createElement(S.default,{name:"".concat(e,".requiredFields"),intlPlaceholder:"seoField.validator.placeholder",multiple:!0,options:t,component:O.default})}}])&&qr(n.prototype,r),a&&qr(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Dr,"propTypes",{namePrefix:a.a.string.isRequired});var Br={Component:Dr,isRequired:!1,validate:_()({requiredFields:[g.a.minLength(1)]}),fromJSON:function(e){return{requiredFields:Object.entries(e).filter((function(e){return e[1]})).map((function(e){return e[0]}))}},toJSON:function(e){var t=e.requiredFields;return zr.reduce((function(e,n){return e[n]=t.includes(n),e}),{})},fields:["requiredFields"]};function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vr(e,t){return!t||"object"!==Hr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wr(e,t){return(Wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jr=["alt","title"],$r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vr(this,Gr(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wr(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.namePrefix,t=[{value:"alt",label:this.t("imageMetadata.alt")},{value:"title",label:this.t("imageMetadata.title")}];return l.a.createElement(S.default,{name:"".concat(e,".requiredFields"),multiple:!0,options:t,component:O.default})}}])&&Ur(n.prototype,r),a&&Ur(n,a),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}($r,"propTypes",{namePrefix:a.a.string.isRequired});var Kr={Component:$r,validate:_()({requiredFields:[g.a.minLength(1)]}),fromJSON:function(e){return{requiredFields:Object.entries(e).filter((function(e){return e[1]})).map((function(e){return e[0]}))}},toJSON:function(e){var t=e.requiredFields;return Jr.reduce((function(e,n){return e[n]=t.includes(n),e}),{})},fields:["requiredFields"]};var Xr={string:["required","unique","length","format","enum"],slug:["slug_title_field","required","unique","length"],text:["required","length","format"],rich_text:["size"],links:["items_item_type","size"],link:["item_item_type","required","unique"],seo:["required_seo_fields","file_size","image_dimensions"],lat_lon:["required"],json:["required"],date:["required","date_range"],date_time:["required","date_time_range"],boolean:[],integer:["required","number_range"],float:["required","number_range"],file:["required","file_size","extension","image_dimensions","required_alt_title"],video:["required"],gallery:["size","file_size","extension","image_dimensions","required_alt_title"],color:["required"]},Qr={required:null,required_seo_fields:Br,required_alt_title:Kr,unique:null,date_range:Qt,date_time_range:mn,enum:_n,extension:kn,format:Mn,number_range:Bn,size:Kn,file_size:rr,image_dimensions:mr,length:vr,item_item_type:Sr,items_item_type:Sr,slug_title_field:Mr};function Zr(e){return Xr[e].reduce((function(e,t){return Object.assign(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,Qr[t]))}),{})}var Yr,ea,ta,na=n(413),ra=n(13),aa=n(304);function ia(e){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oa(){return(oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function la(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ca(e,t){return!t||"object"!==ia(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ma=Object(s.connect)((function(e){return{locales:e.site.attributes.locales}}))((ta=ea=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ca(this,sa(t).call(this,e))).state={locale:e.locales[0]},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(t,e),n=t,(r=[{key:"handleLocaleSwitch",value:function(e){this.setState({locale:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.locales,r=t.appearanceValue,a=t.fieldType,o=t.plugins,c=t.isLocalized,s=this.state.locale,u=c?n:[n[0]];return l.a.createElement(l.a.Fragment,null,u.length>1&&l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"field.defaultValueLanguage"})),l.a.createElement(ra.Dropdown,{triggerComponent:ra.TextualTrigger,label:qt.default[s]},l.a.createElement(ra.Menu,{alignment:"left"},l.a.createElement(ra.Group,{intlName:"localesInput.switch"},n.map((function(t){return l.a.createElement(ra.Option,{key:t,active:s===t,onClick:e.handleLocaleSwitch.bind(e,t)},qt.default[t])})))))),l.a.createElement(S.default,oa({key:"".concat(s,"_default_value"),name:"".concat(s,"_default_value"),intlLabel:"field.defaultValue",intlHint:"field.defaultValueHint",intlPlaceholder:"field.defaultValuePlaceholder"},Object(aa.a)({locale:s,disabled:!1,fieldName:"default_value",appearance:Object(na.a)(r.editor)?Object(zt.d)(a):{editor:r.editor,parameters:Object(zt.g)(r.parameters[r.editor],r.editor,o)},validators:{},fieldType:a}))))}}])&&la(n.prototype,r),a&&la(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ea,"propTypes",{locales:a.a.array.isRequired,fieldType:a.a.string.isRequired,appearanceValue:a.a.object.isRequired,plugins:a.a.array.isRequired,isLocalized:a.a.bool.isRequired}),Yr=ta))||Yr,da=function(e){var t=e.field,n=t.name,r=t.value,a=t.onChange,i=t.onBlur,o=e.id;return l.a.createElement("input",{name:n,id:o,type:"checkbox",value:r,checked:r,onChange:a,onBlur:i})};da.propTypes={field:a.a.object.isRequired,id:a.a.string};var fa=da,pa=n(96);function ba(e){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ha(e,t){return!t||"object"!==ba(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _a(e){return(_a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ga=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ha(this,_a(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(t,e),n=t,(r=[{key:"handleSelect",value:function(e,t){var n=this.props.onSelect;t.preventDefault(),n(e)}},{key:"render",value:function(){var e=this,t=this.props.plugins;return l.a.createElement(ra.Dropdown,{icon:de.default,label:l.a.createElement(i.FormattedMessage,{id:"field.insertAddon"})},l.a.createElement(ra.Menu,null,t.map((function(t){return l.a.createElement(ra.Option,{key:t.id,onClick:e.handleSelect.bind(e,t)},t.attributes.name)}))))}}])&&ya(n.prototype,r),a&&ya(n,a),t}(l.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ga,"propTypes",{plugins:a.a.array.isRequired,onSelect:a.a.func.isRequired});var Ea=function(e){var t=e.plugins,n=e.parametersForms,r=e.addonsValue,a=e.fields,i=e.meta.error;return l.a.createElement("div",null,i,a.map((function(e,i){var o=n[r[i].id];return l.a.createElement("div",{className:"field-array__item",key:e},l.a.createElement("div",{className:"field-array__item__content"},l.a.createElement("div",{className:"PluginForm__preview"},l.a.createElement("div",{className:"PluginForm__preview__title"},t[r[i].id].attributes.name),o?l.a.createElement(o.Component,{namePrefix:"".concat(e,".parameters")}):l.a.createElement("div",null,"No settings available."))),l.a.createElement("div",{className:"field-array__item__trash"},l.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),a.remove(i)}},l.a.createElement(pa.default,null))))})),l.a.createElement(ga,{plugins:Object.values(t),onSelect:function(e){var n=Object(zt.f)(e.id,t);a.push({id:e.id,parameters:n?n.initialValues:{}})}}))};Ea.propTypes={plugins:a.a.object.isRequired,fields:a.a.object.isRequired,parametersForms:a.a.object.isRequired,meta:a.a.object.isRequired,addonsValue:a.a.array.isRequired};var wa,Oa,ja,ka=Ea;function Sa(e){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Na(e,t){return!t||"object"!==Sa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xa(e){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ta(e,t){return(Ta=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ra(n,!0).forEach((function(t){Ma(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ra(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qa(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ia,La,Aa,za={file:"gallery",gallery:"file",link:"links",links:"link",float:"integer",integer:"float",text:"string",string:"text"},Da=function(e){return Object.assign.apply(Object,[{}].concat(qa(e.map((function(e){var t=Ca(e,2);return Ma({},t[0],t[1])})))))},Ba=Object(s.connect)((function(e,t){var n=t.field,r=n.attributes.field_type,a=n.attributes,i=e.site.attributes.locales,o=i.map((function(e){return"".concat(e,"_default_value")})),l=Da(Object.values(e.plugins).filter((function(e){return["field_editor","sidebar"].includes(e.attributes.plugin_type)&&e.attributes.field_types.includes(r)})).map((function(e){return[e.id,e]}))),c=Da(Object.values(e.plugins).filter((function(e){return"field_addon"===e.attributes.plugin_type&&e.attributes.field_types.includes(r)})).map((function(e){return[e.id,e]}))),s=e.itemTypes[t.itemTypeId],u=H()(t.field.attributes,["label","api_key","hint","localized"]),d={label:[g.a.required()],api_key:[g.a.required()]},f=Zr(r);u.validators={};var p=["string","date","date_time","text","integer","float","lat_lon","boolean","color","json"].includes(r);Object.entries(f).forEach((function(n){var r=Ca(n,2),i=r[0],o=r[1];o&&o.isRequired?u.validators[i]={}:u.validators[i]={enabled:!!a.validators[i]},o&&Object.assign(u.validators[i],o.fromJSON(a.validators[i]||{},e,t))})),u.appearance={};var b=Object(zt.b)(r,e.plugins,s.attributes.modular_block);u.appearance.editor=n.attributes.appearance?n.attributes.appearance.editor:b[0],u.appearance.parameters=b.reduce((function(t,r){return Object.assign(t,Ma({},r,n.attributes.appearance&&n.attributes.appearance.editor===r?Object(zt.a)(n.attributes.appearance.parameters,r,e.plugins):Object(zt.a)(Object(zt.e)(r,e.plugins),r,e.plugins)))}),{}),u.addons=n.attributes.appearance?n.attributes.appearance.addons:[];var h=i.reduce((function(e,t){var r=n.attributes.localized?n.attributes.default_value[t]:n.attributes.default_value;return Fa({},e,Ma({},"".concat(t,"_default_value"),r))}),{});u=Fa({},u,{},h);var v=_()(d);return{maintenanceMode:Object(G.isMaintenanceModeActive)(e),plugins:Object.values(e.plugins),isNewField:!n.id,fieldType:r,fieldTypeValidators:f,fieldEditorPlugins:l,fieldAddonPlugins:c,editors:b,initialValues:u,supportsDefaultValue:p,itemType:s,validate:function(e){var t=Object(zt.f)(e.appearance.editor,l);return V()(Fa({},v(e),{appearance:t&&t.validate?{parameters:Ma({},e.appearance.editor,t.validate(e.appearance.parameters[e.appearance.editor]))}:null,validators:Object.entries(f).reduce((function(t,n){var r=Ca(n,2),a=r[0],i=r[1],o=e.validators[a];if(i&&(i.isRequired||o.enabled)){var l=i.validate(o);if(Object.entries(l).length>0)return Fa({},t,Ma({},a,l))}return t}),{}),addons:e.addons.map((function(e){var t=Object(zt.f)(e.id,c);if(t&&t.validate){var n=t.validate(e.parameters);if(Object.entries(n).length>0)return{parameters:n}}return null})).filter((function(e){return!!e}))}),(function(t,n){switch(n){case"appearance":return t&&t.parameters&&Object.entries(t.parameters[e.appearance.editor]).length>0;case"validators":return Object.entries(t).length>0;case"addons":return t.length>0;default:return!!t}}))},outerOnSubmit:t.onSubmit,onSubmit:function(r){var a,l,c,s,u,d,p,b;return regeneratorRuntime.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(a=m()(n),!(!r.localized&&n.attributes.localized&&i.length>1)){h.next=8;break}return l=qa(i),c=l.shift(),h.next=6,regeneratorRuntime.awrap(Object(ce.showConfirm)("messages.confirm.delocalizeField",{mainLocale:"".concat(qt.default[c]," (").concat(c,")"),locales:l.map((function(e){return"".concat(qt.default[e]," (").concat(e,")")}))}));case 6:if(h.sent){h.next=8;break}return h.abrupt("return",!1);case 8:if(s=r.validators.items_item_type||r.validators.item_item_type,u=n.attributes.validators.item_item_type||n.attributes.validators.items_item_type,!s||!u||Lt()(s,u)){h.next=19;break}if(d=u.item_types.filter((function(e){return!s.item_types.includes(e)})).map((function(t){return e.itemTypes[t].attributes.name})).join(", "),h.t0=d.length>0,!h.t0){h.next=17;break}return h.next=16,regeneratorRuntime.awrap(Object(ce.showConfirm)("messages.confirm.changeLinkValidations",{deletedLinks:d}));case 16:h.t0=!h.sent;case 17:if(!h.t0){h.next=19;break}return h.abrupt("return",!1);case 19:return delete a.relationships,void 0===(p=Object.assign(a.attributes,r)).localized&&(p.localized=!1),p.singleton&&(p.sortable=!1),p.localized?p.default_value=i.reduce((function(e,t){return Fa({},e,Ma({},t,r["".concat(t,"_default_value")]||null))}),{}):p.default_value=r["".concat(i[0],"_default_value")],b={},"rich_text"===p.field_type&&(b.rich_text_blocks=t.field.attributes.validators.rich_text_blocks||{item_types:[]}),Object.entries(f).forEach((function(e){var t=Ca(e,2),n=t[0],a=t[1],i=r.validators[n];(a&&a.isRequired||i.enabled)&&(b[n]=a?a.toJSON(i):{})})),p.validators=b,p.appearance={editor:r.appearance.editor,parameters:Object(zt.g)(r.appearance.parameters[r.appearance.editor],r.appearance.editor,e.plugins),addons:r.addons},a.attributes=V()(p,["addons"].concat(o)),h.abrupt("return",t.onSubmit(a).catch((function(e){var t=m()(e.errors);throw t.appearance&&t.appearance.parameters&&(t.appearance.parameters=Ma({},r.appearance.editor,t.appearance.parameters)),new y.SubmissionError(t)})));case 31:case"end":return h.stop()}}))}}}))(wa=Object(y.withForm)({form:"field"})((ja=Oa=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Na(this,xa(t).call(this,e));var r=e.fieldType,a=e.fieldAddonPlugins,i=e.fieldEditorPlugins;return n.addonParametersForms=Object(zt.c)(r,a).reduce((function(e,t){return Fa({},e,Ma({},t,Object(zt.f)(t,a)))}),{}),n.editorParametersForms=Object(zt.b)(r,i).reduce((function(e,t){return Fa({},e,Ma({},t,Object(zt.f)(t,i)))}),{}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ta(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(e(Object(Ct.fetchAll)()));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"handleConvert",value:function(e,t){var n,r,a,i,o,l;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,r=n.fieldType,a=n.field,i=n.outerOnSubmit,t.preventDefault(),e.next=4,regeneratorRuntime.awrap(Object(ce.showConfirm)("messages.confirm.convertField"));case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:o=za[r],(l=m()(a)).attributes.field_type=o,delete l.relationships,i(l);case 11:case"end":return e.stop()}}),null,this)}},{key:"renderValidator",value:function(e){var t=Ca(e,2),n=t[0],r=t[1],a=this.props,o=a.fieldType,c=a.itemTypeId,s=a.formikBag.values.validators[n];return l.a.createElement("div",{key:n},l.a.createElement("div",{className:"FieldForm__validator"},l.a.createElement("div",{className:"FieldForm__validator__checkbox"},r&&r.isRequired?l.a.createElement("input",{type:"checkbox",checked:!0,disabled:!0}):l.a.createElement(Mt.FastField,{name:"validators.".concat(n,".enabled"),id:"validators.".concat(n,".enabled"),component:fa})),l.a.createElement("div",{className:"FieldForm__validator__description"},l.a.createElement("label",{htmlFor:"validators.".concat(n,".enabled")},this.existTranslation("validator.".concat(o,".").concat(n,".title"))?this.t("validator.".concat(o,".").concat(n,".title")):this.t("validator.".concat(n,".title"))),l.a.createElement("div",{className:"form__hint"},l.a.createElement(i.FormattedHTMLMessage,{id:this.existTranslation("validator.".concat(o,".").concat(n,".hint"))?"validator.".concat(o,".").concat(n,".hint"):"validator.".concat(n,".hint")})),r&&(r.isRequired||s&&s.enabled)&&l.a.createElement("div",{className:"space--both-1"},l.a.createElement(r.Component,{fieldType:o,namePrefix:"validators.".concat(n),itemTypeId:c,value:s})))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.fieldTypeValidators,r=t.supportsDefaultValue,a=t.itemTypeId,o=t.itemType,c=t.isNewField,s=t.field,u=t.modularBlock,m=t.maintenanceMode,d=t.fieldType,f=t.editors,p=t.fieldEditorPlugins,b=t.fieldAddonPlugins,h=t.plugins,_=t.formikBag,v=_.errors,g=_.values,j=g.appearance,N=g.addons,x=g.localized,T=Ft.a.all([{validators:{},appearance:{parameters:{}}},v]),R={basic:T.api_key||T.label,defaultValue:Object.keys(T).some((function(e){return e.includes("default_value")})),validators:Object.values(T.validators||{}).some((function(e){return Object.values(e).some((function(e){return e}))})),appearance:T.appearance.editor||Object.values(T.appearance.parameters||{}).some((function(e){return Object.values(e).some((function(e){return e}))}))},F=za[d],M=this.editorParametersForms[j.editor],C=M&&l.a.createElement(M.Component,{namePrefix:"appearance.parameters.".concat(j.editor),value:j.parameters[j.editor],itemTypeId:a,fieldId:s.id}),q=null;return q=Object(na.a)(j.editor)?p[j.editor].attributes.name:this.existTranslation("editor.".concat(j.editor))?this.t("editor.".concat(j.editor)):"Editor",l.a.createElement("div",{className:"FieldForm"},l.a.createElement(w.default,{disabled:m},l.a.createElement(I,{className:"Tabs--no-modal",extraInfo:!c&&"Field ID: ".concat(s.id)},l.a.createElement(L,{intlLabel:"fieldForm.tab.basic",invalid:R.basic},l.a.createElement(S.default,{required:!0,name:"label",intlLabel:"field.label",intlHint:"field.labelHint",intlPlaceholder:"field.title.placeholder",wrapInput:function(t){return Fa({},t,{onChange:function(n){var r=e.props.formikBag.setFieldValue,a=t.onChange(n);return c&&r("api_key",E(n.target.value)),a}})},type:"text",className:"form__input--large",autoFocus:!0}),l.a.createElement(S.default,{required:!0,name:"api_key",intlLabel:"field.apiKey",intlHint:"field.apiKeyHint",intlPlaceholder:"field.apiKey.placeholder",type:"text",className:"form__input--code"}),!u&&l.a.createElement(S.default,{name:"localized",intlLabel:"field.localized",intlHint:"field.localizedHint",component:P.a}),l.a.createElement(k.a,{intlLabel:"field.button"})),Object.keys(n).length>0&&l.a.createElement(L,{intlLabel:"fieldForm.tab.validations",invalid:R.validators},l.a.createElement("div",{className:"form__field"},Object.entries(n).filter((function(e){return!("unique"===Ca(e,1)[0]&&o.attributes.singleton)})).map(this.renderValidator.bind(this))),l.a.createElement(k.a,{intlLabel:"field.button"})),r&&d&&l.a.createElement(L,{intlLabel:"fieldForm.tab.defaultValue",invalid:R.defaultValue},l.a.createElement(ma,{appearanceValue:j,isLocalized:x,fieldType:d,plugins:h}),l.a.createElement(k.a,{intlLabel:"field.button"})),l.a.createElement(L,{intlLabel:"fieldForm.tab.presentation",invalid:R.appearance},l.a.createElement(S.default,{name:"hint",intlLabel:"field.hint",intlHint:"field.hintHint",intlPlaceholder:"field.hintPlaceholder",component:At.default}),f.length>1&&l.a.createElement(S.default,{name:"appearance.editor",intlLabel:"fieldForm.appearance.editor",intlHint:"fieldForm.appearance.editor.hint",options:f.map((function(t){return Object(na.a)(t)?{label:p[t].attributes.name,value:t}:{label:e.existTranslation("editor.".concat(t))?l.a.createElement(i.FormattedMessage,{id:"editor.".concat(t)}):l.a.createElement(i.FormattedMessage,{id:"field.addon.defaultEditor"}),value:t}})),component:O.default}),C&&f.length>1&&l.a.createElement("div",{className:"PluginForm__preview"},l.a.createElement("div",{className:"PluginForm__preview__title"},l.a.createElement(i.FormattedMessage,{id:"field.addon.settings",values:{editorName:q}})),C),C&&1===f.length&&C,Object.values(b).length>0&&l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"field.addons"})),l.a.createElement(y.FieldArray,{name:"addons",component:ka,parametersForms:this.addonParametersForms,addonsValue:N,plugins:b})),l.a.createElement(k.a,{intlLabel:"field.button"})))),!!F&&!c&&l.a.createElement("div",{className:"FieldForm__convert"},l.a.createElement("a",{href:"#",onClick:this.handleConvert.bind(this,s.id)},l.a.createElement(i.FormattedMessage,{id:"field.convert",values:{field_type:this.t("fieldType.".concat(F))}}))))}}])&&Pa(n.prototype,r),a&&Pa(n,a),t}(c.a),Ma(Oa,"propTypes",{outerOnSubmit:a.a.func.isRequired,isNewField:a.a.bool.isRequired,itemTypeId:a.a.string.isRequired,supportsDefaultValue:a.a.bool.isRequired,fieldType:a.a.string.isRequired,fieldTypeValidators:a.a.object,field:a.a.object.isRequired,itemType:a.a.object,modularBlock:a.a.bool,maintenanceMode:a.a.bool,fieldEditorPlugins:a.a.object.isRequired,fieldAddonPlugins:a.a.object.isRequired,formikBag:a.a.object.isRequired,editors:a.a.array.isRequired,plugins:a.a.array.isRequired,dispatch:a.a.func.isRequired}),wa=ja))||wa)||wa;function Ha(e){return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Va(e,t){return!t||"object"!==Ha(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ga(e){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wa(e,t){return(Wa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ja,$a,Ka,Xa=Object(s.connect)((function(e,t){return{field:t.match.params.fieldId?e.fields[t.match.params.fieldId]:Object(p.generateEmptyField)(t.match.params.fieldType)}}))((Aa=La=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Va(this,Ga(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wa(e,t)}(t,e),n=t,(r=[{key:"handleClose",value:function(){var e=this.props,t=e.history,n=e.parentUrl;t.push(n)}},{key:"handleSubmitField",value:function(e){var t,n,r,a,i,o,l,c,s;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=this.props,n=t.dispatch,r=t.itemType,a=t.history,i=t.parentUrl,u.prev=1,l=m()(e),o=e.id?n(Object(me.update)(e.id,l)):n(Object(me.create)(r.id,l)),u.next=6,regeneratorRuntime.awrap(o);case 6:return u.next=8,regeneratorRuntime.awrap(this.refreshState());case 8:c="admin.itemType.".concat(e.id?"update":"create","Field.success"),n(Object(re.notice)(c)),a.push(i),u.next=18;break;case 13:throw u.prev=13,u.t0=u.catch(1),s="admin.itemType.".concat(e.id?"update":"create","Field.failure"),n(Object(re.alert)(s)),Object(ae.default)(u.t0);case 18:case"end":return u.stop()}}),null,this,[[1,13]])}},{key:"refreshState",value:function(){var e,t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e=this.props.dispatch,t=["item_types","item_types.singleton_item","item_types.fields","menu_items"].join(","),n.next=5,regeneratorRuntime.awrap(e(Object(f.fetch)({include:t})));case 5:return n.abrupt("return",n.sent);case 8:return n.prev=8,n.t0=n.catch(0),this.setState((function(){throw n.t0})),n.abrupt("return",null);case 12:case"end":return n.stop()}}),null,this,[[0,8]])}},{key:"render",value:function(){var e=this.props,t=e.itemType,n=e.field,r=e.modularBlock;return l.a.createElement(b.default,{freeContent:!0,big:!0,title:n.id?this.t("itemType.editField"):this.t("itemType.addField",{fieldType:this.t("fieldType.".concat(n.attributes.field_type))}),disableModalPrompt:!0,onClose:this.handleClose.bind(this)},l.a.createElement(Ba,{modularBlock:r,itemTypeId:t.id,field:n,onSubmit:this.handleSubmitField.bind(this)}))}}])&&Ua(n.prototype,r),a&&Ua(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(La,"propTypes",{dispatch:a.a.func.isRequired,itemType:a.a.object.isRequired,parentUrl:a.a.string.isRequired,field:a.a.object.isRequired,modularBlock:a.a.bool,history:a.a.object.isRequired}),Ia=Aa))||Ia;function Qa(e){return(Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Za(){return(Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ei(e,t){return!t||"object"!==Qa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ni(e,t){return(ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ri,ai,ii,oi=Object(s.connect)((function(e,t){var n=e.itemTypes[t.match.params.modularBlockId];return{itemType:n,initialValues:H()(n.attributes,["name","api_key"])}}))(Ja=Object(y.withForm)({form:"editModularBlock",validate:_()({name:[g.a.required()],api_key:[g.a.required()]}),onSubmit:function(e,t){var n,r,a,i,o,l,c;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=t.dispatch,r=t.itemType,a=t.history,i=t.parentUrl,s.prev=1,(o=m()(r)).attributes.name=e.name,o.attributes.api_key=e.api_key,o.relationships={ordering_field:{data:null},title_field:{data:null}},s.next=8,regeneratorRuntime.awrap(n(Object(d.update)(r.id,o)));case 8:return l=s.sent,c=["item_types","item_types.singleton_item","menu_items"].join(","),s.next=12,regeneratorRuntime.awrap(n(Object(f.fetch)({include:c})));case 12:return s.next=14,regeneratorRuntime.awrap(l);case 14:n(Object(re.notice)("admin.modularBlock.update.success")),a.push(i),s.next=22;break;case 18:throw s.prev=18,s.t0=s.catch(1),n(Object(re.alertResponseFailure)(s.t0,"admin.modularBlock.update.failure")),Object(ae.default)(s.t0);case 22:case"end":return s.stop()}}),null,null,[[1,18]])}})((Ka=$a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ei(this,ti(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ni(e,t)}(t,e),n=t,(r=[{key:"handleClose",value:function(){var e=this.props,t=e.history,n=e.parentUrl;t.push(n)}},{key:"render",value:function(){var e=this.props,t=e.itemType,n=e.match.url;return l.a.createElement("div",null,l.a.createElement(b.default,{localeKey:"modularBlock.edit",freeContent:!0,disableModalPrompt:!0,wide:!0,onClose:this.handleClose.bind(this)},l.a.createElement("div",{className:"ModularBlock"},l.a.createElement("div",{className:"ModularBlock__fields"},l.a.createElement(st,{modularBlock:!0,itemType:t})),l.a.createElement("div",{className:"ModularBlock__info"},l.a.createElement(w.default,null,l.a.createElement(S.default,{name:"name",intlLabel:"itemType.name",intlPlaceholder:"itemType.name.placeholder",intlHint:"itemType.name.hint",type:"text",className:"form__input--large"}),l.a.createElement(S.default,{name:"api_key",intlLabel:"itemType.api_key",intlPlaceholder:"itemType.api_key.placeholder",intlHint:"itemType.api_key.hint",type:"text",className:"form__input--code"}),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},"Block ID: ",t.id)),l.a.createElement(k.a,{intlLabel:"itemType.button"}))))),l.a.createElement(Oe.g,null,l.a.createElement(mt.default,{exact:!0,path:"".concat(n,"/fields/new"),render:function(e){return l.a.createElement(Tt,Za({},e,{modularBlock:!0,parentUrl:n}))}}),l.a.createElement(mt.default,{path:"".concat(n,"/fields/new/:fieldType"),render:function(e){return l.a.createElement(Xa,Za({},e,{modularBlock:!0,parentUrl:n,itemType:t}))}}),l.a.createElement(mt.default,{path:"".concat(n,"/fields/:fieldId/edit"),render:function(e){return l.a.createElement(Xa,Za({},e,{modularBlock:!0,parentUrl:n,itemType:t}))}})))}}])&&Ya(n.prototype,r),a&&Ya(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}($a,"propTypes",{itemType:a.a.object,parentUrl:a.a.string.isRequired,history:a.a.object.isRequired,match:a.a.object.isRequired}),Ja=Ka))||Ja)||Ja;function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ui(e,t){return!t||"object"!==li(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function di(e,t){return(di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pi,bi,yi,hi=Object(s.connect)((function(e,t){var n=e.fields[t.match.params.fieldId],r=Object.values(e.itemTypes).filter((function(e){return e.attributes.modular_block})).filter((function(e){return!n.attributes.validators.rich_text_blocks.item_types.includes(e.id)})).map((function(t){var n=Object.values(e.fields).filter((function(e){return"rich_text"===e.attributes.field_type})).filter((function(e){return e.attributes.validators.rich_text_blocks.item_types.includes(t.id)})).map((function(t){return{field:t,itemType:e.itemTypes[t.relationships.item_type.data.id]}}));return{itemType:t,usedIn:n}}));return{field:n,modularBlocks:r}}))(ri=Object(y.withForm)({form:"newModularBlock",validate:_()({name:[g.a.required()],api_key:[g.a.required()]}),onSubmit:function(e,t){var n,r,a,i,o,l,c,s,u;return regeneratorRuntime.async((function(b){for(;;)switch(b.prev=b.next){case 0:return n=t.dispatch,r=t.field,a=t.history,i=t.parentUrl,b.prev=1,(o=Object(p.generateEmptyItemType)(!0)).attributes.name=e.name,o.attributes.api_key=e.api_key,o.relationships={ordering_field:{data:null},title_field:{data:null}},b.next=8,regeneratorRuntime.awrap(n(Object(d.create)(o)));case 8:return l=b.sent,c=l.data,delete(s=m()(r)).relationships,s.attributes.validators.rich_text_blocks.item_types=r.attributes.validators.rich_text_blocks.item_types.concat([c.id]),b.next=15,regeneratorRuntime.awrap(n(Object(me.update)(r.id,s)));case 15:return u=["item_types","item_types.singleton_item","menu_items"].join(","),b.next=18,regeneratorRuntime.awrap(n(Object(f.fetch)({include:u})));case 18:n(Object(re.notice)("admin.modularBlock.create.success")),a.push("".concat(i,"/modular_blocks/").concat(c.id)),b.next=26;break;case 22:throw b.prev=22,b.t0=b.catch(1),n(Object(re.alertResponseFailure)(b.t0,"admin.modularBlock.create.failure")),Object(ae.default)(b.t0);case 26:case"end":return b.stop()}}),null,null,[[1,22]])}})((ii=ai=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ui(this,mi(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&di(e,t)}(t,e),n=t,(r=[{key:"handleClose",value:function(){var e=this.props,t=e.history,n=e.parentUrl;t.push(n)}},{key:"handleAddExistingModularBlock",value:function(e){var t,n,r,a,i,o;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=this.props,n=t.field,r=t.history,a=t.dispatch,i=t.parentUrl,l.prev=1,delete(o=m()(n)).relationships,o.attributes.validators.rich_text_blocks.item_types=n.attributes.validators.rich_text_blocks.item_types.concat([e.id]),l.next=7,regeneratorRuntime.awrap(a(Object(me.update)(n.id,o)));case 7:a(Object(re.notice)("admin.modularBlock.add.success")),r.push(i),l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),a(Object(re.alertResponseFailure)(l.t0,"admin.modularBlock.add.failure"));case 14:case"end":return l.stop()}}),null,this,[[1,11]])}},{key:"renderCreateForm",value:function(){var e=this;return l.a.createElement(w.default,{promptOnLeaveDirty:!1},l.a.createElement(S.default,{name:"name",intlLabel:"itemType.name",intlPlaceholder:"itemType.name.placeholder",intlHint:"itemType.name.hint",wrapInput:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ci(n,!0).forEach((function(t){fi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ci(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{onChange:function(n){var r=e.props.formikBag.setFieldValue,a=t.onChange(n);return r("api_key",E(n.target.value)),a}})},type:"text",className:"form__input--large"}),l.a.createElement(S.default,{name:"api_key",intlLabel:"itemType.api_key",intlPlaceholder:"itemType.api_key.placeholder",intlHint:"itemType.api_key.hint",type:"text",className:"form__input--code"}),l.a.createElement(k.a,{intlLabel:"itemType.button"}))}},{key:"renderExistingModularBlock",value:function(e){var t=e.itemType,n=e.usedIn;return l.a.createElement("a",{href:"#",className:"ModularBlock__block",onClick:this.handleAddExistingModularBlock.bind(this,t),key:t.id},l.a.createElement("span",{className:"ModularBlock__block__label"},t.attributes.name),l.a.createElement("span",{className:"ModularBlock__block__api"},t.attributes.api_key),n.length>0&&l.a.createElement("div",{className:"ModularBlock__block__uses"},"Already used in"," ",Object(se.a)(n.map((function(e){return l.a.createElement("span",{key:e.field.id},"field ",l.a.createElement("strong",null,e.field.attributes.label)," of model"," ",l.a.createElement("strong",null,e.itemType.attributes.name))})),", ")))}},{key:"renderExistingModularBlocks",value:function(){var e=this.props.modularBlocks;return l.a.createElement("div",null,e.map(this.renderExistingModularBlock.bind(this)))}},{key:"renderBody",value:function(){return 0===this.props.modularBlocks.length?l.a.createElement("div",{className:"Tabs"},l.a.createElement("div",{className:"Tabs__content"},this.renderCreateForm())):l.a.createElement(I,null,l.a.createElement(L,{intlLabel:"modularBlock.new"},this.renderCreateForm()),l.a.createElement(L,{intlLabel:"modularBlock.existing"},this.renderExistingModularBlocks()))}},{key:"render",value:function(){return l.a.createElement(b.default,{localeKey:"modularBlock.add",freeContent:!0,onClose:this.handleClose.bind(this)},this.renderBody())}}])&&si(n.prototype,r),a&&si(n,a),t}(c.a),fi(ai,"propTypes",{field:a.a.object.isRequired,history:a.a.object.isRequired,dispatch:a.a.func.isRequired,parentUrl:a.a.string.isRequired,formikBag:a.a.object.isRequired,modularBlocks:a.a.array.isRequired}),ri=ii))||ri)||ri,_i=n(303),vi=n(2242);function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ei(){return(Ei=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oi(e,t){return!t||"object"!==gi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ji(e){return(ji=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ki(e,t){return(ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Si,Pi,Ni,xi=Object(s.connect)((function(e,t){var n=e.itemTypes[t.match.params.itemTypeId],r=H()(Object(G.getCurrentUser)(e),["id","type"]);return{itemType:n,editors:Object.values(e.editingSessions).filter((function(e){return e.relationships.active_item_type.data.id===t.match.params.itemTypeId&&e.attributes.locked_at&&!Lt()(e.relationships.editor.data,r)})).map((function(e){return e.relationships.editor}))}}))((yi=bi=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Oi(this,ji(t).call(this,e))).state={isLoading:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ki(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e,t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props,t=e.dispatch,n=e.match.params.itemTypeId,this.setState({isLoading:!0}),r.next=4,regeneratorRuntime.awrap(t(Object(d.fetch)(n)));case 4:this.setState({isLoading:!1});case 5:case"end":return r.stop()}}),null,this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=this.props,n=t.dispatch,r=t.match.params.itemTypeId,e.match.params.itemTypeId===r){a.next=6;break}return this.setState({isLoading:!0}),a.next=5,regeneratorRuntime.awrap(n(Object(d.fetch)(r)));case 5:this.setState({isLoading:!1});case 6:case"end":return a.stop()}}),null,this)}},{key:"handleDestroy",value:function(e){var t,n,r,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,r=t.history,a=t.itemType,e.preventDefault(),i.next=4,regeneratorRuntime.awrap(Object(ce.showConfirm)("messages.confirm.destroyItemType"));case 4:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return i.prev=6,this.setState({isLoading:!0}),i.next=10,regeneratorRuntime.awrap(n(Object(d.destroy)(a.id)));case 10:this.refreshState(),this.setState({isLoading:!1}),n(Object(re.notice)("admin.itemType.destroy.success")),r.push("/admin/item_types"),i.next=20;break;case 16:i.prev=16,i.t0=i.catch(6),n(Object(re.alertResponseFailure)(i.t0,"admin.itemType.destroy.failure")),this.setState({isLoading:!1});case 20:case"end":return i.stop()}}),null,this,[[6,16]])}},{key:"handleDuplicate",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.props.dispatch,r.prev=1,t.preventDefault(),this.setState({isLoading:!0}),r.next=6,regeneratorRuntime.awrap(n(Object(d.duplicate)(e)));case 6:return r.next=8,regeneratorRuntime.awrap(this.refreshState());case 8:this.setState({isLoading:!1}),n(Object(re.notice)("admin.itemType.duplicateItemType.success")),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(1),n(Object(re.alertResponseFailure)(r.t0,"admin.itemType.duplicateItemType.failure")),this.setState({isLoading:!1});case 16:case"end":return r.stop()}}),null,this,[[1,12]])}},{key:"refreshState",value:function(){var e=this.props.dispatch,t=["item_types","item_types.singleton_item","item_types.fields","menu_items"].join(",");return e(Object(f.fetch)({include:t}))}},{key:"renderLoading",value:function(){return l.a.createElement("div",null,l.a.createElement(qe.default,{size:80}))}},{key:"render",value:function(){var e,t=this.props,n=t.itemType,r=t.editors,a=t.match.url,o=this.state.isLoading;if(!n)return l.a.createElement("div",null);var c=n.attributes.singleton&&n.relationships.singleton_item.data,s=n.attributes.has_singleton_item;return e=n.attributes.singleton?"/editor/item_types/".concat(n.id,"/items/").concat(s?"".concat(c.id,"/edit"):"new"):"/editor/item_types/".concat(n.id,"/items"),l.a.createElement("div",null,o?this.renderLoading():l.a.createElement("div",{className:"Page"},l.a.createElement(Ue,null,l.a.createElement("div",{className:"Page__inner"},l.a.createElement(ie.default,{to:e,className:"Page__link"}," ",l.a.createElement(i.FormattedMessage,{id:"itemType.toContent"})),l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},n.attributes.name),l.a.createElement("div",{className:"Page__space"}),l.a.createElement(ie.default,{to:"/admin/item_types/".concat(n.id,"/edit"),className:"Page__action"},l.a.createElement(_i.default,null),l.a.createElement(i.FormattedMessage,{id:"itemType.edit"})),l.a.createElement("a",{href:"#",onClick:this.handleDuplicate.bind(this,n.id),className:"Page__action"},l.a.createElement(i.FormattedMessage,{id:"itemType.duplicate"})),l.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},l.a.createElement(pa.default,null),l.a.createElement(i.FormattedMessage,{id:"itemType.row.delete"}))),r.length>0&&l.a.createElement("div",{className:"Info"},l.a.createElement("div",{className:"Info__icon"},l.a.createElement(vi.default,null)),l.a.createElement("div",{className:"Info__body"},l.a.createElement(i.FormattedMessage,{id:"itemType.currentlyEditing",values:{names:l.a.createElement(ut.default,{userLinks:r}),count:r.length}}))),l.a.createElement(st,{itemType:n})))),l.a.createElement(Oe.g,null,l.a.createElement(mt.default,{path:"".concat(a,"/edit"),render:function(e){return l.a.createElement(ht,Ei({},e,{itemType:n}))}}),l.a.createElement(mt.default,{exact:!0,path:"".concat(a,"/fields/new"),render:function(e){return l.a.createElement(Tt,Ei({},e,{parentUrl:a}))}}),l.a.createElement(mt.default,{path:"".concat(a,"/fields/new/:fieldType"),render:function(e){return l.a.createElement(Xa,Ei({},e,{parentUrl:a,itemType:n}))}}),l.a.createElement(mt.default,{path:"".concat(a,"/fields/:fieldId/edit"),render:function(e){return l.a.createElement(Xa,Ei({},e,{parentUrl:a,itemType:n}))}}),l.a.createElement(mt.default,{path:"".concat(a,"/fields/:fieldId/modular_blocks/new"),render:function(e){return l.a.createElement(hi,Ei({},e,{parentUrl:a,itemType:n}))}}),l.a.createElement(mt.default,{path:"".concat(a,"/modular_blocks/:modularBlockId"),render:function(e){return l.a.createElement(oi,Ei({},e,{parentUrl:a,itemType:n}))}})))}}])&&wi(n.prototype,r),a&&wi(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(bi,"propTypes",{dispatch:a.a.func.isRequired,itemType:a.a.object,match:a.a.object.isRequired,history:a.a.object.isRequired,editors:a.a.array.isRequired}),pi=yi))||pi,Ti=n(2294),Ri=n.n(Ti);function Fi(e){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ci(e,t){return!t||"object"!==Fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qi(e){return(qi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ii(e,t){return(Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return Li}));var Li=Object(s.connect)((function(e){var t=Object.values(e.itemTypes).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})),n=[],r=[];return t.forEach((function(e){e.attributes.modular_block?r.push(e):n.push(e)})),{itemTypes:t,blocks:r,other:n,maintenanceMode:Object(G.isMaintenanceModeActive)(e)}}))((Ni=Pi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ci(this,qi(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ii(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e,t,n,r,a,i,o;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,e=this.props,t=e.dispatch,n=e.match.url,r=e.location,(a=Object(Oe.j)(r.pathname,{path:"".concat(n,"/:itemTypeId")}))&&(i=a.params.itemTypeId,(o=document.getElementById("itemtype-row-".concat(i)))&&Object(le.a)(o,{scrollMode:"if-needed"})),l.next=6,regeneratorRuntime.awrap(t(Object(d.fetchAll)()));case 6:l.next=11;break;case 8:l.prev=8,l.t0=l.catch(0),this.setState((function(){throw l.t0}));case 11:case"end":return l.stop()}}),null,this,[[0,8]])}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.match.url,r=t.location,a=Object(Oe.j)(e.location.pathname,{path:"".concat(n,"/:itemTypeId")}),i=Object(Oe.j)(r.pathname,{path:"".concat(n,"/:itemTypeId")});if(i){var o=i.params.itemTypeId;if((a?a.params.itemTypeId:null)!==o&&o){var l=document.getElementById("itemtype-row-".concat(o));l&&Object(le.a)(l,{scrollMode:"if-needed"})}}}},{key:"handleSubmit",value:function(e){var t,n,r,a,i,o,l,c;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.props,n=t.dispatch,r=t.history,s.prev=1,a=m()(e),s.next=5,regeneratorRuntime.awrap(n(Object(d.create)(a)));case 5:return i=s.sent,o=["item_types","item_types.singleton_item","menu_items"].join(","),s.next=9,regeneratorRuntime.awrap(n(Object(f.fetch)({include:o})));case 9:return s.next=11,regeneratorRuntime.awrap(i);case 11:l=s.sent,c=l.data,n(Object(re.notice)("admin.itemType.create.success")),r.push("/admin/item_types/".concat(c.id)),s.next=21;break;case 17:throw s.prev=17,s.t0=s.catch(1),n(Object(re.alertResponseFailure)(s.t0,"admin.itemType.create.failure")),Object(ae.default)(s.t0);case 21:case"end":return s.stop()}}),null,this,[[1,17]])}},{key:"renderItemType",value:function(e,t){var n=["ItemTypeRow"];return e&&n.push("ItemTypeRow--".concat(e)),l.a.createElement(ie.default,{to:"/admin/item_types/".concat(t.id),className:n.join(" "),activeClassName:"ItemTypeRow--active",key:t.id,id:"itemtype-row-".concat(t.id)},l.a.createElement("div",{className:"ItemTypeRow__name"},t.attributes.name),l.a.createElement("div",{className:"ItemTypeRow__api"},t.attributes.api_key))}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"Items__blank-slate"},l.a.createElement("div",{className:"Items__blank-slate__inner"},l.a.createElement("div",{className:"Items__blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.itemTypes.noItemTypes.title"})),l.a.createElement("div",{className:"Items__blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"admin.itemTypes.noItemTypes.description"})),l.a.createElement("a",{href:"https://www.datocms.com/docs/content-modelling",className:"Items__blank-slate__guide",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("span",{className:"NavigationBar__button__label"},l.a.createElement("i",{className:"icon--book"}),l.a.createElement(i.FormattedMessage,{id:"admin.itemTypes.noItemTypes.docs"})))),l.a.createElement("div",{className:"Items__blank-slate__arrow"}))}},{key:"renderItemTypes",value:function(){var e=this.props,t=e.itemTypes,n=e.other,r=e.maintenanceMode,a=e.match.url;return 0===t.length?l.a.createElement("div",{className:"Items"},this.renderBlankSlate(),!r&&l.a.createElement(ie.default,{to:"".concat(a,"/new"),className:"Items__button"},l.a.createElement(de.default,null))):l.a.createElement("div",{className:"Items"},l.a.createElement("div",{className:"Items__wrap"},l.a.createElement("div",{className:"Items__items"},n.map(this.renderItemType.bind(this,null))),!r&&l.a.createElement(ie.default,{to:"".concat(a,"/new"),className:"Items__button"},l.a.createElement(de.default,null))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.itemTypes,r=t.match.url,a=t.history;return l.a.createElement(Ri.a,{subSplit:!0},l.a.createElement(oe.default,{minSize:250,defaultSize:300,split:"vertical"},l.a.createElement("div",null,n&&this.renderItemTypes()),l.a.createElement("div",null,l.a.createElement(Oe.g,null,l.a.createElement(mt.default,{path:"".concat(r,"/new"),render:function(){return l.a.createElement(b.default,{localeKey:"itemType.add",freeContent:!0,disableModalPrompt:!0,onClose:function(){return a.push(r)}},l.a.createElement(ne,{itemType:Object(p.generateEmptyItemType)(),onSubmit:e.handleSubmit.bind(e)}))}}),l.a.createElement(mt.default,{path:"".concat(r,"/:itemTypeId"),component:xi})))))}}])&&Mi(n.prototype,r),a&&Mi(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pi,"propTypes",{location:a.a.object.isRequired,dispatch:a.a.func.isRequired,itemTypes:a.a.array,other:a.a.array,match:a.a.object.isRequired,history:a.a.object.isRequired,maintenanceMode:a.a.bool}),Si=Ni))||Si},3066:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(2),o=n(124),l=n(55),c=n(0),s=n.n(c),u=n(5),m=n(60);function d(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(fetch("https://graphql.datocms.com/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer a95d656d1c80509f18a1f17d2cf2e4"},body:JSON.stringify({query:e,variables:t})}));case 2:return n=r.sent,r.abrupt("return",n.json());case 4:case"end":return r.stop()}}))}function f(e){return d("\n    query fetchPlugins($name: String!) {\n      plugin(filter: {packageName: {eq: $name}}) {\n        title\n        description\n        packageName\n        pluginType { code }\n        fieldTypes { code }\n        entryPoint\n        parameters\n        previewImage { url }\n        version\n        homepage\n      }\n    }\n    ",{name:e})}var p,b,y,h=n(29),_=n(157),v=n(10),g=n(6),E=n(347);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P,N,x,T,R,F,M=Object(g.connect)()((y=b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,k(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e,t,n,r,a,i,o,l,c;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=this.props,t=e.dispatch,n=e.history,r=e.match.params,s.prev=1,s.next=4,regeneratorRuntime.awrap(f(r.packageName));case 4:return a=s.sent,i=a.data.plugin,(o=Object(_.generateEmptyPlugin)()).attributes.name=i.title,o.attributes.description=i.description,o.attributes.plugin_type=i.pluginType.code,o.attributes.url=i.entryPoint,o.attributes.field_types=i.fieldTypes.map((function(e){return e.code})),o.attributes.parameter_definitions=i.parameters,o.attributes.package_name=i.packageName,o.attributes.package_version=i.version,s.next=17,regeneratorRuntime.awrap(t(Object(E.create)(o)));case 17:l=s.sent,c=l.data.id,t(Object(v.notice)("admin.plugin.create.success")),n.push("/admin/plugins/".concat(c,"/edit")),s.next=26;break;case 23:s.prev=23,s.t0=s.catch(1),t(Object(v.alertResponseFailure)(s.t0,"admin.plugin.create.failure"));case 26:case"end":return s.stop()}}),null,this,[[1,23]])}},{key:"render",value:function(){var e=this.props.history;return s.a.createElement(m.default,{localeKey:"plugin.install",onClose:function(){return e.push("/admin/plugins")}},s.a.createElement("div",{className:"NetlifySettings__linkedStep__loading"},s.a.createElement(h.default,{size:80})))}}])&&O(n.prototype,r),a&&O(n,a),t}(u.a),P=b,N="propTypes",x={match:a.a.object.isRequired,dispatch:a.a.func.isRequired,history:a.a.object.isRequired},N in P?Object.defineProperty(P,N,{value:x,enumerable:!0,configurable:!0,writable:!0}):P[N]=x,p=y))||p,C=n(47),q=n(117),I=n.n(q),L=n(39),A=n(145),z=n.n(A),D=n(62),B=n.n(D),H=n(67),U=n(74),V=n.n(U),G=n(254),W=n(719),J=n(66),$=n(24),K=n(43),X=n.n(K),Q=n(304),Z=n(2293),Y=n(8);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe,le,ce,se=["boolean","date","date_time","float","integer","string","text","json","color","rich_text"],ue=Object(g.connect)((function(e,t){var n=t.newRecord,r=I()(t.plugin.attributes);r.parameter_definitions=JSON.stringify(r.parameter_definitions,null,2);var a={name:[B.a.required()],url:[B.a.required(),B.a.url()],field_types:[B.a.required(),B.a.minArrayLength(1)]};return n&&(a.parameter_definitions=[B.a.required(),B.a.json()]),{maintenanceMode:Object(Y.isMaintenanceModeActive)(e),form:t.newRecord?"newPlugin":"plugin",initialValues:r,validate:z()(a),onSubmit:function(e){var r=I()(t.plugin);return n?(r.attributes=X()(e,"parameters"),r.attributes.parameter_definitions=JSON.parse(e.parameter_definitions)):r.attributes=X()(e,["parameter_definitions","field_types","plugin_type"]),t.onSubmit(r)}}}))(T=Object(L.withForm)()((F=R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),re(this,ae(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,e),n=t,(r=[{key:"renderField",value:function(e,t){var n=t.required?{required:{}}:{};return s.a.createElement($.default,te({key:t.id,name:"parameters.".concat(t.id),label:t.label,hint:t.hint,required:t.required},Object(Q.a)({fieldType:t.type,appearance:Object(Z.d)(t.type),validators:n,disabled:e})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.maintenanceMode,r=t.formikBag.values,a=t.newRecord,i=t.plugin,o=[],l=[];function c(e){return e.forEach((function(e){if(!(e&&"object"===ee(e)&&e.id&&e.label&&se.includes(e.type)))throw new Error("invalid")})),e}if(r&&r.parameter_definitions)try{var u=JSON.parse(r.parameter_definitions);o=c(u.global),l=c(u.instance)}catch(e){}var m=["boolean","date","date_time","float","integer","string","text","lat_lon","json","seo","slug","link","links","video","color"].map((function(t){return{label:e.t("fieldType.".concat(t)),value:t}}));"field_addon"===r.plugin_type&&m.push({label:this.t("fieldType.rich_text"),value:"rich_text"});var d=["field_editor","field_addon","sidebar"].map((function(t){return{label:e.t("pluginType.".concat(t)),value:t}})),f=!i.attributes.package_name;return s.a.createElement(H.default,{disabled:n},f&&s.a.createElement($.default,{required:!0,name:"name",intlLabel:"plugin.name",type:"text",className:"form__input--large"}),f&&s.a.createElement($.default,{name:"description",intlLabel:"plugin.description",component:G.default}),f&&s.a.createElement($.default,{required:!0,name:"url",intlLabel:"plugin.url",intlHint:"plugin.url.hint",type:"text"}),f&&a&&s.a.createElement($.default,{name:"plugin_type",intlLabel:"plugin.pluginType",intlHint:"plugin.pluginType.hint",options:d,component:J.default}),f&&a&&s.a.createElement($.default,{required:!0,name:"field_types",intlLabel:"plugin.field_types",intlHint:"plugin.field_types.hint",multiple:!0,options:m,component:J.default,shouldUpdate:function(){return!0}}),a&&s.a.createElement($.default,{name:"parameter_definitions",intlLabel:"plugin.parameter_definitions",intlHint:"plugin.parameter_definitions.hint",disabled:!a,component:W.a}),a&&o.length>0&&s.a.createElement("div",{className:"PluginForm__preview"},s.a.createElement("div",{className:"PluginForm__preview__title"},"Global parameters preview"),o.map(this.renderField.bind(this,!0))),a&&l.length>0&&s.a.createElement("div",{className:"PluginForm__preview"},s.a.createElement("div",{className:"PluginForm__preview__title"},"Instance parameters preview"),l.map(this.renderField.bind(this,!0))),!a&&i.attributes.parameter_definitions.global.length>0&&i.attributes.parameter_definitions.global.map(this.renderField.bind(this,!1)),s.a.createElement(V.a,{intlLabel:"plugin.button"}))}}])&&ne(n.prototype,r),a&&ne(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(R,"propTypes",{plugin:a.a.object.isRequired,newRecord:a.a.bool,formikBag:a.a.object.isRequired,maintenanceMode:a.a.bool}),T=F))||T)||T,me=n(77),de=n(282),fe=n(2355),pe=n(37),be=n(16),ye=n.n(be),he=n(96);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oe,je,ke,Se=Object(g.connect)((function(e,t){var n=e.plugins[t.match.params.pluginId],r=Object.values(e.fields).filter((function(e){return!!n&&(["field_editor","sidebar"].includes(n.attributes.plugin_type)?e.attributes.appearance.editor===n.id:"field_addon"===n.attributes.plugin_type&&e.attributes.appearance.addons.some((function(e){return e.id===n.id})))}));return{plugin:n,fieldsWithPlugin:r,itemTypes:e.itemTypes}}))((ce=le=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ge(this,Ee(t).call(this,e))).state={datoPlugin:null},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.fetchInfo(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.match.params;e.match.params.pluginId!==t.pluginId&&this.fetchInfo(e)}},{key:"fetchInfo",value:function(e){var t,n,r,a,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.dispatch,n=e.match.params,o.next=3,regeneratorRuntime.awrap(t(Object(E.fetch)(n.pluginId)));case 3:if(r=o.sent,!(a=r.data).attributes.package_name){o.next=10;break}return o.next=8,regeneratorRuntime.awrap(f(a.attributes.package_name));case 8:i=o.sent,this.setState({datoPlugin:i.data.plugin});case 10:case"end":return o.stop()}}),null,this)}},{key:"handleSubmit",value:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props.dispatch,r.prev=1,delete(n=I()(e)).attributes.package_name,delete n.attributes.package_version,r.next=7,regeneratorRuntime.awrap(t(Object(E.update)(e.id,n)));case 7:t(Object(v.notice)("admin.plugin.update.success")),r.next=14;break;case 10:throw r.prev=10,r.t0=r.catch(1),t(Object(v.alertResponseFailure)(r.t0,"admin.plugin.update.failure")),Object(me.default)(r.t0);case 14:case"end":return r.stop()}}),null,this,[[1,10]])}},{key:"handleUpdate",value:function(){var e,t,n,r,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.dispatch,n=e.plugin,i.prev=1,r=this.state.datoPlugin,(a=I()(n)).attributes={name:r.title,description:r.description,parameters:n.attributes.parameters,package_version:r.version,url:r.entryPoint},i.next=7,regeneratorRuntime.awrap(t(Object(E.update)(n.id,a)));case 7:t(Object(v.notice)("admin.plugin.update.success")),i.next=14;break;case 10:throw i.prev=10,i.t0=i.catch(1),t(Object(v.alertResponseFailure)(i.t0,"admin.plugin.update.failure")),Object(me.default)(i.t0);case 14:case"end":return i.stop()}}),null,this,[[1,10]])}},{key:"handleDestroy",value:function(e){var t,n,r,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,r=t.plugin,a=t.history,e.preventDefault(),i.next=4,regeneratorRuntime.awrap(Object(C.showConfirm)("messages.confirm.destroyPlugin"));case 4:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return i.prev=6,i.next=9,regeneratorRuntime.awrap(n(Object(E.destroy)(r.id)));case 9:n(Object(v.notice)("admin.plugin.destroy.success")),a.push("/admin/plugins"),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(6),n(Object(v.alertResponseFailure)(i.t0,"admin.plugin.destroy.failure"));case 16:case"end":return i.stop()}}),null,this,[[6,13]])}},{key:"renderField",value:function(e){var t=this.props.itemTypes,n=[s.a.createElement("span",{key:"desc"},s.a.createElement(i.FormattedMessage,{id:"fieldType.".concat(e.attributes.field_type)}))],r=fe.a.find((function(t){return t.types.includes(e.attributes.field_type)})),a=t[e.relationships.item_type.data.id],o=fe.b[r.name];return s.a.createElement(pe.default,{key:e.id,className:"FieldRow",to:"/admin/item_types/".concat(a.id)},s.a.createElement("div",{className:"FieldRow__row"},s.a.createElement("div",{className:"FieldRow__body"},s.a.createElement("div",{className:"FieldRow__icon"},s.a.createElement(o,null)),s.a.createElement("div",{className:"FieldRow__info"},s.a.createElement("div",null,s.a.createElement("span",{className:"FieldRow__label"},a.attributes.name," >",e.attributes.label,e.attributes.validators.required&&"*"),s.a.createElement("span",{className:"FieldRow__api"},a.attributes.api_key,".",e.attributes.api_key),s.a.createElement("span",{className:"FieldRow__item-type"},n))))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.plugin,r=t.fieldsWithPlugin,a=this.state.datoPlugin;if(!n)return null;var o=Object(de.a)(n.attributes.field_types.map((function(t){return e.t("fieldType.".concat(t))})),", "," and ").join(""),l=Object(de.a)(n.attributes.field_types.map((function(t){return e.t("fieldType.".concat(t))})),", "," or ").join(""),c=a&&n.attributes.package_version!==a.version&&a.pluginType.code===n.attributes.plugin_type&&ye()(a.fieldTypes.map((function(e){return e.code})),n.attributes.field_types)&&ye()(a.parameters,n.attributes.parameter_definitions),u=!n.attributes.package_name||n.attributes.parameter_definitions.global.length>0;return s.a.createElement("div",{className:"Page"},s.a.createElement("div",{className:"Page__inner"},s.a.createElement("div",{className:"Page__header"},s.a.createElement("div",{className:"Page__title"},n.attributes.name),n.attributes.package_version&&s.a.createElement("div",{className:"Page__code"},"v",n.attributes.package_version),s.a.createElement("div",{className:"Page__space"}),s.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},s.a.createElement(he.default,null),s.a.createElement("span",null,s.a.createElement(i.FormattedMessage,{id:"form.editPlugin.uninstall"})))),c&&s.a.createElement("div",{className:"PluginForm__update"},s.a.createElement("div",{className:"PluginForm__update__body"},s.a.createElement(i.FormattedHTMLMessage,{id:"form.editPlugin.newVersion",values:{pluginName:a.title}})," "),s.a.createElement("button",{type:"button",onClick:this.handleUpdate.bind(this),className:"button button--white button--small"},s.a.createElement(i.FormattedMessage,{id:"form.editPlugin.update",values:{version:a.version}}))),s.a.createElement("div",{className:"beta space--bottom-2"},s.a.createElement(i.FormattedMessage,{id:"form.editPlugin.info"})),s.a.createElement("div",{className:"PluginForm__info"},s.a.createElement("div",{className:"PluginForm__info__right"},n.attributes.description&&s.a.createElement("div",{className:"PluginForm__info__description"},n.attributes.description),s.a.createElement("div",{className:"PluginForm__info__plugin-type"},s.a.createElement("strong",null,s.a.createElement(i.FormattedMessage,{id:"form.editPlugin.pluginType"})),"",s.a.createElement(i.FormattedMessage,{id:"pluginType.".concat(n.attributes.plugin_type)}),"",s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.datocms.com/docs/guides/building-plugins#types-of-plugins"},s.a.createElement("i",{className:"icon--question"}))),s.a.createElement("div",{className:"PluginForm__info__field-types"},s.a.createElement(i.FormattedHTMLMessage,{id:"form.editPlugin.installableOn",values:{fieldTypes:o}})," ",s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.datocms.com/docs/guides/building-plugins/install#assigning-a-plugin-to-a-field"},s.a.createElement("i",{className:"icon--question"}))),a&&a.homepage&&s.a.createElement("div",{className:"PluginForm__info__homepage"},s.a.createElement("a",{href:a.homepage,rel:"noopener noreferrer",target:"_blank"},s.a.createElement(i.FormattedMessage,{id:"form.editPlugin.visit"})))),a&&a.previewImage&&s.a.createElement("div",{className:"PluginForm__info__left"},s.a.createElement("div",{className:"PluginForm__info__preview"},s.a.createElement("img",{src:a.previewImage.url,alt:"Preview"})))),s.a.createElement("div",{className:"beta space--bottom-2"},s.a.createElement(i.FormattedMessage,{id:"form.editPlugin.fieldsUsing"})),s.a.createElement("div",{className:"PluginForm__fields"},0===r.length?s.a.createElement("div",{className:"PluginForm__install"},s.a.createElement("div",{className:"PluginForm__fields__empty"},s.a.createElement(i.FormattedMessage,{id:"form.editPlugin.noFieldsUsing"})),s.a.createElement(i.FormattedHTMLMessage,{id:"instructions.pluginTypes.".concat(n.attributes.plugin_type),values:{fieldTypes:o,orFieldTypes:l}})):r.map(this.renderField.bind(this))),u&&s.a.createElement("div",null,s.a.createElement("div",{className:"beta space--bottom-2"},s.a.createElement(i.FormattedMessage,{id:"form.editPlugin.settings"})),s.a.createElement("div",{className:"Page__content"},s.a.createElement(ue,{plugin:n,onSubmit:this.handleSubmit.bind(this)})))))}}])&&ve(n.prototype,r),a&&ve(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(le,"propTypes",{dispatch:a.a.func.isRequired,plugin:a.a.object,match:a.a.object.isRequired,fieldsWithPlugin:a.a.array,itemTypes:a.a.object.isRequired,history:a.a.object.isRequired}),oe=ce))||oe,Pe=n(194),Ne=n(305),xe=n.n(Ne),Te=n(817),Re=n(814);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ce(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le,Ae,ze,De=Object(g.connect)((function(e){return{plugins:Object.values(e.plugins)}}))((ke=je=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ce(this,qe(t).call(this,e))).state={status:"loading",term:"",page:0,total:0,plugins:[],currentInstallation:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.search()}},{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"search",value:function(){var e,t,n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.state,t=e.term,n=e.page,this.setState({status:"loading"}),a.next=4,regeneratorRuntime.awrap(d("\n    query fetchPlugins($query: String!, $offset: IntType!, $limit: IntType!) {\n      plugins: allPlugins(\n        first: $limit,\n        skip: $offset,\n        orderBy: [installs_DESC],\n        filter: {\n          manuallyDeprecated: {eq: false},\n          OR: [\n            {title: {matches: {pattern: $query}}},\n            {description: {matches: {pattern: $query}}},\n            {packageName: {matches: {pattern: $query}}},\n            {readme: {matches: {pattern: $query}}},\n            {tagsCsv: {matches: {pattern: $query}}}\n          ]}\n      ) {\n        title\n        description\n        packageName\n        pluginType { code }\n        fieldTypes { code }\n        entryPoint\n        parameters\n        coverImage {\n          url\n        }\n        tags {\n          tag\n        }\n        author {\n          email\n          name\n        }\n        version\n        homepage\n      }\n      meta: _allPluginsMeta(\n        filter: {\n          manuallyDeprecated: {eq: false},\n          OR: [\n            {title: {matches: {pattern: $query}}},\n            {description: {matches: {pattern: $query}}},\n            {packageName: {matches: {pattern: $query}}},\n            {readme: {matches: {pattern: $query}}},\n            {tagsCsv: {matches: {pattern: $query}}}\n          ]}\n      ) {\n        count\n      }\n    }\n    ",{query:t,limit:6,offset:6*n}));case 4:r=a.sent,this.setState({status:"ready",plugins:r.data.plugins,total:r.data.meta.count});case 6:case"end":return a.stop()}}),null,this)}},{key:"handleSearch",value:function(e){var t=this;e.preventDefault(),this.setState({total:0},(function(){return t.search()}))}},{key:"handlePageChange",value:function(e){var t=this;this.setState({page:e},(function(){return t.search()}))}},{key:"handleAddKeyword",value:function(e){var t=this;this.setState({term:e},(function(){return t.search()}))}},{key:"handleInstall",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=this.props.onSubmit,t.preventDefault(),r={type:"plugin",attributes:{package_name:e.packageName}},this.setState({currentInstallation:e.packageName}),a.prev=4,a.next=7,regeneratorRuntime.awrap(n(r));case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(4),this.setState({currentInstallation:!1});case 12:case"end":return a.stop()}}),null,this,[[4,9]])}},{key:"renderPlugin",value:function(e){var t=this,n=this.state.currentInstallation,r=e.homepage||"https://www.npmjs.com/package/".concat(e.packageName),a=this.props.plugins,o=n===e.packageName;return s.a.createElement("div",{key:e.packageName,className:"PluginLibrary__plugin"},s.a.createElement("div",{className:"PluginLibrary__plugin__info"},s.a.createElement("div",{className:"PluginLibrary__plugin__title"},s.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},e.title),""),s.a.createElement("div",{className:"PluginLibrary__plugin__description"},xe()(e.description,100)),s.a.createElement("div",{className:"PluginLibrary__plugin__tags"},e.tags.map((function(e){return s.a.createElement("button",{type:"button",key:e.tag,onClick:t.handleAddKeyword.bind(t,e.tag)},"#",e.tag)}))),s.a.createElement("div",{className:"PluginLibrary__plugin__bottom"},s.a.createElement("span",{className:"PluginLibrary__plugin__publisher"},s.a.createElement("img",{src:Object(Re.a)(e.author.email,40,e.author.name),alt:e.author.name}),e.author.name),s.a.createElement("div",{className:"PluginLibrary__plugin__version"},"v",e.version),s.a.createElement("a",{className:"PluginLibrary__plugin__link",target:"_blank",rel:"noopener noreferrer",href:r},s.a.createElement(i.FormattedMessage,{id:"pluginLibrary.homepage"})))),s.a.createElement("div",{className:"PluginLibrary__plugin__install"},a.find((function(t){return t.attributes.package_name===e.packageName}))?s.a.createElement("span",{className:"button is-disabled"},s.a.createElement(i.FormattedMessage,{id:"pluginLibrary.installed"})):s.a.createElement("button",{type:"button",className:"button button--primary",disabled:!!n,onClick:this.handleInstall.bind(this,e)},o?s.a.createElement(i.FormattedMessage,{id:"pluginLibrary.installing"}):s.a.createElement(i.FormattedMessage,{id:"pluginLibrary.install"}))))}},{key:"render",value:function(){var e=this.state,t=e.status,n=e.term,r=e.total,a=e.plugins,o=e.page,l=r?this.t("pluginLibrary.search.multiple.placeholder",{total:r}):this.t("pluginLibrary.search.single.placeholder");return s.a.createElement("div",{className:"PluginLibrary"},s.a.createElement("form",{className:"PluginLibrary__search",onSubmit:this.handleSearch.bind(this)},s.a.createElement("div",{className:"PluginLibrary__search__input"},s.a.createElement("input",{type:"text",value:n,onChange:this.handleTermChange.bind(this),placeholder:l})),s.a.createElement("button",{type:"submit",className:"button"},s.a.createElement(i.FormattedMessage,{id:"pluginLibrary.search"}))),s.a.createElement("div",{className:"PluginLibrary__results"},0===a.length&&"loading"!==t?s.a.createElement("div",{className:"PluginLibrary__no-results"},"No results, bummer"):a.map(this.renderPlugin.bind(this)),"loading"===t&&s.a.createElement(h.default,{size:50})),s.a.createElement("div",{className:"PluginLibrary__footer"},s.a.createElement("div",{className:"PluginLibrary__footer__left"},r>0&&s.a.createElement(Te.a,{totalEntries:r,perPage:6,currentPage:o,onChange:this.handlePageChange.bind(this)})),s.a.createElement("div",{className:"PluginLibrary__footer__right"},s.a.createElement(i.FormattedHTMLMessage,{id:"pluginLibrary.createMore"})," ",s.a.createElement(pe.default,{to:"/admin/plugins/new-private"},s.a.createElement(i.FormattedMessage,{id:"pluginLibrary.createPrivate"})))))}}])&&Me(n.prototype,r),a&&Me(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(je,"propTypes",{onSubmit:a.a.func.isRequired,plugins:a.a.array.isRequired}),Oe=ke))||Oe,Be=n(69),He=n(2294),Ue=n.n(He);function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return Ke}));var Ke=Object(g.connect)((function(e){return{plugins:Object.values(e.plugins).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})),maintenanceMode:Object(Y.isMaintenanceModeActive)(e)}}))((ze=Ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),We(this,Je(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(e(Object(E.fetchAll)()));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"handleSubmit",value:function(e){var t,n,r,a,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,r=t.history,o.prev=1,o.next=4,regeneratorRuntime.awrap(n(Object(E.create)(e)));case 4:a=o.sent,i=a.data,n(Object(v.notice)("admin.plugin.create.success")),r.push("/admin/plugins/".concat(i.id,"/edit")),o.next=14;break;case 10:throw o.prev=10,o.t0=o.catch(1),n(Object(v.alertResponseFailure)(o.t0,"admin.plugin.create.failure")),Object(me.default)(o.t0);case 14:case"end":return o.stop()}}),null,this,[[1,10]])}},{key:"renderBlankSlate",value:function(){return s.a.createElement("div",{className:"Items__blank-slate"},s.a.createElement("div",{className:"Items__blank-slate__inner"},s.a.createElement("div",{className:"Items__blank-slate__title"},s.a.createElement(i.FormattedMessage,{id:"plugins.noPlugins.title"})),s.a.createElement("div",{className:"Items__blank-slate__description"},s.a.createElement(i.FormattedMessage,{id:"plugins.noPlugins.description"}))),s.a.createElement("div",{className:"Items__blank-slate__arrow"}))}},{key:"renderPlugin",value:function(e){return s.a.createElement(pe.default,{className:"ItemRow",activeClassName:"ItemRow--active",to:"/admin/plugins/".concat(e.id,"/edit"),key:e.id},s.a.createElement("div",{className:"ItemRow__item ItemRow__item--more-space"},s.a.createElement("div",{className:"ItemRow__item__inner"},s.a.createElement("div",{className:"ItemRow__item__content"},s.a.createElement("div",{className:"ItemRow__item__title ItemRow__item__title--bigger"},e.attributes.name,"",s.a.createElement("span",{className:"ItemRow__item__title__tag"},e.attributes.package_version?"v".concat(e.attributes.package_version):"Private plugin")),s.a.createElement("div",{className:"ItemRow__item__details"},s.a.createElement("p",null,xe()(e.attributes.description,100)))))))}},{key:"renderPlugins",value:function(){var e=this,t=this.props,n=t.plugins,r=t.match.url,a=t.history,c=t.maintenanceMode;return s.a.createElement("div",{className:"Items"},n.length>0?s.a.createElement("div",{className:"Items__items"},n.map(this.renderPlugin.bind(this))):this.renderBlankSlate(),!c&&s.a.createElement(pe.default,{to:"/admin/plugins/new",className:"Items__button"},s.a.createElement(Be.default,null)),s.a.createElement(o.g,null,s.a.createElement(l.default,{path:"".concat(r,"/new-private"),render:function(){return s.a.createElement(m.default,{localeKey:"plugin.createPrivate",wide:!0,disableModalPrompt:!0,onClose:function(){return a.push(r)}},s.a.createElement("div",{className:"grid grid--wide"},s.a.createElement("div",{className:"grid__item desk-4-12 NewPlugin__instructions"},s.a.createElement(i.FormattedHTMLMessage,{id:"instructions.plugins"})),s.a.createElement("div",{className:"grid__item desk-8-12"},s.a.createElement(ue,{newRecord:!0,plugin:Object(_.generateEmptyPlugin)(),onSubmit:e.handleSubmit.bind(e)}))))}}),s.a.createElement(l.default,{path:"".concat(r,"/new"),render:function(){return s.a.createElement(m.default,{localeKey:"pluginLibrary.title",wider:!0,onClose:function(){return a.push(r)}},s.a.createElement(De,{onSubmit:e.handleSubmit.bind(e)}))}})))}},{key:"render",value:function(){var e=this.props,t=e.plugins,n=e.match.url;return s.a.createElement(Ue.a,{subSplit:!0},s.a.createElement(Pe.default,{minSize:300,defaultSize:400,split:"vertical"},s.a.createElement("div",null,t?this.renderPlugins():s.a.createElement(h.default,{size:100})),s.a.createElement("div",null,s.a.createElement(o.g,null,s.a.createElement(l.default,{path:"".concat(n,"/install/:packageName"),component:M}),s.a.createElement(l.default,{path:"".concat(n,"/:pluginId/edit"),component:Se})))))}}])&&Ge(n.prototype,r),a&&Ge(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ae,"propTypes",{dispatch:a.a.func.isRequired,plugins:a.a.array,history:a.a.object.isRequired,match:a.a.object.isRequired,maintenanceMode:a.a.bool}),Le=ze))||Le},3067:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(2),o=n(0),l=n.n(o),c=n(124),s=n(55),u=n(5),m=n(47),d=n(6),f=n(117),p=n.n(f),b=n(718),y=n(39),h=n(66),_=n(24),v=n(3073),g=n(3065),E=n(69),w=n(96),O=n(13);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){var t=e.fields,n=e.field,r=e.index,a=e.filter;if(!e.sandboxEnvsEnabled&&["environment","environment_type"].includes(a.entityType))return null;var o=[{value:"primary",label:l.a.createElement(i.FormattedMessage,{id:"form.webhook.environmentType.primary"})},{value:"sandbox",label:l.a.createElement(i.FormattedMessage,{id:"form.webhook.environmentType.sandbox"})}];return l.a.createElement("div",{className:"field-array__item field-array__item--regular-margin",key:r},l.a.createElement("div",{className:"field-array__item__content"},"environment_type"===a.entityType?l.a.createElement(_.default,{name:"".concat(n,".entityIds"),intlLabel:"form.webhook.entityTypeIds.".concat(a.entityType),shouldUpdate:function(){return!0},intlPlaceholder:"form.webhook.entityTypeIds.".concat(a.entityType,".placeholder"),options:o,component:h.default}):l.a.createElement(_.default,{name:"".concat(n,".entityIds"),intlLabel:"form.webhook.entityTypeIds.".concat(a.entityType),shouldUpdate:function(){return!0},intlPlaceholder:"form.webhook.entityTypeIds.".concat(a.entityType,".placeholder"),intlHint:"form.webhook.entityTypeIds.".concat(a.entityType,".hint"),type:"text",className:"form__input--code"})),l.a.createElement("div",{className:"field-array__item__trash"},l.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),t.remove(r)}},l.a.createElement(w.default,null))))};T.propTypes={fields:a.a.object.isRequired,field:a.a.string.isRequired,filter:a.a.object.isRequired,index:a.a.number.isRequired,sandboxEnvsEnabled:a.a.bool};var R=function(e){var t=e.sandboxEnvsEnabled,n=e.fields,r=e.meta.error,a=e.options,i=n.map((function(e,t,n){return n.entityType})),o=a.filter((function(e){return t||!["environment","environment_type"].includes(e.value)})).filter((function(e){return!i.includes(e.value)}));return l.a.createElement("div",null,r,n.map((function(e,r,a){return l.a.createElement(T,{key:e,fields:n,field:e,index:r,filter:a,sandboxEnvsEnabled:t})})),o.length>0&&l.a.createElement("div",{className:"space--top-1"},l.a.createElement(O.Dropdown,{intlLabel:"form.webhook.conditions.add",icon:E.default},l.a.createElement(O.Menu,null,o.map((function(e){var t=e.label,r=e.value;return l.a.createElement(O.Option,{key:r,onClick:function(){n.push({entityType:r,entityIds:""})}},t)}))))))};R.propTypes={fields:a.a.object.isRequired,meta:a.a.object.isRequired,options:a.a.array.isRequired,sandboxEnvsEnabled:a.a.bool};var F,M,C,q=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),P(this,N(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),n=t,(r=[{key:"renderEvent",value:function(e,t,n){var r=this.props.sandboxEnvsEnabled,a=[{value:"item",label:this.t("event.record")},{value:"item_type",label:this.t("event.model")},{value:"upload",label:this.t("event.upload")},{value:"build_trigger",label:this.t("event.buildTrigger")}];r&&a.push({value:"environment",label:this.t("event.environment")});var i={itemType:[{value:"item_type",label:this.t("event.model.only")},{value:"environment",label:this.t("event.environment.only")},{value:"environment_type",label:this.t("event.environmentType.only")}],item:[{value:"item",label:this.t("event.record.only")},{value:"item_type",label:this.t("event.record.modelOnly")},{value:"environment",label:this.t("event.environment.only")},{value:"environment_type",label:this.t("event.environmentType.only")}],buildTrigger:[{value:"build_trigger",label:this.t("event.buildTrigger.only")}],environment:[{value:"environment",label:this.t("event.environment.only")},{value:"environment_type",label:this.t("event.environmentType.only")}]},o={item_type:[{value:"create",label:this.t("event.create"),filters:i.environment},{value:"update",label:this.t("event.update"),filters:i.itemType},{value:"delete",label:this.t("event.delete"),filters:i.itemType}],environment:[{value:"create",label:this.t("event.create")},{value:"update",label:this.t("event.update"),filters:i.environment},{value:"promote",label:this.t("event.promote"),filters:i.environment},{value:"delete",label:this.t("event.delete"),filters:i.environment}],item:[{value:"create",label:this.t("event.create"),filters:i.itemType},{value:"update",label:this.t("event.update"),filters:i.item},{value:"delete",label:this.t("event.delete"),filters:i.item},{value:"publish",label:this.t("event.publish"),filters:i.item},{value:"unpublish",label:this.t("event.unpublish"),filters:i.item}],upload:[{value:"create",label:this.t("event.create"),filters:i.environment},{value:"update",label:this.t("event.update"),filters:i.environment},{value:"delete",label:this.t("event.delete"),filters:i.environment}],build_trigger:[{value:"deploy_started",label:this.t("event.deployStarted"),filters:i.buildTrigger},{value:"deploy_succeeded",label:this.t("event.deploySucceeded"),filters:i.buildTrigger},{value:"deploy_failed",label:this.t("event.deployFailed"),filters:i.buildTrigger}]},c=this.props.fields,s=(n.eventTypes||[]).reduce((function(e,t){var r=o[n.entityType].find((function(e){return e.value===t}));return r&&r.filters?[].concat(k(e),[r.filters]):[].concat(k(e),[[]])}),[]),u=s.reduce((function(e,t){return Object(g.a)(e,t,"value")}),Object(v.a)(s)),m=u.length>0;return l.a.createElement("div",{className:"field-array__item field-array__item--align-top",key:t},l.a.createElement("div",{className:"field-array__item__content"},l.a.createElement("div",{className:"PluginForm__preview"},l.a.createElement(_.default,{name:"".concat(e,".entityType"),intlLabel:"form.webhook.entityOptions",clearable:!1,options:a,component:h.default}),l.a.createElement(_.default,{name:"".concat(e,".eventTypes"),intlLabel:"form.webhook.eventTypes",validate:function(e){return e?void 0:"Required"},shouldUpdate:function(){return!0},multiple:!0,options:o[n.entityType],component:h.default}),m&&l.a.createElement(y.FieldArray,{name:"".concat(e,".filters"),options:u,component:R,sandboxEnvsEnabled:r}))),l.a.createElement("div",{className:"field-array__item__trash"},l.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),c.remove(t)}},l.a.createElement(w.default,null))))}},{key:"render",value:function(){var e=this.props,t=e.fields,n=e.meta.error;return l.a.createElement("div",null,n,t.map(this.renderEvent.bind(this)),l.a.createElement("div",{className:"space--top-1"},l.a.createElement("a",{href:"#",className:"button button--tiny",onClick:function(e){e.preventDefault(),t.push({eventTypes:[],filters:[]})}},l.a.createElement(E.default,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.webhook.trigger.add"})))))}}])&&S(n.prototype,r),a&&S(n,a),t}(u.a);F=q,M="propTypes",C={fields:a.a.object.isRequired,meta:a.a.object.isRequired,sandboxEnvsEnabled:a.a.bool},M in F?Object.defineProperty(F,M,{value:C,enumerable:!0,configurable:!0,writable:!0}):F[M]=C;var I=n(67),L=n(74),A=n.n(L),z=n(169),D=n(719),B=n(145),H=n.n(B),U=n(62),V=n.n(U),G=n(8),W=n(1042),J=n.n(W),$=n(43),K=n.n($),X=n(1041);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(this,te(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(e(Object(X.fetch)("sandbox_environments")));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"render",value:function(){var e=this.props,t=e.formikBag.values,n=e.sandboxEnvsEnabled;return l.a.createElement(I.default,null,l.a.createElement(_.default,{name:"name",intlLabel:"form.webhook.name",type:"text",className:"form__input--large"}),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.webhook.httpSettings"}))),l.a.createElement(_.default,{name:"url",intlLabel:"form.webhook.url",type:"text"}),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"form.webhook.basicAuth"})),l.a.createElement("div",{className:"grid grid--middle grid--narrow"},l.a.createElement("div",{className:"grid__item desk-6-12"},l.a.createElement(_.default,{name:"http_basic_user",intlPlaceholder:"form.webhook.httpBasicUser",type:"text"})),l.a.createElement("div",{className:"grid__item desk-6-12"},l.a.createElement(_.default,{name:"http_basic_password",intlPlaceholder:"form.webhook.httpBasicPassword",type:"text"})))),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"form.webhook.customHeaders"})),l.a.createElement(y.FieldArray,{name:"headers",component:J.a}))),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.webhook.triggers"}))),l.a.createElement(y.FieldArray,{name:"events",component:q,sandboxEnvsEnabled:n})),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.webhook.body"}))),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__field"},l.a.createElement(_.default,{component:z.a,intlLabel:"form.webhook.custom_payload",name:"custom_payloadSwitch"})),t.custom_payloadSwitch&&l.a.createElement(_.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"custom_payload",intlHint:"form.webhook.custom_payload.hint",intlLabel:"form.webhook.custom_payload.label",intlDocs:"form.webhook.custom_payload.docs",docsHref:"https://www.datocms.com/docs/general-concepts/webhooks#customize-the-http-payload",className:"form__input--code",rows:"4",component:D.a}))),l.a.createElement(A.a,{intlLabel:"form.webhook.button"}))}}])&&Y(n.prototype,r),a&&Y(n,a),t}(u.a);re(ae,"propTypes",{formikBag:a.a.object.isRequired,dispatch:a.a.func.isRequired,sandboxEnvsEnabled:a.a.bool});var ie,oe,le,ce={form:"webhook",enableReinitialize:!0,validate:H()({name:[V.a.required()],url:[V.a.required(),V.a.url()],headers:W.validator,events:{entityType:[V.a.required()],eventTypes:[V.a.required(),V.a.minArrayLength(1)],filters:{entityType:[V.a.required()],entityIds:[V.a.required()]}},custom_payload:[V.a.requiredIf((function(e){return e.custom_payloadSwitch}))]})},se=Object(d.connect)((function(e,t){var n=t.webhook,r=Object(G.isSubscriptionLimitPositive)(e,"sandbox_environments"),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.attributes,{custom_payload:n.attributes.custom_payload||JSON.stringify({message:"{{event_type}} event triggered on {{entity_type}}!",entity_id:"{{#entity}}{{id}}{{/entity}}"},null,2),custom_payloadSwitch:!!n.attributes.custom_payload,events:n.attributes.events.map((function(e){return{entityType:e.entity_type,eventTypes:e.event_types,filters:(e.filters||[]).map((function(e){return{entityType:e.entity_type,entityIds:e.entity_ids.join(", ")}}))}})),headers:Object(W.deserialize)(n.attributes.headers)});return{sandboxEnvsEnabled:r,initialValues:a,onSubmit:function(e){var n=p()(t.webhook),a=p()(K()(e,["custom_payload","custom_payloadSwitch"]));return a.events=a.events.map((function(e){var t=(e.filters||[]).map((function(e){return{entity_type:e.entityType,entity_ids:"environment_type"===e.entityType?[e.entityIds]:e.entityIds.trim().split(/\s*,+\s*/)}}));return!["item","item_type","upload"].includes(e.entityType)||t.find((function(e){return"environment_type"===e.entity_type}))||r||t.push({entity_type:"environment_type",entity_ids:["primary"]}),{entity_type:e.entityType,event_types:e.eventTypes,filters:t}})),a.headers=Object(W.serialize)(a.headers),a.custom_payload=e.custom_payloadSwitch?e.custom_payload:null,n.attributes=a,t.onSubmit(n)}}}))(Object(y.withForm)(ce)(ae)),ue=n(10),me=n(77);function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return!t||"object"!==de(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he,_e,ve,ge=Object(d.connect)((function(e,t){return{webhook:e.webhooks[t.match.params.webhookId]}}))((le=oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pe(this,be(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e,t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=this.props,t=e.dispatch,n=e.match.params,r.next=4,regeneratorRuntime.awrap(t(Object(b.fetch)(n.webhookId)));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),this.setState((function(){throw r.t0}));case 9:case"end":return r.stop()}}),null,this,[[0,6]])}},{key:"handleSubmit",value:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props.dispatch,r.prev=1,n=p()(e),r.next=5,regeneratorRuntime.awrap(t(Object(b.update)(e.id,n)));case 5:t(Object(ue.notice)("admin.webhook.update.success")),r.next=12;break;case 8:throw r.prev=8,r.t0=r.catch(1),t(Object(ue.alertResponseFailure)(r.t0,"admin.webhook.update.failure")),Object(me.default)(r.t0);case 12:case"end":return r.stop()}}),null,this,[[1,8]])}},{key:"handleDestroy",value:function(e){var t,n,r,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,r=t.webhook,a=t.history,e.preventDefault(),i.next=4,regeneratorRuntime.awrap(Object(m.showConfirm)("messages.confirm.destroyWebhook"));case 4:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return i.prev=6,i.next=9,regeneratorRuntime.awrap(n(Object(b.destroy)(r.id)));case 9:n(Object(ue.notice)("admin.webhook.destroy.success")),a.push("/admin/webhooks"),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(6),n(Object(ue.alertResponseFailure)(i.t0,"admin.webhook.destroy.failure"));case 16:case"end":return i.stop()}}),null,this,[[6,13]])}},{key:"render",value:function(){var e=this.props.webhook;return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.editWebhookForm.title"})),l.a.createElement("div",{className:"Page__space"}),e&&l.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},l.a.createElement(w.default,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.editWebhookForm.delete"})))),l.a.createElement("div",{className:"Page__content"},e&&l.a.createElement(se,{webhook:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&fe(n.prototype,r),a&&fe(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(oe,"propTypes",{dispatch:a.a.func.isRequired,webhook:a.a.object,match:a.a.object.isRequired,history:a.a.object.isRequired}),ie=le))||ie,Ee=n(157);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pe,Ne,xe,Te=Object(d.connect)((function(e,t){return{webhook:e.webhooks[t.webhookId]}}))((ve=_e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),je(this,ke(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,e),n=t,(r=[{key:"handleSubmit",value:function(e){var t,n,r,a,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,r=t.history,o.prev=1,o.next=4,regeneratorRuntime.awrap(n(Object(b.create)(e)));case 4:a=o.sent,i=a.data,n(Object(ue.notice)("admin.webhook.create.success")),r.push("/admin/webhooks/".concat(i.id,"/edit")),o.next=14;break;case 10:throw o.prev=10,o.t0=o.catch(1),n(Object(ue.alertResponseFailure)(o.t0,"admin.webhook.create.failure")),Object(me.default)(o.t0,!0,["events"]);case 14:case"end":return o.stop()}}),null,this,[[1,10]])}},{key:"render",value:function(){var e=Object(Ee.generateEmptyWebhook)();return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.newWebhookForm.title"}))),l.a.createElement("div",{className:"Page__content"},l.a.createElement(se,{webhook:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&Oe(n.prototype,r),a&&Oe(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_e,"propTypes",{dispatch:a.a.func.isRequired,history:a.a.object.isRequired}),he=ve))||he,Re=n(37),Fe=n(194),Me=n(29);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return ze}));var ze=Object(d.connect)((function(e){return{webhooks:Object.values(e.webhooks).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})),canManageWebhooks:Object(G.getCurrentRole)(e).attributes.can_manage_webhooks}}))((xe=Ne=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ie(this,Le(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(e(Object(b.fetchAll)()));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"renderWebhook",value:function(e){return l.a.createElement(Re.default,{className:"ItemRow",activeClassName:"ItemRow--active",to:"/admin/webhooks/".concat(e.id,"/edit"),key:e.id},l.a.createElement("div",{className:"ItemRow__item"},l.a.createElement("div",{className:"ItemRow__item__inner"},l.a.createElement("div",{className:"ItemRow__item__content"},l.a.createElement("div",{className:"ItemRow__item__title"},e.attributes.name)))))}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"Items__blank-slate"},l.a.createElement("div",{className:"Items__blank-slate__inner"},l.a.createElement("div",{className:"Items__blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.webhook.noWebhooks.title"})),l.a.createElement("div",{className:"Items__blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"admin.webhook.noWebhooks.description"}))),l.a.createElement("div",{className:"Items__blank-slate__arrow"}))}},{key:"renderWebhooks",value:function(){var e=this.props.webhooks;return l.a.createElement("div",{className:"Items"},e.length>0?l.a.createElement("div",{className:"Items__items"},e.map(this.renderWebhook.bind(this))):this.renderBlankSlate(),l.a.createElement(Re.default,{className:"Items__button",to:"/admin/webhooks/new"},l.a.createElement(E.default,null)))}},{key:"render",value:function(){var e=this.props,t=e.canManageWebhooks,n=e.children,r=e.webhooks,a=e.match.url;return t?l.a.createElement(Fe.default,{minSize:300,defaultSize:400,split:"vertical"},l.a.createElement("div",null,r?this.renderWebhooks():l.a.createElement(Me.default,{size:100})),l.a.createElement("div",null,l.a.createElement(c.g,null,l.a.createElement(s.default,{path:"".concat(a,"/new"),component:Te}),l.a.createElement(s.default,{path:"".concat(a,"/:webhookId/edit"),component:ge})))):l.a.createElement("div",{className:"Dashboard"},n)}}])&&qe(n.prototype,r),a&&qe(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ne,"propTypes",{dispatch:a.a.func.isRequired,webhooks:a.a.array,canManageWebhooks:a.a.bool,children:a.a.element,match:a.a.object.isRequired}),Pe=xe))||Pe},3069:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(2),o=n(0),l=n.n(o),c=n(5),s=n(6),u=n(37),m=n(1043),d=n(194),f=n(29),p=n(8),b=n(124),y=n(55),h=n(47),_=n(117),v=n.n(_),g=n(145),E=n.n(g),w=n(62),O=n.n(w),j=n(39),k=n(67),S=n(66),P=n(169),N=n(74),x=n.n(N),T=n(24),R=n(43),F=n.n(R),M=n(69),C=n(96),q=n(1045),I=n(148),L=n(13),A=n(267),z=n(266),D=n(1049),B=n.n(D),H=n(1055),U=n.n(H),V=n(1041),G=n(579),W=n.n(G);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Q=function(e){var t=e.title,n=e.children,r=e.initiallyOpen,a=X(Object(o.useState)(r),2),i=a[0],c=a[1];return l.a.createElement("div",{className:"Page__pane"},l.a.createElement("div",{className:"Page__pane__header",onClick:function(){return c((function(e){return!e}))}},l.a.createElement("div",{className:"Page__pane__header__title"},t),l.a.createElement("div",{className:"Page__pane__header__chevron"},open?l.a.createElement(A.default,null):l.a.createElement(z.default,null))),n(i))};Q.propTypes={title:a.a.string.isRequired,children:a.a.node.isRequired,initiallyOpen:a.a.bool};var Z=function(e){var t=e.labelPrefix,n=e.positive,r=e.fields,a=e.buildTriggerOptions;return r.items.some((function(e){return e.positive===n}))?l.a.createElement("div",{className:"form__field space--bottom-1"},l.a.createElement("div",{className:"form__label space--bottom-1"},l.a.createElement(i.FormattedMessage,{id:"".concat(t,".").concat(n?"positive":"negative")})),r.map((function(e,t){return l.a.createElement("div",{className:"field-array__item",key:e},l.a.createElement("div",{className:"field-array__item__content"},l.a.createElement(T.default,{name:"".concat(e,".build_trigger"),showLabel:!1,clearable:!1,options:a,component:S.default})),l.a.createElement("div",{className:"field-array__item__trash"},l.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),r.remove(t)}},l.a.createElement(C.default,null))))}),(function(e){return e.positive===n}))):null};Z.propTypes={buildTriggerOptions:a.a.array.isRequired,fields:a.a.object.isRequired,positive:a.a.bool,labelPrefix:a.a.string.isRequired};var Y=function(e){var t=e.buildTriggers,n=e.fields,r=e.labelPrefix,a=e.meta.error,o=[{value:"all",label:l.a.createElement(i.FormattedMessage,{id:"role.canPublish.all"})}].concat(t.map((function(e){return{value:e.id,label:e.attributes.name}})));return l.a.createElement(l.a.Fragment,null,a,0===n.items.length&&l.a.createElement("div",{className:"form__label space--bottom-1"},l.a.createElement(i.FormattedMessage,{id:"".concat(r,".noRules")})),l.a.createElement(Z,{labelPrefix:r,positive:!0,fields:n,buildTriggerOptions:o}),l.a.createElement(Z,{labelPrefix:r,positive:!1,fields:n,buildTriggerOptions:o}),l.a.createElement(L.Dropdown,{intlLabel:"role.form.addRule",icon:M.default},l.a.createElement(L.Menu,null,l.a.createElement(L.Option,{onClick:function(){n.push({build_trigger:null,positive:!0})}},l.a.createElement(i.FormattedMessage,{id:"role.addPositive"})),l.a.createElement(L.Option,{disabled:0===n.items.length,onClick:function(){n.push({build_trigger:null,positive:!1})}},l.a.createElement(i.FormattedMessage,{id:"role.addNegative"})))))};Y.propTypes={buildTriggers:a.a.array.isRequired,fields:a.a.object.isRequired,meta:a.a.object.isRequired,labelPrefix:a.a.string.isRequired};var ee=function(e){var t=e.fields,n=e.labelPrefix,r=e.positive,a=e.itemTypes,o=e.itemLockingEnabled;if(!t.items.some((function(e){return e.positive===r})))return null;var c=[{label:l.a.createElement(i.FormattedMessage,{id:"role.select.action.".concat(r?"all":"none")}),value:"all"},{label:l.a.createElement(i.FormattedMessage,{id:"role.select.action.read"}),value:"read"},{label:l.a.createElement(i.FormattedMessage,{id:"role.select.action.duplicate"}),value:"create"},{label:l.a.createElement(i.FormattedMessage,{id:"role.select.action.update"}),value:"update"},{label:l.a.createElement(i.FormattedMessage,{id:"role.select.action.unpublish"}),value:"publish"},{label:l.a.createElement(i.FormattedMessage,{id:"role.select.action.delete"}),value:"delete"},{label:l.a.createElement(i.FormattedMessage,{id:"role.select.action.editCreator"}),value:"edit_creator"},o&&{label:l.a.createElement(i.FormattedMessage,{id:"role.select.action.takeOver"}),value:"take_over"}].filter((function(e){return e})),s=[{value:"all",label:l.a.createElement(i.FormattedMessage,{id:"role.select.model.".concat(r?"all":"none")})}].concat(a.map((function(e){return{value:e.id,label:e.attributes.name}}))),u=[{label:l.a.createElement(i.FormattedMessage,{id:"role.select.creator.".concat(r?"anyone":"negativeAnyone")}),value:"anyone"},{label:l.a.createElement(i.FormattedMessage,{id:"role.select.creator.".concat(r?"self":"negativeSelf")}),value:"self"},{label:l.a.createElement(i.FormattedMessage,{id:"role.select.creator.".concat(r?"role":"negativeRole")}),value:"role"}];return l.a.createElement("div",{className:"form__field space--bottom-1"},l.a.createElement("div",{className:"form__label space--bottom-1"},l.a.createElement(i.FormattedMessage,{id:"".concat(n,".").concat(r?"positive":"negative")})),t.map((function(e,n,r){return l.a.createElement("div",{className:"field-array__item",key:e},l.a.createElement("div",{className:"field-array__item__content"},l.a.createElement("div",{className:"grid grid--middle grid--narrow"},l.a.createElement("div",{className:"grid__item desk-4-12"},l.a.createElement(T.default,{name:"".concat(e,".action"),showLabel:!1,clearable:!1,options:c,component:S.default})),l.a.createElement("div",{className:"grid__item desk-4-12"},l.a.createElement(T.default,{name:"".concat(e,".item_type"),clearable:!1,showLabel:!1,options:s,shouldUpdate:function(){return!0},component:S.default})),r&&"create"!==r.action&&l.a.createElement("div",{className:"grid__item desk-4-12"},l.a.createElement(T.default,{name:"".concat(e,".on_creator"),clearable:!1,showLabel:!1,options:u,component:S.default})))),l.a.createElement("div",{className:"field-array__item__trash"},l.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),t.remove(n)}},l.a.createElement(C.default,null))))}),(function(e){return e.positive===r})))};ee.propTypes={fields:a.a.object.isRequired,labelPrefix:a.a.string.isRequired,positive:a.a.bool,itemTypes:a.a.array.isRequired,itemLockingEnabled:a.a.bool};var te=function(e){var t=e.environment,n=e.fields,r=e.labelPrefix,a=e.itemLockingEnabled,c=e.meta.error,u=Object(s.useSelector)((function(e){return e.session.bearerToken})),m=X(Object(o.useState)([]),2),d=m[0],f=m[1];return Object(o.useEffect)((function(){var e;regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,regeneratorRuntime.awrap(Object(q.get)("".concat(I.default.apiBaseUrl,"/item-types"),{headers:{"X-Site-Domain":localStorage.getItem("domain")||window.location.host.replace(/:[0-9]+$/,""),"Content-Type":"application/json",Accept:"application/vnd.api+json","X-Api-Version":"3","X-Environment":t,Authorization:"Bearer ".concat(u)}}));case 3:e=n.sent,f(e.data.filter((function(e){return!e.attributes.modular_block})).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)}))),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),f((function(){throw n.t0}));case 10:case"end":return n.stop()}}),null,null,[[0,7]])}),[]),l.a.createElement(l.a.Fragment,null,c,0===n.items.length&&l.a.createElement("div",{className:"form__label space--bottom-1"},l.a.createElement(i.FormattedMessage,{id:"".concat(r,".noRules")})),l.a.createElement(ee,{labelPrefix:r,positive:!0,fields:n,itemTypes:d,itemLockingEnabled:a}),l.a.createElement(ee,{labelPrefix:r,positive:!1,fields:n,itemTypes:d,itemLockingEnabled:a}),l.a.createElement(L.Dropdown,{intlLabel:"role.form.addRule",icon:M.default},l.a.createElement(L.Menu,null,l.a.createElement(L.Option,{onClick:function(){n.push({item_type:null,action:null,on_creator:null,positive:!0})}},l.a.createElement(i.FormattedMessage,{id:"role.addPositive"})),l.a.createElement(L.Option,{disabled:0===n.items.length,onClick:function(){n.push({item_type:null,action:null,positive:!1,on_creator:null})}},l.a.createElement(i.FormattedMessage,{id:"role.addNegative"})))))};function ne(e){var t=e.itemLockingEnabled,n=e.buildTriggers,r=e.environments,a=Object(s.useDispatch)();W()((function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(a(Object(V.fetch)("sandbox_environments")));case 2:case"end":return e.stop()}}))}),[]);var o=Object(s.useSelector)((function(e){return Object(p.isSubscriptionLimitPositive)(e,"sandbox_environments")})),c=[{value:"primary_only",label:l.a.createElement(i.FormattedMessage,{id:"role.environmentsAccess.primaryOnly"})},{value:"sandbox_only",label:l.a.createElement(i.FormattedMessage,{id:"role.environmentsAccess.sandboxOnly"})},{value:"all",label:l.a.createElement(i.FormattedMessage,{id:"role.environmentsAccess.all"})}];return l.a.createElement(k.default,null,l.a.createElement(T.default,{name:"name",intlLabel:"role.name",type:"text",className:"form__input--large"}),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"role.admin"}))),l.a.createElement(T.default,{name:"can_edit_site",intlLabel:"role.canEditSite",component:P.a}),l.a.createElement(T.default,{name:"can_manage_environments",intlLabel:"role.canManageEnvironments",component:P.a}),l.a.createElement(T.default,{name:"can_manage_users",intlLabel:"role.canManageUsers",component:P.a}),l.a.createElement(T.default,{name:"can_manage_webhooks",intlLabel:"role.canManageWebhooks",component:P.a}),l.a.createElement(T.default,{name:"can_manage_access_tokens",intlLabel:"role.canManageAccessTokens",component:P.a}),l.a.createElement(T.default,{name:"can_manage_build_triggers",intlLabel:"role.canManageBuildTriggers",component:P.a}),l.a.createElement(T.default,{name:"can_manage_sso",intlLabel:"role.canManageSso",component:P.a}),l.a.createElement(T.default,{name:"can_manage_shared_filters",intlLabel:"role.canManageSharedFilters",component:P.a}),l.a.createElement(T.default,{name:"can_perform_site_search",intlLabel:"role.canPerformSiteSearch",component:P.a})),o&&l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"role.accessLevel"}))),l.a.createElement(T.default,{name:"environments_access",intlLabel:"role.environmentsAccess",clearable:!1,options:c,component:S.default})),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"role.environment"}))),l.a.createElement("div",{className:"form__label space--bottom-2"},l.a.createElement(i.FormattedMessage,{id:"role.environment.description"})),l.a.createElement(T.default,{name:"can_edit_favicon",intlLabel:"role.canEditFavicon",component:P.a}),l.a.createElement(T.default,{name:"can_edit_schema",intlLabel:"role.canEditSchema",component:P.a}),l.a.createElement(T.default,{name:"can_edit_environment",intlLabel:"role.canEditEnvironment",component:P.a})),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,"Content-level permissions")),1===r.length?l.a.createElement(j.FieldArray,{labelPrefix:"role.records",name:"item_type.".concat(r[0].id),environment:r[0].id,component:te,itemLockingEnabled:t}):r.sort(U.a).map((function(e){return l.a.createElement(Q,{key:e.id,title:l.a.createElement(i.FormattedMessage,{id:"role.recordsPermissionsOnEnvironment",values:{environment:l.a.createElement(B.a,{environment:e})}})},(function(n){return n&&l.a.createElement("div",{className:"Page__pane__content"},l.a.createElement(j.FieldArray,{labelPrefix:"role.records",name:"item_type.".concat(e.id),environment:e.id,component:te,itemLockingEnabled:t}))}))}))),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"role.publishing"}))),l.a.createElement(j.FieldArray,{labelPrefix:"role.buildTriggers",name:"build_trigger",buildTriggers:n,component:Y})),l.a.createElement(x.a,{intlLabel:"role.button"}))}te.propTypes={environment:a.a.string.isRequired,itemLockingEnabled:a.a.bool,fields:a.a.object.isRequired,meta:a.a.object.isRequired,labelPrefix:a.a.string.isRequired},ne.propTypes={buildTriggers:a.a.array.isRequired,environments:a.a.array.isRequired,itemLockingEnabled:a.a.bool};function re(e,t,n){return t.filter((function(t){return t.environment===e})).map((function(e){return $({},e,{item_type:e.item_type||"all",positive:n})}))}function ae(e,t){return Object.entries(e).map((function(e){var n=X(e,2),r=n[0];return(n[1]||[]).filter((function(e){return e.positive===t})).map((function(e){return $({},F()(e,["positive"]),{environment:r,item_type:"all"===e.item_type?null:e.item_type,on_creator:"create"===e.action?null:e.on_creator})}))})).flat()}function ie(e,t){return(e||[]).map((function(e){return $({},e,{positive:t,build_trigger:e.build_trigger||"all"})}))}function oe(e,t){return(e||[]).filter((function(e){return e.positive===t})).map((function(e){return $({},F()(e,t?["positive"]:["positive","on_creator"]),{build_trigger:"all"===e.build_trigger?null:e.build_trigger})}))}var le,ce,se,ue=Object(s.connect)((function(e,t){var n=Object.values(e.environments).filter((function(e){return"ready"===e.meta.status})),r=Object.values(e.buildTriggers).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})),a=$({},F()(t.role.attributes,["positive_item_type_permissions","negative_item_type_permissions","positive_build_trigger_permissions","negative_build_trigger_permissions"]),{item_type:n.reduce((function(e,n){return $({},e,K({},n.id,[].concat(re(n.id,t.role.attributes.positive_item_type_permissions,!0),re(n.id,t.role.attributes.negative_item_type_permissions,!1))))}),{}),build_trigger:[].concat(ie(t.role.attributes.positive_build_trigger_permissions,!0),ie(t.role.attributes.negative_build_trigger_permissions,!1))}),i={name:[O.a.required()],item_type:n.reduce((function(e,t){return $({},e,K({},t.id,{action:[O.a.required()],item_type:[O.a.required()],on_creator:[O.a.requiredIf((function(e){return"create"!==e.action}))]}))}),{}),build_trigger:{build_trigger:[O.a.required()]}};return{enableReinitialize:!0,validate:E()(i),initialValues:a,buildTriggers:r,itemLockingEnabled:Object(p.isItemLockingEnabled)(e),environments:n,onSubmit:function(e){var n=F()(e,["item_type","build_trigger"]),r=v()(t.role);return r.attributes=Object.assign(n,{positive_item_type_permissions:ae(e.item_type,!0),negative_item_type_permissions:ae(e.item_type,!1),positive_build_trigger_permissions:oe(e.build_trigger,!0),negative_build_trigger_permissions:oe(e.build_trigger,!1)}),t.onSubmit(r)}}}))(Object(j.withForm)({form:"role"})(ne)),me=n(10),de=n(77);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e,ve,ge,Ee,we,Oe,je=Object(s.connect)((function(e,t){return{role:e.roles[t.match.params.roleId]}}))((se=ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),be(this,ye(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e,t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=this.props,t=e.dispatch,n=e.match.params,r.next=4,regeneratorRuntime.awrap(t(Object(m.fetch)(n.roleId)));case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),this.setState((function(){throw r.t0}));case 9:case"end":return r.stop()}}),null,this,[[0,6]])}},{key:"handleSubmit",value:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props.dispatch,r.prev=1,n=v()(e),r.next=5,regeneratorRuntime.awrap(t(Object(m.update)(e.id,n)));case 5:t(Object(me.notice)("editor.role.update.success")),r.next=12;break;case 8:throw r.prev=8,r.t0=r.catch(1),t(Object(me.alertResponseFailure)(r.t0,"editor.role.update.failure")),Object(de.default)(r.t0);case 12:case"end":return r.stop()}}),null,this,[[1,8]])}},{key:"handleDestroy",value:function(e){var t,n,r,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,r=t.role,a=t.history,e.preventDefault(),i.next=4,regeneratorRuntime.awrap(Object(h.showConfirm)("messages.confirm.destroyRole"));case 4:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return i.prev=6,i.next=9,regeneratorRuntime.awrap(n(Object(m.destroy)(r.id)));case 9:n(Object(me.notice)("editor.role.destroy.success")),a.push("/admin/roles"),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(6),n(Object(me.alertResponseFailure)(i.t0,"editor.role.destroy.failure"));case 16:case"end":return i.stop()}}),null,this,[[6,13]])}},{key:"render",value:function(){var e=this.props.role;return l.a.createElement("div",{className:"Page Page--large"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.editRoleForm.title"})),l.a.createElement("div",{className:"Page__space"}),e&&l.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},l.a.createElement(C.default,null),l.a.createElement(i.FormattedMessage,{id:"form.editRoleForm.delete"}))),l.a.createElement("div",{className:"Page__content"},e&&l.a.createElement(ue,{role:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&pe(n.prototype,r),a&&pe(n,a),t}(c.a),_e=ce,ve="propTypes",ge={dispatch:a.a.func.isRequired,role:a.a.object,match:a.a.object.isRequired,history:a.a.object.isRequired},ve in _e?Object.defineProperty(_e,ve,{value:ge,enumerable:!0,configurable:!0,writable:!0}):_e[ve]=ge,le=se))||le,ke=n(157);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re,Fe,Me,Ce=Object(s.connect)((function(e,t){var n=e.roles[t.roleId],r=Object.values(e.environments).find((function(e){return e.meta.primary}));return{role:n,primaryEnvironmentId:r&&r.id}}))((Oe=we=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ne(this,xe(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,e),n=t,(r=[{key:"handleSubmit",value:function(e){var t,n,r,a,i,o;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=this.props,n=t.dispatch,r=t.history,l.prev=1,a=v()(e),l.next=5,regeneratorRuntime.awrap(n(Object(m.create)(a)));case 5:i=l.sent,o=i.data,n(Object(me.notice)("editor.role.create.success")),r.push("/admin/roles/".concat(o.id,"/edit")),l.next=15;break;case 11:throw l.prev=11,l.t0=l.catch(1),n(Object(me.alertResponseFailure)(l.t0,"editor.role.create.failure")),Object(de.default)(l.t0);case 15:case"end":return l.stop()}}),null,this,[[1,11]])}},{key:"render",value:function(){var e=this.props.primaryEnvironmentId,t=Object(ke.generateEmptyRole)(e);return l.a.createElement("div",{className:"Page Page--large"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.newRoleForm.title"}))),l.a.createElement("div",{className:"Page__content"},l.a.createElement(ue,{role:t,onSubmit:this.handleSubmit.bind(this)}))))}}])&&Pe(n.prototype,r),a&&Pe(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(we,"propTypes",{dispatch:a.a.func.isRequired,history:a.a.object.isRequired,primaryEnvironmentId:a.a.string}),Ee=Oe))||Ee;function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return De}));var De=Object(s.connect)((function(e){return{roles:Object.values(e.roles).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})),canManageUsers:Object(p.getCurrentRole)(e).attributes.can_manage_users}}))((Me=Fe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Le(this,Ae(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:try{(0,this.props.dispatch)(Object(m.fetchAll)())}catch(e){this.setState((function(){throw e}))}case 1:case"end":return e.stop()}}),null,this)}},{key:"renderRole",value:function(e){return l.a.createElement(u.default,{className:"ItemRow",activeClassName:"ItemRow--active",to:"/admin/roles/".concat(e.id,"/edit"),key:e.id},l.a.createElement("div",{className:"ItemRow__item"},l.a.createElement("div",{className:"ItemRow__item__inner"},l.a.createElement("div",{className:"ItemRow__item__content"},l.a.createElement("div",{className:"ItemRow__item__title"},e.attributes.name)))))}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"Items__blank-slate"},l.a.createElement("div",{className:"Items__blank-slate__inner"},l.a.createElement("div",{className:"Items__blank-slate__image"},l.a.createElement("img",{src:"/assets/images/role.svg",alt:"Roles"})),l.a.createElement("div",{className:"Items__blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"editor.editors.noEditors.title"})),l.a.createElement("div",{className:"Items__blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"editor.editors.noEditors.description"}))),l.a.createElement("div",{className:"Items__blank-slate__arrow"}))}},{key:"renderRoles",value:function(){var e=this.props.roles;return l.a.createElement("div",{className:"Items"},e.length>0?l.a.createElement("div",{className:"Items__items"},e.map(this.renderRole.bind(this))):this.renderBlankSlate(),l.a.createElement(u.default,{className:"Items__button",to:"/admin/roles/new"},l.a.createElement(M.default,null)))}},{key:"render",value:function(){var e=this.props,t=e.canManageUsers,n=e.children,r=e.roles,a=e.match.url;return t?l.a.createElement(d.default,{minSize:250,defaultSize:300,split:"vertical"},l.a.createElement("div",null,r?this.renderRoles():l.a.createElement(f.default,{size:100})),l.a.createElement("div",null,l.a.createElement(b.g,null,l.a.createElement(y.default,{path:"".concat(a,"/:roleId/edit"),component:je}),l.a.createElement(y.default,{path:"".concat(a,"/new"),component:Ce})))):l.a.createElement("div",{className:"Dashboard"},n)}}])&&Ie(n.prototype,r),a&&Ie(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fe,"propTypes",{dispatch:a.a.func.isRequired,roles:a.a.array,children:a.a.element,canManageUsers:a.a.bool,match:a.a.object.isRequired}),Re=Me))||Re},3070:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(2),o=n(0),l=n.n(o),c=n(5),s=n(6),u=n(37),m=n(580),d=n(194),f=n(29),p=n(124),b=n(55),y=n(47),h=n(117),_=n.n(h),v=n(145),g=n.n(v),E=n(62),w=n.n(E),O=n(39),j=n(67),k=n(169),S=n(74),P=n.n(S),N=n(66),x=n(24),T=n(140),R=n.n(T),F=n(43),M=n.n(F),C=n(2234);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D,B,H,U=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,A(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props,t=e.accessToken,n=e.roles.map((function(e){return{value:e.id,label:e.attributes.name}}));return l.a.createElement(j.default,null,l.a.createElement(x.default,{name:"name",intlLabel:"accessToken.name",type:"text",className:"form__input--large",disabled:t.attributes.hardcoded_type}),t.attributes.token&&l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"accessToken.apiKey"})),l.a.createElement(C.a,{className:"form__input--code",value:t.attributes.token})),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"accessToken.permissions"}))),!t.attributes.hardcoded_type&&l.a.createElement(x.default,{name:"role",intlLabel:"accessToken.role",clearable:!1,options:n,component:N.default}),l.a.createElement(x.default,{name:"can_access_cda",intlLabel:"accessToken.canAccessCda",intlHint:"accessToken.canAccessCda.hint",disabled:!!t.attributes.hardcoded_type,component:k.a}),l.a.createElement(x.default,{name:"can_access_cda_preview",intlLabel:"accessToken.canAccessCdaPreview",intlHint:"accessToken.canAccessCdaPreview.hint",disabled:!!t.attributes.hardcoded_type,component:k.a}),l.a.createElement(x.default,{name:"can_access_cma",intlLabel:"accessToken.canAccessCma",intlHint:"accessToken.canAccessCma.hint",disabled:!!t.attributes.hardcoded_type,component:k.a})),l.a.createElement(P.a,{intlLabel:"accessToken.button"}))}}])&&I(n.prototype,r),a&&I(n,a),t}(c.a);D=U,B="propTypes",H={accessToken:a.a.object.isRequired,roles:a.a.array.isRequired},B in D?Object.defineProperty(D,B,{value:H,enumerable:!0,configurable:!0,writable:!0}):D[B]=H;var V,G,W,J=Object(s.connect)((function(e,t){var n=t.accessToken,r=Object.values(e.roles),a={name:[w.a.required()]},i=R()(t.accessToken.attributes,["name","can_access_cda","can_access_cda_preview","can_access_cma"]);return n.attributes.hardcoded_type||(a.role=[w.a.required()],i.role=t.accessToken.relationships.role.data&&t.accessToken.relationships.role.data.id),{enableReinitialize:!0,validate:g()(a),initialValues:i,roles:r,onSubmit:function(e){var n=_()(t.accessToken);return n.attributes=M()(e,["role"]),n.relationships.role.data={id:e.role,type:"role"},t.onSubmit(n)}}}))(Object(O.withForm)({form:"accessToken"})(U)),$=n(10),K=n(77),X=n(96),Q=n(2242),Z=n(416);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ae,ie,oe,le=Object(s.connect)((function(e,t){return{accessToken:e.accessTokens[t.match.params.accessTokenId]}}))((W=G=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),te(this,ne(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match.params;t(Object(m.fetch)(n.accessTokenId))}},{key:"handleSubmit",value:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props.dispatch,r.prev=1,n=_()(e),r.next=5,regeneratorRuntime.awrap(t(Object(m.update)(e.id,n)));case 5:t(Object($.notice)("admin.accessToken.update.success")),r.next=12;break;case 8:throw r.prev=8,r.t0=r.catch(1),t(Object($.alertResponseFailure)(r.t0,"admin.accessToken.update.failure")),Object(K.default)(r.t0);case 12:case"end":return r.stop()}}),null,this,[[1,8]])}},{key:"handleRefreshToken",value:function(e){var t,n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props,n=t.dispatch,r=t.accessToken,e.preventDefault(),a.next=4,regeneratorRuntime.awrap(Object(y.showConfirm)("messages.confirm.regenerateAccessToken"));case 4:if(a.sent){a.next=6;break}return a.abrupt("return");case 6:return a.prev=6,a.next=9,regeneratorRuntime.awrap(n(Object(m.regenerateToken)(r.id)));case 9:n(Object($.notice)("admin.accessToken.regenerateToken.success")),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(6),n(Object($.alertResponseFailure)(a.t0,"admin.accessToken.regenerateToken.failure"));case 15:case"end":return a.stop()}}),null,this,[[6,12]])}},{key:"handleDestroy",value:function(e){var t,n,r,a,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,r=t.history,a=t.accessToken,e.preventDefault(),o.next=4,regeneratorRuntime.awrap(Object(y.showConfirm)("messages.confirm.destroyAccessToken"));case 4:if(o.sent){o.next=6;break}return o.abrupt("return");case 6:return o.prev=6,o.prev=7,o.next=10,regeneratorRuntime.awrap(n(Object(m.destroy)(a.id,null)));case 10:o.next=25;break;case 12:if(o.prev=12,o.t0=o.catch(7),!o.t0||!o.t0.data||"DESTINATION_USER_REQUIRED"!==o.t0.data[0].attributes.code){o.next=24;break}return o.next=17,regeneratorRuntime.awrap(Object(Z.a)(a,"admin.accessToken.destroy.newCreator.title","admin.accessToken.destroy.newCreator.description","admin.accessToken.destroy.newCreator.field","admin.accessToken.destroy.newCreator.submit"));case 17:if(i=o.sent){o.next=20;break}return o.abrupt("return");case 20:return o.next=22,regeneratorRuntime.awrap(n(Object(m.destroy)(a.id,i)));case 22:o.next=25;break;case 24:throw o.t0;case 25:n(Object($.notice)("admin.accessToken.destroy.success")),r.push("/admin/access_tokens"),o.next=32;break;case 29:o.prev=29,o.t1=o.catch(6),n(Object($.alertResponseFailure)(o.t1,"admin.accessToken.destroy.failure"));case 32:case"end":return o.stop()}}),null,this,[[6,29],[7,12]])}},{key:"render",value:function(){var e=this.props.accessToken;return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.editAccessToken.title"})),l.a.createElement("div",{className:"Page__space"}),l.a.createElement("a",{href:"#",onClick:this.handleRefreshToken.bind(this),className:"Page__action"},l.a.createElement("i",{className:"icon--sync"}),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.editAccessTokenForm.refreshToken"}))),e&&!e.attributes.hardcoded_type&&l.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},l.a.createElement(X.default,null),l.a.createElement(i.FormattedMessage,{id:"form.editEditorForm.delete"}))),e&&e.attributes.hardcoded_type&&l.a.createElement("div",{className:"Info"},l.a.createElement("div",{className:"Info__icon"},l.a.createElement(Q.default,null)),l.a.createElement("div",{className:"Info__body"},l.a.createElement(i.FormattedMessage,{id:"accessToken.info"}))),l.a.createElement("div",{className:"Page__content"},e&&l.a.createElement(J,{accessToken:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&ee(n.prototype,r),a&&ee(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(G,"propTypes",{dispatch:a.a.func.isRequired,accessToken:a.a.object,match:a.a.object.isRequired,history:a.a.object.isRequired}),V=W))||V,ce=n(157);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pe,be,ye,he=Object(s.connect)()((oe=ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),me(this,de(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,e),n=t,(r=[{key:"handleSubmit",value:function(e){var t,n,r,a,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,r=t.history,o.prev=1,o.next=4,regeneratorRuntime.awrap(n(Object(m.create)(e)));case 4:a=o.sent,i=a.data,n(Object($.notice)("admin.accessToken.create.success")),r.push("/admin/access_tokens/".concat(i.id,"/edit")),o.next=14;break;case 10:throw o.prev=10,o.t0=o.catch(1),n(Object($.alertResponseFailure)(o.t0,"admin.accessToken.create.failure")),Object(K.default)(o.t0);case 14:case"end":return o.stop()}}),null,this,[[1,10]])}},{key:"render",value:function(){var e=Object(ce.generateEmptyAccessToken)();return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.newAccessToken.title"}))),l.a.createElement("div",{className:"Page__content"},l.a.createElement(J,{accessToken:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&ue(n.prototype,r),a&&ue(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ie,"propTypes",{history:a.a.object.isRequired,dispatch:a.a.func.isRequired}),ae=oe))||ae,_e=n(69);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return je}));var je=Object(s.connect)((function(e){return{accessTokens:Object.values(e.accessTokens).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)}))}}))((ye=be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ee(this,we(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(e(Object(m.fetchAll)()));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"renderAccessToken",value:function(e){return l.a.createElement(u.default,{className:"ItemRow",activeClassName:"ItemRow--active",to:"/admin/access_tokens/".concat(e.id,"/edit"),key:e.id},l.a.createElement("div",{className:"ItemRow__item"},l.a.createElement("div",{className:"ItemRow__item__inner"},l.a.createElement("div",{className:"ItemRow__item__content"},l.a.createElement("div",{className:"ItemRow__item__title"},e.attributes.name,e.attributes.hardcoded_type&&l.a.createElement("span",{className:"ItemRow__item__title__tag"},l.a.createElement(i.FormattedMessage,{id:"accessToken.notEditable"})))))))}},{key:"renderAccessTokens",value:function(){var e=this.props.accessTokens;return l.a.createElement("div",{className:"Items"},l.a.createElement("div",{className:"Items__items"},e.map(this.renderAccessToken.bind(this))),l.a.createElement(u.default,{className:"Items__button",to:"/admin/access_tokens/new"},l.a.createElement(_e.default,null)))}},{key:"render",value:function(){var e=this.props,t=e.accessTokens,n=e.match.url;return l.a.createElement(d.default,{minSize:300,defaultSize:400,split:"vertical"},l.a.createElement("div",null,t?this.renderAccessTokens():l.a.createElement(f.default,{size:100})),l.a.createElement("div",null,l.a.createElement(p.g,null,l.a.createElement(b.default,{path:"".concat(n,"/:accessTokenId/edit"),component:le}),l.a.createElement(b.default,{path:"".concat(n,"/new"),component:he}))))}}])&&ge(n.prototype,r),a&&ge(n,a),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(be,"propTypes",{dispatch:a.a.func.isRequired,accessTokens:a.a.array,match:a.a.object.isRequired}),pe=ye))||pe},3072:function(e,t,n){"use strict";n.r(t);var r,a,i,o=n(1),l=n.n(o),c=n(2),s=n(0),u=n.n(s),m=n(5),d=n(6),f=n(37),p=n(265),b=n(1053),y=n(10),h=n(77),_=n(47),v=n(64),g=n(8),E=n(55),w=n(145),O=n.n(w),j=n(62),k=n.n(j),S=n(39),P=n(67),N=n(74),x=n.n(N),T=n(66),R=n(24);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L,A,z,D=Object(d.connect)((function(e){return{roles:Object.values(e.roles)}}))(r=Object(S.withForm)({initialValues:{role:null,email:null},validate:O()({role:[k.a.required()],email:[k.a.required(),k.a.email()]})})((i=a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,q(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.roles.map((function(e){return{value:e.id,label:e.attributes.name}}));return u.a.createElement(P.default,null,u.a.createElement("div",{className:"grid space--bottom-2"},u.a.createElement("div",{className:"grid__item desk-7-12"},u.a.createElement(R.default,{name:"email",intlLabel:"editor.email"})),u.a.createElement("div",{className:"grid__item desk-5-12"},u.a.createElement(R.default,{name:"role",intlLabel:"editor.role",clearable:!1,options:e,component:T.default}))),u.a.createElement(x.a,{intlLabel:"editor.button"}))}}])&&M(n.prototype,r),a&&M(n,a),t}(m.a),L=a,A="propTypes",z={roles:l.a.array.isRequired},A in L?Object.defineProperty(L,A,{value:z,enumerable:!0,configurable:!0,writable:!0}):L[A]=z,r=i))||r)||r,B=n(60),H=n(69),U=n(1054),V=n(13),G=n(2266);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var J,$,K,X=u.a.createElement("path",{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"}),Q=function(e){return u.a.createElement("svg",W({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),X)},Z=n(96),Y=n(157),ee=n(416),te=n(372),ne=n.n(te);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return se}));var ce=function(e){return function(t,n){return t.attributes[e].localeCompare(n.attributes[e])}},se=Object(d.connect)((function(e){var t=Object.values(e.users).sort(ce("email")),n=Object.values(e.invitations).sort(ce("email")),r=Object.values(e.roles).sort(ce("name"));return{users:t,canManageUsers:Object(g.getCurrentRole)(e).attributes.can_manage_users,invitations:n,roles:r}}))((K=$=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ie(this,oe(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(Promise.all([e(Object(p.fetchAll)()),e(Object(b.fetchAll)())]));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"handleEdit",value:function(e,t,n){var r,a;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=this.props.dispatch,i.prev=1,a={type:n,id:e.id,relationships:{role:{data:{id:t.id,type:"role"}}}},"user"!==n){i.next=8;break}return i.next=6,regeneratorRuntime.awrap(r(Object(p.update)(e.id,a)));case 6:i.next=10;break;case 8:return i.next=10,regeneratorRuntime.awrap(r(Object(b.update)(e.id,a)));case 10:r(Object(y.notice)("editor.editor.update.success")),i.next=17;break;case 13:throw i.prev=13,i.t0=i.catch(1),r(Object(y.alertResponseFailure)(i.t0,"editor.editor.update.failure")),Object(h.default)(i.t0);case 17:case"end":return i.stop()}}),null,this,[[1,13]])}},{key:"handleInvite",value:function(e){var t,n,r,a,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,r=t.history,a=t.match.url,o.prev=1,(i=Object(Y.generateEmptyInvitation)()).attributes.email=e.email,i.relationships.role.data.id=e.role,o.next=7,regeneratorRuntime.awrap(n(Object(b.create)(i)));case 7:n(Object(y.notice)("editor.editor.create.success")),r.push(a),o.next=15;break;case 11:throw o.prev=11,o.t0=o.catch(1),n(Object(y.alertResponseFailure)(o.t0,"editor.editor.create.failure")),Object(h.default)(o.t0);case 15:case"end":return o.stop()}}),null,this,[[1,11]])}},{key:"handleToggleActivation",value:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props.dispatch,n=e.attributes.is_active?"deactivate":"reactivate",r.next=4,regeneratorRuntime.awrap(Object(_.showConfirm)("messages.confirm.".concat(n,"User")));case 4:if(r.sent){r.next=6;break}return r.abrupt("return");case 6:return r.prev=6,r.next=9,regeneratorRuntime.awrap(t(Object(p.update)(e.id,{type:"user",id:e.id,attributes:{is_active:!e.attributes.is_active}})));case 9:t(Object(y.notice)("editor.editor.".concat(n,"User.success"))),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(6),t(Object(y.alertResponseFailure)(r.t0,"editor.editor.".concat(n,"User.failure")));case 15:case"end":return r.stop()}}),null,this,[[6,12]])}},{key:"handleDestroy",value:function(e,t){var n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=this.props.dispatch,a.next=3,regeneratorRuntime.awrap(Object(_.showConfirm)("messages.confirm.destroyUser"));case 3:if(a.sent){a.next=5;break}return a.abrupt("return");case 5:if(a.prev=5,"user"!==t){a.next=27;break}return a.prev=7,a.next=10,regeneratorRuntime.awrap(n(Object(p.destroy)(e.id,null)));case 10:a.next=25;break;case 12:if(a.prev=12,a.t0=a.catch(7),!a.t0||!a.t0.data||"DESTINATION_USER_REQUIRED"!==a.t0.data[0].attributes.code){a.next=24;break}return a.next=17,regeneratorRuntime.awrap(Object(ee.a)(e,"editor.editor.destroy.newCreator.title","editor.editor.destroy.newCreator.description","editor.editor.destroy.newCreator.field","editor.editor.destroy.newCreator.submit"));case 17:if(r=a.sent){a.next=20;break}return a.abrupt("return");case 20:return a.next=22,regeneratorRuntime.awrap(n(Object(p.destroy)(e.id,r)));case 22:a.next=25;break;case 24:throw a.t0;case 25:a.next=29;break;case 27:return a.next=29,regeneratorRuntime.awrap(n(Object(b.destroy)(e.id)));case 29:n(Object(y.notice)("editor.editor.destroy.success")),a.next=35;break;case 32:a.prev=32,a.t1=a.catch(5),n(Object(y.alertResponseFailure)(a.t1,"editor.editor.destroy.failure"));case 35:case"end":return a.stop()}}),null,this,[[5,32],[7,12]])}},{key:"renderUser",value:function(e,t){var n=this,r=this.props.roles,a=t.relationships.role.data.id,i=r.find((function(e){return e.id===a})),o=ne()({"is-disabled":"user"===t.type&&!t.attributes.is_active});return u.a.createElement("tr",{key:t.id},u.a.createElement("td",{className:o},u.a.createElement(v.a,{withEmail:!0,withAvatar:!0,size:40,user:t})),u.a.createElement("td",{className:o},"user"===t.type&&(t.attributes.is_active?"Active":"De-activated"),"site_invitation"===t.type&&"Invited"),u.a.createElement("td",{className:o},t.attributes.is_2fa_active&&u.a.createElement(U.default,null)),u.a.createElement("td",null,u.a.createElement(V.Dropdown,{label:i.attributes.name,icon:G.default},u.a.createElement(V.Menu,null,u.a.createElement(V.Group,{intlName:"editor.changeRole"},r.map((function(r){return u.a.createElement(V.Option,{key:r.id,active:r.id===i.id,onClick:n.handleEdit.bind(n,t,r,e)},r.attributes.name)}))),u.a.createElement(V.Separator,null),"user"===t.type&&u.a.createElement(V.Option,{icon:Q,onClick:this.handleToggleActivation.bind(this,t)},t.attributes.is_active?"De-activate user":"Re-activate user"),u.a.createElement(V.Option,{red:!0,icon:Z.default,onClick:this.handleDestroy.bind(this,t,e)},u.a.createElement(c.FormattedMessage,{id:"editor.remove"}))))))}},{key:"renderBlankSlate",value:function(){var e=this.props.match.url;return u.a.createElement("div",{className:"blank-slate"},u.a.createElement("p",{className:"blank-slate__title"},u.a.createElement(c.FormattedMessage,{id:"editor.editors.noEditors.title"})),u.a.createElement("p",{className:"blank-slate__description"},u.a.createElement(c.FormattedMessage,{id:"editor.editors.noEditors.description"})),u.a.createElement(f.default,{to:"".concat(e,"/new"),className:"button button--primary"},u.a.createElement(H.default,null),u.a.createElement("span",null,u.a.createElement(c.FormattedMessage,{id:"editor.add"}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.canManageUsers,r=t.users,a=t.history,i=t.invitations,o=t.match.url;return n?u.a.createElement("div",{className:"Page Page--overflowauto Page--large"},u.a.createElement("div",{className:"Page__inner"},u.a.createElement("div",{className:"Page__header"},u.a.createElement("div",{className:"Page__title"},u.a.createElement(c.FormattedMessage,{id:"admin.users.title"})),u.a.createElement(f.default,{className:"Page__action--primary",to:"/admin/users/new"},u.a.createElement(H.default,null),u.a.createElement("span",null,u.a.createElement(c.FormattedMessage,{id:"editor.add"})))),i.length+r.length===0?this.renderBlankSlate():u.a.createElement("div",{className:"space--bottom-3"},u.a.createElement("table",{className:"table"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,u.a.createElement(c.FormattedMessage,{id:"editor.table.user"})),u.a.createElement("th",null,u.a.createElement(c.FormattedMessage,{id:"editor.table.status"})),u.a.createElement("th",null,u.a.createElement(c.FormattedMessage,{id:"editor.table.2fa"})),u.a.createElement("th",null,u.a.createElement(c.FormattedMessage,{id:"editor.table.role"})))),u.a.createElement("tbody",null,r.filter((function(e){return e.attributes.is_active})).map(this.renderUser.bind(this,"user")),i.map(this.renderUser.bind(this,"site_invitation")),r.filter((function(e){return!e.attributes.is_active})).map(this.renderUser.bind(this,"user")))))),u.a.createElement(E.default,{path:"".concat(o,"/new"),render:function(){return u.a.createElement(B.default,{localeKey:"editor.inviteNew",onClose:function(){return a.push(o)},disableModalPrompt:!0},u.a.createElement(D,{onSubmit:e.handleInvite.bind(e)}))}})):u.a.createElement("div",{className:"Dashboard"})}}])&&ae(n.prototype,r),a&&ae(n,a),t}(m.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}($,"propTypes",{dispatch:l.a.func.isRequired,users:l.a.array,roles:l.a.array,invitations:l.a.array,canManageUsers:l.a.bool,match:l.a.object.isRequired,history:l.a.object.isRequired}),J=K))||J},3074:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),l=n(5),c=n(6),s=n(10),u=n(39),m=n(169),d=n(67),f=n(74),p=n.n(f),b=n(24),y=n(117),h=n.n(y),_=n(62),v=n.n(_),g=n(145),E=n.n(g);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,S(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.disabled;return o.a.createElement(d.default,{disabled:e},o.a.createElement(b.default,{name:"name",intlLabel:"site.name.label",type:"text",className:"form__input--large"}),o.a.createElement(b.default,{name:"require_2fa",intlLabel:"site.require2fa.label",intlHint:"site.require2fa.hint",component:m.a}),o.a.createElement(p.a,{intlLabel:"site.button"}))}}])&&j(n.prototype,r),a&&j(n,a),t}(l.a);N(x,"propTypes",{disabled:a.a.bool}),N(x,"contextTypes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({route:a.a.object},l.a.contextTypes));var T,R,F,M=Object(c.connect)((function(e,t){var n=t.site.attributes;return{initialValues:{name:n.name,require_2fa:n.require_2fa},enableReinitialize:!0,validate:E()({name:[v.a.required()]}),onSubmit:function(e){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return(n=h()(t.site)).attributes={name:e.name,require_2fa:e.require_2fa},delete n.relationships,r.abrupt("return",t.onSubmit(n));case 4:case"end":return r.stop()}}))}}}))(Object(u.withForm)({form:"site"})(x)),C=n(77),q=n(107),I=n(2),L=n(8);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return W}));var U,V,G,W=Object(c.connect)((function(e){return{site:e.site,maintenanceMode:Object(L.isMaintenanceModeActive)(e)}}))((F=R=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,B(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,e),n=t,(r=[{key:"handleSubmit",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.props.dispatch,n.prev=1,n.next=4,regeneratorRuntime.awrap(t(Object(q.update)(e)));case 4:return n.next=6,regeneratorRuntime.awrap(t(Object(q.fetch)({})));case 6:t(Object(s.notice)("admin.site.update.success")),n.next=13;break;case 9:throw n.prev=9,n.t0=n.catch(1),t(Object(s.alertResponseFailure)(n.t0,"admin.site.update.failure")),Object(C.default)(n.t0);case 13:case"end":return n.stop()}}),null,this,[[1,9]])}},{key:"renderLoading",value:function(){return o.a.createElement("div",null,"...")}},{key:"renderForm",value:function(){var e=this.props,t=e.site,n=e.maintenanceMode;return o.a.createElement(M,{site:t,disabled:n,onSubmit:this.handleSubmit.bind(this)})}},{key:"render",value:function(){var e=this.props.site;return o.a.createElement("div",{className:"Page"},o.a.createElement("div",{className:"Page__inner"},o.a.createElement("div",{className:"Page__header"},o.a.createElement("div",{className:"Page__title"},o.a.createElement(I.FormattedMessage,{id:"adminArea.siteSettings.title"}))),o.a.createElement("div",{className:"Page__content"},e?this.renderForm():this.renderLoading())))}}])&&z(n.prototype,r),a&&z(n,a),t}(l.a),U=R,V="propTypes",G={dispatch:a.a.func.isRequired,site:a.a.object,maintenanceMode:a.a.bool},V in U?Object.defineProperty(U,V,{value:G,enumerable:!0,configurable:!0,writable:!0}):U[V]=G,T=F))||T},3075:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),l=n(5),c=n(6),s=n(10),u=n(73),m=n(39),d=n(381),f=n(509),p=n(66),b=n(67),y=n(74),h=n.n(y),_=n(24),v=n(117),g=n.n(v),E=n(16),w=n.n(E),O=n(62),j=n.n(O),k=n(145),S=n.n(k),P=n(722),N=n(163),x=n(47),T=n(8);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L,A,z,D=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,q(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this.props.maintenanceMode,t=Object.entries(N.default).map((function(e){var t=F(e,2),n=t[0],r=t[1];return{value:n,label:"".concat(r," (").concat(n,")")}})),n=Object.keys(P.a).map((function(e){return{value:P.a[e],label:e}}));return o.a.createElement("div",null,o.a.createElement(b.default,{disabled:e},o.a.createElement("div",{className:"grid space--bottom-2"},o.a.createElement("div",{className:"grid__item width-3-12"},o.a.createElement(_.default,{name:"primary_color",intlLabel:"site.color.primary",dispatchUi:"primaryColor",component:f.a})),o.a.createElement("div",{className:"grid__item width-3-12"},o.a.createElement(_.default,{name:"accent_color",intlLabel:"site.color.accent",dispatchUi:"accentColor",component:f.a})),o.a.createElement("div",{className:"grid__item width-3-12"},o.a.createElement(_.default,{name:"light_color",intlLabel:"site.color.light",dispatchUi:"lightColor",component:f.a})),o.a.createElement("div",{className:"grid__item width-3-12"},o.a.createElement(_.default,{name:"dark_color",intlLabel:"site.color.dark",dispatchUi:"darkColor",component:f.a}))),o.a.createElement(_.default,{name:"logo",intlLabel:"site.logo.label",intlPrefix:"imageInput",component:d.default}),o.a.createElement(_.default,{name:"locales",intlLabel:"site.locales.label",intlHint:"site.locales.hint",intlDocs:"site.locales.docs",docsHref:"https://www.datocms.com/docs/general-concepts/localization",multiple:!0,options:t,component:p.default}),o.a.createElement(_.default,{name:"timezone",intlLabel:"site.timezone",options:n,component:p.default}),o.a.createElement(h.a,{intlLabel:"site.button"})))}}])&&M(n.prototype,r),a&&M(n,a),t}(l.a);L=D,A="propTypes",z={maintenanceMode:a.a.bool},A in L?Object.defineProperty(L,A,{value:z,enumerable:!0,configurable:!0,writable:!0}):L[A]=z;var B,H,U,V=Object(c.connect)((function(e,t){var n=t.site.attributes,r={locales:n.locales,primary_color:n.theme.primary_color,accent_color:n.theme.accent_color,light_color:n.theme.light_color,dark_color:n.theme.dark_color,logo:n.theme.logo,timezone:n.timezone};return{maintenanceMode:Object(T.isMaintenanceModeActive)(e),initialValues:r,enableReinitialize:!0,validate:S()({locales:[j.a.minArrayLength(1)],primary_color:[j.a.required()],accent_color:[j.a.required()],light_color:[j.a.required()],dark_color:[j.a.required()]}),onSubmit:function(e){var n,r,a,i,o;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=g()(t.site),r=e.locales,a=n.attributes.locales,i=!w()(r,a),!((o=a.filter((function(t){return!e.locales.includes(t)}))).length>0)){l.next=10;break}return l.next=8,regeneratorRuntime.awrap(Object(x.showConfirm)("messages.confirm.destroySiteLocale",{locales:o.map((function(e){return"".concat(N.default[e]," (").concat(e,")")}))}));case 8:if(l.sent){l.next=10;break}return l.abrupt("return",!1);case 10:return n.attributes={theme:{logo:e.logo,primary_color:e.primary_color,accent_color:e.accent_color,light_color:e.light_color,dark_color:e.dark_color},locales:e.locales,timezone:e.timezone},delete n.relationships,l.abrupt("return",t.onSubmit(n,i));case 13:case"end":return l.stop()}}))}}}))(Object(m.withForm)({form:"site"})(D)),G=n(77),W=n(107),J=n(2),$=n(2294),K=n.n($);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return te}));var te=Object(c.connect)((function(e){var t=e.site,n=e.fields;return{site:t,fields:Object.values(n)}}))((U=H=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Z(this,Y(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,e),n=t,(r=[{key:"handleSubmit",value:function(e,t){var n,r,a,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=this.props,r=n.dispatch,a=n.fields,o.prev=1,o.next=4,regeneratorRuntime.awrap(r(Object(W.update)(e)));case 4:return i=["item_types","item_types.singleton_item"].join(","),o.next=7,regeneratorRuntime.awrap(r(Object(W.fetch)({include:i})));case 7:t&&Array.from(new Set(a.map((function(e){return e.attributes.localized&&e.relationships.item_type.data.id})))).forEach((function(e){return e&&r(Object(u.invalidate)({itemTypeId:e}))})),r(Object(s.notice)("admin.site.update.success")),o.next=15;break;case 11:throw o.prev=11,o.t0=o.catch(1),r(Object(s.alertResponseFailure)(o.t0,"admin.site.update.failure")),Object(G.default)(o.t0);case 15:case"end":return o.stop()}}),null,this,[[1,11]])}},{key:"renderLoading",value:function(){return o.a.createElement("div",null,"...")}},{key:"renderForm",value:function(){var e=this.props.site;return o.a.createElement(V,{locales:e.attributes.locales,site:e,onSubmit:this.handleSubmit.bind(this)})}},{key:"render",value:function(){var e=this.props.site;return o.a.createElement(K.a,null,o.a.createElement("div",{className:"Page"},o.a.createElement("div",{className:"Page__inner"},o.a.createElement("div",{className:"Page__header"},o.a.createElement("div",{className:"Page__title"},o.a.createElement(J.FormattedMessage,{id:"adminArea.environmentSettings.title"}))),o.a.createElement("div",{className:"Page__content"},e?this.renderForm():this.renderLoading()))))}}])&&Q(n.prototype,r),a&&Q(n,a),t}(l.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(H,"propTypes",{dispatch:a.a.func.isRequired,site:a.a.object,fields:a.a.array}),B=U))||B},3076:function(e,t,n){"use strict";n.r(t);var r,a,i,o=n(1),l=n.n(o),c=n(2),s=n(0),u=n.n(s),m=n(5),d=n(6),f=n(415),p=n(2295),b=n(2357),y=n(8),h=n(1041),_=n(1052),v=n(29),g=Object(s.lazy)((function(){return Promise.all([n.e(38),n.e(3)]).then(n.bind(null,3099))})),E=function(e){return u.a.createElement(s.Suspense,{fallback:u.a.createElement(v.default,{inline:!0})},u.a.createElement(g,e))},w=n(2522),O=n.n(w);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return F}));var x,T,R,F=Object(d.connect)((function(e){var t=e.dailySiteUsages;return{subscriptionLimits:e.subscriptionLimits,dailyStats:t,videoEnabled:Object(y.isFeatureEnabled)(e,"video")}}))((i=a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,P(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(Promise.all([e(Object(h.fetchAll)()),e(Object(_.fetchAll)())]));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"renderLimit",value:function(e){var t,n,r=e.id,a=e.attributes,i=a.limit,o=a.usage;return r.endsWith("bytes")?(t=Object(f.default)(i),n=Object(f.default)(o)):r.endsWith("calls")?(t=Object(p.default)(i,0,!1),n=Object(p.default)(o,0,!1)):r.endsWith("seconds")?(t=Object(b.a)(i,0,!1),n=Object(b.a)(o,0,!1)):r.endsWith("days")?(t="".concat(i," days"),n="".concat(o," days")):(t=u.a.createElement(c.FormattedNumber,{value:i}),n=u.a.createElement(c.FormattedNumber,{value:o})),u.a.createElement("div",{className:"CurrentPlan__totals__item",key:r},u.a.createElement("div",{className:"CurrentPlan__totals__item__description"},u.a.createElement(c.FormattedMessage,{id:"limits.".concat(r)})),u.a.createElement("div",{className:"CurrentPlan__totals__item__count"},n,"/",t))}},{key:"render",value:function(){var e=this.props,t=e.subscriptionLimits,n=e.dailyStats,r=e.videoEnabled;return u.a.createElement("div",{className:"Page Page--large"},u.a.createElement("div",{className:"Page__inner"},u.a.createElement("div",{className:"Page__header"},u.a.createElement("div",{className:"Page__title"},u.a.createElement(c.FormattedMessage,{id:"limits.title"}))),u.a.createElement("div",{className:"Page__content Page__content--transparent"},u.a.createElement("div",{className:"CurrentPlan__totals"},Object.values(t).filter((function(e){var t=e.attributes,n=t.limit,r=t.usage;return null!==n&&0!==r})).map(this.renderLimit.bind(this))),u.a.createElement("div",{className:"CurrentPlan__charts"},t.traffic_bytes&&u.a.createElement(u.a.Fragment,null,u.a.createElement(E,{name:this.t("limits.apiTraffic"),unit:"bytes",metrics:["assets_traffic_bytes","cda_traffic_bytes","cma_traffic_bytes"],data:n,threshold:t.traffic_bytes.attributes.limit}),u.a.createElement(O.a,{counters:["assets_referrer_bytes","cda_referrer_bytes","assets_path_bytes","cda_access_token_id_bytes","cma_endpoint_bytes","cma_user_bytes"]})),t.api_calls&&u.a.createElement(u.a.Fragment,null,u.a.createElement(E,{name:this.t("limits.apiRequests"),metrics:["cda_api_calls","cma_api_calls"],unit:"calls",data:n,threshold:t.api_calls.attributes.limit}),u.a.createElement(O.a,{counters:["cda_referrer_requests","cda_access_token_id_requests","cma_endpoint_requests","cma_user_requests"]})),r&&t.mux_streaming_seconds&&u.a.createElement(E,{name:this.t("limits.mux_delivered_seconds"),metrics:["mux_delivered_seconds"],unit:"minutes",data:n,threshold:t.mux_streaming_seconds.attributes.limit})))))}}])&&k(n.prototype,r),a&&k(n,a),t}(m.a),x=a,T="propTypes",R={dispatch:l.a.func.isRequired,videoEnabled:l.a.bool,subscriptionLimits:l.a.object,dailyStats:l.a.object},T in x?Object.defineProperty(x,T,{value:R,enumerable:!0,configurable:!0,writable:!0}):x[T]=R,r=i))||r},3077:function(e,t,n){"use strict";n.r(t);var r,a,i,o=n(1),l=n.n(o),c=n(0),s=n.n(c),u=n(5),m=n(6),d=n(2),f=n(81),p=n(60),b=n(2297),y=n(2362),h=n(2298),_=n(1047);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k,S,P,N,x,T,R=Object(m.connect)((function(e){return{webhooks:e.webhooks}}))((i=a=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=w(this,O(t).call(this,e))).state={detailsOpen:!1},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,e),n=t,(r=[{key:"isStatusOk",value:function(){var e=this.props.call.attributes.response_status;return null!==e&&e<=300}},{key:"handleDetails",value:function(e){e.preventDefault(),this.setState({detailsOpen:!0})}},{key:"handleResend",value:function(e){e.preventDefault();var t=this.props,n=t.call;(0,t.dispatch)(Object(_.resend)(n.id))}},{key:"handleClose",value:function(){this.setState({detailsOpen:!1})}},{key:"renderCreatedAt",value:function(){var e=this.props.call;return s.a.createElement(h.a,{title:"buildEvent.details.timestamp"},s.a.createElement(d.FormattedDate,{value:Date.parse(e.attributes.created_at)}),"",s.a.createElement(d.FormattedTime,{value:Date.parse(e.attributes.created_at)}))}},{key:"renderBody",value:function(e,t){if(t){var n=t;try{n=JSON.stringify(JSON.parse(t),null,2)}catch(e){}return s.a.createElement(h.a,{title:e},s.a.createElement(b.a,{log:n}))}}},{key:"renderHeaders",value:function(e,t){if(t){var n=Object.entries(t).map((function(e){var t=g(e,2),n=t[0],r=t[1];return"".concat(Object(y.a)(n),": ").concat(r)})).join("\n");return s.a.createElement(h.a,{title:e},s.a.createElement(b.a,{log:n}))}}},{key:"renderTitle",value:function(e,t){if(t)return s.a.createElement(h.a,{title:e},s.a.createElement("p",{className:"beta"},t))}},{key:"renderRequestDetails",value:function(){var e=this.props.call.attributes;return s.a.createElement("div",{className:"WebhookCall__details"},this.renderTitle("webhookCall.details.requestUrl",e.request_url),this.renderHeaders("webhookCall.details.requestHeaders",e.request_headers),this.renderBody("webhookCall.details.requestBody",e.request_payload),this.renderTitle("webhookCall.details.responseStatusCode",e.response_status),this.renderHeaders("webhookCall.details.responseHeaders",e.response_headers),this.renderBody("webhookCall.details.responseBody",e.response_payload),this.renderCreatedAt())}},{key:"render",value:function(){var e=this.state.detailsOpen,t=this.props,n=t.call,r=t.webhooks[n.relationships.webhook.data.id],a=n.attributes,i=a.entity_type,o=a.event_type;return s.a.createElement("div",{className:"WebhookCall"},s.a.createElement("div",{className:"WebhookCall__inner"},s.a.createElement("div",{className:"WebhookCall__title"},s.a.createElement("div",{className:"WebhookCall__status--".concat(this.isStatusOk()?"green":"red")},null===n.attributes.response_status?"error":"http ".concat(n.attributes.response_status)),s.a.createElement(d.FormattedMessage,{id:"webhookCalls.event.".concat(i,".").concat(o)})),s.a.createElement("div",{className:"WebhookCall__sub"},s.a.createElement("div",{className:"WebhookCall__sub__item"},s.a.createElement(f.default,{value:n.attributes.created_at})),s.a.createElement("div",{className:"WebhookCall__sub__item"},r.attributes.name),s.a.createElement("div",{className:"WebhookCall__sub__item"},s.a.createElement("a",{href:"#",onClick:this.handleDetails.bind(this)},s.a.createElement(d.FormattedMessage,{id:"buildEvent.showDetails"}))))),!this.isStatusOk()&&s.a.createElement("a",{className:"WebhookCall__button",href:"#",onClick:this.handleResend.bind(this)},s.a.createElement(d.FormattedMessage,{id:"webhookCall.resendWebhook"})),e&&s.a.createElement(p.default,{wide:!0,localeKey:"buildEvent.detailsTitle",onClose:this.handleClose.bind(this)},this.renderRequestDetails()))}}])&&E(n.prototype,r),a&&E(n,a),t}(u.a),k=a,S="propTypes",P={dispatch:l.a.func.isRequired,call:l.a.object.isRequired,webhooks:l.a.object.isRequired},S in k?Object.defineProperty(k,S,{value:P,enumerable:!0,configurable:!0,writable:!0}):k[S]=P,r=i))||r,F=n(2242),M=n(677),C=n(2535),q=n.n(C);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return B}));var B=Object(m.connect)((function(e){return{calls:Object.values(e.webhookCalls).sort((function(e,t){return Date.parse(e.attributes.created_at)-Date.parse(t.attributes.created_at)})).reverse(),site:e.site}}))((T=x=function(e){function t(e){var n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(a=A(t).call(this,e))||"object"!==I(a)&&"function"!=typeof a?z(r):a).handleWebhookEvent=q()(n.handleWebhookEvent.bind(z(n)),3e3),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,Object(M.a)().bind("webhook:event",this.handleWebhookEvent),t.next=5,regeneratorRuntime.awrap(e(Object(_.fetchAll)()));case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 10:case"end":return t.stop()}}),null,this,[[0,7]])}},{key:"componentWillUnmount",value:function(){Object(M.a)().unbind("webhook:event",this.handleWebhookEvent)}},{key:"handleWebhookEvent",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(e(Object(_.fetchAll)()));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"renderCall",value:function(e){return s.a.createElement(R,{key:e.id,call:e})}},{key:"render",value:function(){var e=this.props.calls;return s.a.createElement("div",{className:"Page"},s.a.createElement("div",{className:"Page__inner"},s.a.createElement("div",{className:"Page__header"},s.a.createElement("div",{className:"Page__title"},s.a.createElement(d.FormattedMessage,{id:"admin.webhookCalls.title"}))),s.a.createElement("div",{className:"Info"},s.a.createElement("div",{className:"Info__icon"},s.a.createElement(F.default,null)),s.a.createElement("div",{className:"Info__body"},s.a.createElement(d.FormattedMessage,{id:"admin.webhookCalls.instructions"}))),s.a.createElement("div",{className:"Page__content--transparent"},e.map(this.renderCall,this),0===e.length&&s.a.createElement("div",{className:"blank-slate blank-slate--tiny"},s.a.createElement("p",{className:"blank-slate__title"},s.a.createElement(d.FormattedMessage,{id:"admin.webhookCalls.noEvents.title"}))))))}}])&&L(n.prototype,r),a&&L(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(x,"propTypes",{dispatch:l.a.func.isRequired,calls:l.a.array}),N=T))||N},3078:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(2),o=n(0),l=n.n(o),c=n(5),s=n(124),u=n(55),m=n(1046),d=n(6),f=n(47),p=n(117),b=n.n(p),y=n(348),h=n(77),_=n(10),v=n(2487),g=n(96);function E(e){var t=e.history,n=e.dispatch,r=e.match;Object(o.useEffect)((function(){regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(n(Object(y.fetch)(r.params.environmentId)));case 2:case"end":return e.stop()}}))}),[]);var a=Object(d.useSelector)((function(e){return e.buildTriggers?e.buildTriggers[r.params.environmentId]:null})),c=a&&v.default[a.attributes.adapter];return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.editBuildTriggerForm.title"})),l.a.createElement("div",{className:"Page__space"}),a&&l.a.createElement("a",{href:"#",onClick:function(e){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),r.next=3,regeneratorRuntime.awrap(Object(f.showConfirm)("messages.confirm.destroyBuildTrigger"));case 3:if(r.sent){r.next=5;break}return r.abrupt("return");case 5:return r.prev=5,r.next=8,regeneratorRuntime.awrap(n(Object(y.destroy)(a.id)));case 8:n(Object(m.purgeAll)()),n(Object(_.notice)("editor.buildTrigger.destroy.success")),t.push("/admin/build_triggers"),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(5),n(Object(_.alertResponseFailure)(r.t0,"editor.buildTrigger.destroy.failure"));case 16:case"end":return r.stop()}}),null,null,[[5,13]])}.bind(this),className:"Page__action--delete"},l.a.createElement(g.default,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.editBuildTriggerForm.delete"})))),l.a.createElement("div",{className:"Page__content"},a&&l.a.createElement(c,{onSubmit:function(e){var t;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,delete(t=b()(e)).attributes.webhook_token,r.next=5,regeneratorRuntime.awrap(n(Object(y.update)(e.id,t)));case 5:n(Object(_.notice)("editor.buildTrigger.update.success")),r.next=12;break;case 8:throw r.prev=8,r.t0=r.catch(0),n(Object(_.alertResponseFailure)(r.t0,"editor.buildTrigger.update.failure")),Object(h.default)(r.t0);case 12:case"end":return r.stop()}}),null,null,[[0,8]])}.bind(this),buildTrigger:a}))))}E.propTypes={dispatch:a.a.func.isRequired,history:a.a.object.isRequired,match:a.a.object.isRequired};var w,O,j,k=Object(d.connect)()(E),S=n(2536),P=n.n(S),N=n(37),x=n(194),T=n(29),R=n(69),F=n(8);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return B}));var A,z,D,B=Object(d.connect)((function(e){var t=Object(F.allowedBuildTriggerIds)(e);return{buildTriggers:Object.values(e.buildTriggers).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})).filter((function(e){return t.includes(e.id)}))}}))((j=O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),q(this,I(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(e(Object(y.fetchAll)()));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"renderBuildTrigger",value:function(e){var t=e.attributes.adapter;return l.a.createElement(N.default,{className:"ItemRow",activeClassName:"ItemRow--active",to:"/admin/build_triggers/".concat(e.id,"/edit"),key:e.id},l.a.createElement("div",{className:"ItemRow__item"},l.a.createElement("div",{className:"ItemRow__item__inner"},l.a.createElement("div",{className:"ItemRow__item__image"},l.a.createElement("div",{className:["ItemRow__item__image__placeholder","ItemRow__item__image__placeholder--contain"].join(" "),style:{backgroundImage:"url(/assets/images/".concat(t,".png)")}})),l.a.createElement("div",{className:"ItemRow__item__content"},l.a.createElement("div",{className:"ItemRow__item__title"},e.attributes.name),l.a.createElement("div",{className:"ItemRow__item__details"},l.a.createElement(i.FormattedMessage,{id:"site.buildTriggerAdapters.".concat(t)}))))))}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"Items__blank-slate"},l.a.createElement("div",{className:"Items__blank-slate__inner"},l.a.createElement("div",{className:"Items__blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.buildTriggers.noEnvs.title"})),l.a.createElement("div",{className:"Items__blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"admin.buildTriggers.noEnvs.description"}))),l.a.createElement("div",{className:"Items__blank-slate__arrow"}))}},{key:"renderBuildTriggers",value:function(){var e=this.props.buildTriggers;return l.a.createElement("div",{className:"Items"},e.length>0?l.a.createElement("div",{className:"Items__items"},e.map(this.renderBuildTrigger.bind(this))):this.renderBlankSlate(),l.a.createElement(N.default,{to:"/admin/build_triggers/new",className:"Items__button"},l.a.createElement(R.default,null)))}},{key:"render",value:function(){var e=this.props,t=e.buildTriggers,n=e.match.url;return l.a.createElement(x.default,{minSize:300,defaultSize:400,split:"vertical"},l.a.createElement("div",null,t?this.renderBuildTriggers():l.a.createElement(T.default,{size:100})),l.a.createElement("div",null,l.a.createElement(s.g,null,l.a.createElement(u.default,{path:"".concat(n,"/new"),component:P.a}),l.a.createElement(u.default,{path:"".concat(n,"/:environmentId/edit"),component:k}))))}}])&&C(n.prototype,r),a&&C(n,a),t}(c.a),A=O,z="propTypes",D={dispatch:a.a.func.isRequired,buildTriggers:a.a.array,match:a.a.object.isRequired},z in A?Object.defineProperty(A,z,{value:D,enumerable:!0,configurable:!0,writable:!0}):A[z]=D,w=j))||w},3079:function(e,t,n){"use strict";n.r(t);var r,a,i,o=n(1),l=n.n(o),c=n(0),s=n.n(c),u=n(5),m=n(6),d=n(2),f=n(2363),p=n(2362),b=n(2298),y=n(2297),h=n(29);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j,k,S,P,N,x,T=Object(c.lazy)((function(){return Promise.all([n.e(43),n.e(16)]).then(n.bind(null,3100))})),R=Object(m.connect)((function(e,t){return{event:e.buildEvents[t.match.params.buildEventId]}}))((i=a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,w(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(r=[{key:"renderCreatedAt",value:function(){var e=this.props.event;return s.a.createElement(b.a,{title:"buildEvent.details.timestamp"},s.a.createElement(d.FormattedDate,{value:Date.parse(e.attributes.created_at)}),"",s.a.createElement(d.FormattedTime,{value:Date.parse(e.attributes.created_at)}))}},{key:"renderCommand",value:function(){var e=this.props.event.attributes.data.command;if(e){var t=e.trim().split(" -").join(" \\\n  -");return s.a.createElement(b.a,{title:"buildEvent.details.command"},s.a.createElement(y.a,{log:t}))}}},{key:"renderBody",value:function(e,t){if(t){var n=t;try{n=JSON.stringify(JSON.parse(t),null,2)}catch(e){}return s.a.createElement(b.a,{title:e},s.a.createElement(y.a,{log:n}))}}},{key:"renderHeaders",value:function(e,t){if(t){var n=Object.entries(t).map((function(e){var t=v(e,2),n=t[0],r=t[1];return"".concat(Object(p.a)(n),": ").concat(r)})).join("\n");return s.a.createElement(b.a,{title:e},s.a.createElement(y.a,{log:n}))}}},{key:"renderStatusCode",value:function(e,t){if(t)return s.a.createElement(b.a,{title:e},s.a.createElement("p",{className:"beta"},t))}},{key:"renderReason",value:function(){var e=this.props.event;if(e.attributes.data.reason)return s.a.createElement(b.a,{title:"buildEvent.details.reason"},s.a.createElement("p",{className:"gamma"},Object(f.a)(e.attributes.data.reason)))}},{key:"renderRequestDetails",value:function(){var e=this.props.event.attributes.data;return s.a.createElement("div",{className:"BuildEvent__details"},this.renderCommand(),this.renderReason(e.reason),this.renderStatusCode("buildEvent.details.responseStatusCode",e.response_status),this.renderHeaders("buildEvent.details.responseHeaders",e.response_headers),this.renderBody("buildEvent.details.responseBody",e.response_body),this.renderCreatedAt())}},{key:"renderUnprocessableResponseDetails",value:function(){var e=this.props.event.attributes.data;return s.a.createElement("div",{className:"BuildEvent__details"},s.a.createElement(b.a,{title:"buildEvent.details.reason"},s.a.createElement(d.FormattedMessage,{id:"buildEvent.details.unprocessableResponse"})),this.renderHeaders("buildEvent.details.requestHeaders",e.request_headers),this.renderBody("buildEvent.details.requestBody",e.request_body),this.renderCreatedAt())}},{key:"renderBuildLog",value:function(){var e=this.props.event;return s.a.createElement(c.Suspense,{fallback:s.a.createElement(h.default,{size:30})},s.a.createElement(T,{event:e}))}},{key:"renderResponseDetails",value:function(){var e=this.props.event.attributes.data;return s.a.createElement("div",{className:"BuildEvent__details"},this.renderBuildLog(),this.renderHeaders("buildEvent.details.requestHeaders",e.request_headers),this.renderBody("buildEvent.details.requestBody",e.request_body),this.renderCreatedAt())}},{key:"renderScrapeSuccessDetails",value:function(){var e=this.props.event.attributes.data;return s.a.createElement("div",{className:"BuildEvent__details"},s.a.createElement(b.a,{title:"buildEvent.details.pages_count"},s.a.createElement("p",{className:"beta"},e.pages.length)),s.a.createElement(b.a,{title:"buildEvent.details.pages"},s.a.createElement(y.a,{log:e.pages.join("\n")})),this.renderCreatedAt())}},{key:"renderScrapeFailureDetails",value:function(){var e=this.props.event.attributes.data;return s.a.createElement("div",{className:"BuildEvent__details"},s.a.createElement(b.a,{title:"buildEvent.details.reason"},s.a.createElement(d.FormattedMessage,{id:"indexingFailureReason.".concat(e.reason)})),this.renderCreatedAt())}},{key:"renderBlank",value:function(){return s.a.createElement("div",{className:"BuildEvent__details"},s.a.createElement(b.a,{title:"buildEvent.details.reason"},s.a.createElement(d.FormattedMessage,{id:"buildEvent.details.invalidEvent"})))}},{key:"render",value:function(){var e=this.props.event;if(!e)return null;switch(e.attributes.event_type){case"request_success":case"request_failure":return this.renderRequestDetails();case"response_success":case"response_failure":return this.renderResponseDetails();case"response_unprocessable":return this.renderUnprocessableResponseDetails();case"indexing_success":return this.renderScrapeSuccessDetails();case"indexing_failure":return this.renderScrapeFailureDetails();default:return this.renderBlank()}}}])&&g(n.prototype,r),a&&g(n,a),t}(u.a),j=a,k="propTypes",S={event:l.a.object.isRequired},k in j?Object.defineProperty(j,k,{value:S,enumerable:!0,configurable:!0,writable:!0}):j[k]=S,r=i))||r,F=n(1046),M=n(107),C=n(81),q=n(58),I=n(55),L=n(60),A=n(8),z=n(2242);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return G}));var G=Object(m.connect)((function(e){var t=Object.values(e.buildEvents).sort((function(e,t){return Date.parse(e.attributes.created_at)-Date.parse(t.attributes.created_at)})).reverse(),n=e.site,r=Object(A.allowedBuildTriggerIds)(e),a=r.reduce((function(t,n){return t[n]=e.buildTriggers[n],t}),{});return{allowedEvents:t.filter((function(e){return r.includes(e.relationships.build_trigger.data.id)})),allowedEnvironments:a,site:n}}))((x=N=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,U(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(e(Object(F.fetchAll)()));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"handleFailClick",value:function(e,t){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=this.props.dispatch,t.preventDefault(),r.next=5,regeneratorRuntime.awrap(n(Object(M.abortBuild)(e)));case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),this.setState((function(){throw r.t0}));case 10:case"end":return r.stop()}}),null,this,[[0,7]])}},{key:"renderEvent",value:function(e){var t=this.props,n=t.allowedEnvironments,r=t.match.url;return s.a.createElement("div",{className:"BuildEvent",key:e.id},s.a.createElement("div",{className:"BuildEvent__inner"},s.a.createElement("div",{className:"BuildEvent__title"},s.a.createElement("div",{className:"BuildEvent__environment"},n[e.relationships.build_trigger.data.id].attributes.name),s.a.createElement(d.FormattedMessage,{id:"buildEvent.type.".concat(e.attributes.event_type)})),s.a.createElement("div",{className:"BuildEvent__sub"},s.a.createElement("div",{className:"BuildEvent__sub__item"},s.a.createElement(C.default,{value:e.attributes.created_at})),e.attributes.data&&s.a.createElement("div",{className:"BuildEvent__sub__item"},s.a.createElement(q.Link,{to:"".concat(r,"/").concat(e.id)},s.a.createElement(d.FormattedMessage,{id:"buildEvent.showDetails"}))))))}},{key:"renderScrapeStatus",value:function(e){if("pending"===e.attributes.indexing_status)return s.a.createElement("div",{className:"BuildEvent",key:e.id},s.a.createElement("div",{className:"BuildEvent__inner"},s.a.createElement("div",{className:"BuildEvent__title"},s.a.createElement("div",{className:"BuildEvent__environment"},e.attributes.name),s.a.createElement("span",null,s.a.createElement(d.FormattedMessage,{id:"buildEvent.type.indexing_in_progress"})),s.a.createElement(h.default,{inline:!0,size:24}))))}},{key:"renderStatus",value:function(e){if("pending"===e.attributes.build_status)return s.a.createElement("div",{className:"BuildEvent",key:e.id},s.a.createElement("div",{className:"BuildEvent__inner"},s.a.createElement("div",{className:"BuildEvent__title"},s.a.createElement("div",{className:"BuildEvent__environment"},e.attributes.name),s.a.createElement("span",null,s.a.createElement(d.FormattedMessage,{id:"buildEvent.type.in_progress"})),s.a.createElement(h.default,{inline:!0,size:24})),s.a.createElement("div",{className:"BuildEvent__sub"},s.a.createElement("div",{className:"BuildEvent__sub__item"},s.a.createElement("a",{href:"#",onClick:this.handleFailClick.bind(this,e.id)},s.a.createElement(d.FormattedMessage,{id:"admin.deploymentLogs.abort"}))))))}},{key:"render",value:function(){var e=this.props,t=e.allowedEvents,n=e.allowedEnvironments,r=e.match.url,a=e.history;return s.a.createElement("div",{className:"Page"},s.a.createElement("div",{className:"Page__inner"},s.a.createElement("div",{className:"Page__header"},s.a.createElement("div",{className:"Page__title"},s.a.createElement(d.FormattedMessage,{id:"admin.deploymentLogs.title"}))),s.a.createElement("div",{className:"Info"},s.a.createElement("div",{className:"Info__icon"},s.a.createElement(z.default,null)),s.a.createElement("div",{className:"Info__body"},s.a.createElement(d.FormattedHTMLMessage,{id:"instructions.logs"}))),s.a.createElement("div",{className:"Page__content--transparent"},Object.values(n).map(this.renderScrapeStatus.bind(this)),Object.values(n).map(this.renderStatus.bind(this)),t.map(this.renderEvent,this),0===t.length&&s.a.createElement("div",{className:"blank-slate blank-slate--tiny"},s.a.createElement("p",{className:"blank-slate__title"},s.a.createElement(d.FormattedMessage,{id:"admin.deploymentLogs.noEvents.title"})),s.a.createElement("p",{className:"blank-slate__description"},s.a.createElement(d.FormattedMessage,{id:"admin.deploymentLogs.noEvents.description"}))))),t.length>0&&s.a.createElement(I.default,{path:"".concat(r,"/:buildEventId"),render:function(e){return s.a.createElement(L.default,{wide:!0,localeKey:"buildEvent.detailsTitle",onClose:function(){return a.push(r)}},s.a.createElement(R,e))}}))}}])&&B(n.prototype,r),a&&B(n,a),t}(u.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(N,"propTypes",{dispatch:l.a.func.isRequired,allowedEvents:l.a.array,allowedEnvironments:l.a.object.isRequired,match:l.a.object.isRequired,history:l.a.object.isRequired}),P=x))||P},3080:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),l=n(5),c=n(6),s=n(10),u=n(77),m=n(1044),d=n(2),f=n(29),p=n(8),b=n(39),y=n(67),h=n(74),_=n.n(h),v=n(2234),g=n(24),E=n(66),w=n(145),O=n.n(w),j=n(62),k=n.n(j),S=n(2242);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var N,x,T,R=o.a.createElement("path",{d:"M440.65 12.57l4 82.77A247.16 247.16 0 00255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0024.09 224h49.05a12 12 0 0011.67-9.26 175.91 175.91 0 01317-56.94l-101.46-4.86a12 12 0 00-12.57 12v47.41a12 12 0 0012 12H500a12 12 0 0012-12V12a12 12 0 00-12-12h-47.37a12 12 0 00-11.98 12.57zM255.83 432a175.61 175.61 0 01-146-77.8l101.8 4.87a12 12 0 0012.57-12v-47.4a12 12 0 00-12-12H12a12 12 0 00-12 12V500a12 12 0 0012 12h47.35a12 12 0 0012-12.6l-4.15-82.57A247.17 247.17 0 00255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 00-11.8-14.18h-49.05a12 12 0 00-11.67 9.26A175.86 175.86 0 01255.83 432z"}),F=function(e){return o.a.createElement("svg",P({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),R)};function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"default",(function(){return z}));var z=Object(c.connect)((function(e){var t=e.ssoSettings,n=Object(p.getCurrentRole)(e),r={idpMetadata:t&&t.attributes.idp_saml_metadata_url,defaultRoleId:t&&t.relationships.default_role.data&&t.relationships.default_role.data.id};return{roles:Object.values(e.roles),ssoSettings:t,initialValues:r,hasPermission:n.attributes.can_edit_site,onSubmit:function(e,n){var r,a,i,o;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r=n.dispatch,a=e.idpMetadata,i=e.defaultRoleId,o={type:"sso_settings",id:t.id,attributes:{idp_saml_metadata_url:a},relationships:{default_role:{data:{type:"role",id:i}}}},l.prev=3,l.next=6,regeneratorRuntime.awrap(r(Object(m.update)(o)));case 6:r(Object(s.notice)("admin.ssoSettings.update.success")),l.next=13;break;case 9:throw l.prev=9,l.t0=l.catch(3),r(Object(s.alertResponseFailure)(l.t0,"admin.ssoSettings.update.failure")),Object(u.default)(l.t0);case 13:case"end":return l.stop()}}),null,null,[[3,9]])}}}))(N=Object(b.withForm)({form:"SsoSettingsForm",validate:O()({idpMetadata:[k.a.required(),k.a.url()],defaultRoleId:[k.a.required()]})})((T=x=function(e){function t(){var e,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=this,n=!(a=(e=q(t)).call.apply(e,[this].concat(o)))||"object"!==M(a)&&"function"!=typeof a?I(r):a,A(I(n),"state",{scimApiToken:null}),n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(e(Object(m.fetch)()));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"handleSsoGenerateToken",value:function(){var e,t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.props.dispatch,r.next=3,regeneratorRuntime.awrap(e(Object(m.generateNewToken)()));case 3:t=r.sent,n=t.data,this.setState({scimApiToken:n.attributes.scim_api_token});case 6:case"end":return r.stop()}}),null,this)}},{key:"renderLoading",value:function(){return o.a.createElement("div",null,o.a.createElement(f.default,{size:80}))}},{key:"renderForm",value:function(){var e=this.props,t=e.ssoSettings,n=e.roles,r=this.state.scimApiToken,a=n.map((function(e){return{value:e.id,label:e.attributes.name}}));return o.a.createElement("div",{className:"Page__content"},o.a.createElement(y.default,null,o.a.createElement("div",{className:"Page__content__section"},o.a.createElement("div",{className:"Page__content__section__title"},o.a.createElement(d.FormattedMessage,{id:"admin.ssoSettings.samlSettings.title"})),o.a.createElement(g.default,{name:"idpMetadata",intlLabel:"admin.ssoSettings.idpSamlMetadataUrl",type:"text",required:!0}),o.a.createElement("div",{className:"form__field"},o.a.createElement("div",{className:"form__label"},o.a.createElement(d.FormattedMessage,{id:"admin.ssoSettings.samlToken"})),o.a.createElement(v.a,{className:"form__input--code",value:t.attributes.saml_token}))),o.a.createElement("div",{className:"Page__content__section"},o.a.createElement("div",{className:"Page__content__section__title"},o.a.createElement(d.FormattedMessage,{id:"admin.ssoSettings.scimSettings.title"})),o.a.createElement("div",{className:"form__field"},o.a.createElement("div",{className:"form__label"},o.a.createElement(d.FormattedMessage,{id:"admin.ssoSettings.scimBaseUrl"})),o.a.createElement(v.a,{value:t.attributes.scim_base_url})),o.a.createElement("div",{className:"form__field"},o.a.createElement("div",{className:"form__label"},o.a.createElement(d.FormattedMessage,{id:"admin.ssoSettings.scimToken"})),r?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"space--bottom-1"},o.a.createElement("div",{className:"Info Info--no-margin"},o.a.createElement("div",{className:"Info__body"},o.a.createElement(d.FormattedHTMLMessage,{id:"admin.ssoSettings.generateNewToken.info"})))),o.a.createElement(v.a,{className:"form__input--code",value:r})):o.a.createElement("button",{type:"button",className:"button button--primary button--small",onClick:this.handleSsoGenerateToken.bind(this)},o.a.createElement(F,null),o.a.createElement(d.FormattedMessage,{id:"admin.ssoSettings.generateNewToken"})))),o.a.createElement("div",{className:"Page__content__section"},o.a.createElement("div",{className:"Page__content__section__title"},o.a.createElement(d.FormattedMessage,{id:"admin.ssoSettings.defaultRole.title"})),o.a.createElement(g.default,{name:"defaultRoleId",intlLabel:"admin.ssoSettings.defaultRole",intlHint:"admin.ssoSettings.defaultRole.hint",required:!0,clearable:!1,options:a,component:E.default})),o.a.createElement(_.a,{intlLabel:"admin.ssoSettings.button"})))}},{key:"render",value:function(){var e=this.props,t=e.ssoSettings;return e.hasPermission?o.a.createElement("div",{className:"Page Page--large"},o.a.createElement("div",{className:"Page__inner"},o.a.createElement("div",{className:"Page__header"},o.a.createElement("div",{className:"Page__title"},o.a.createElement(d.FormattedMessage,{id:"admin.ssoSettings.title"}))),o.a.createElement("div",{className:"Info"},o.a.createElement("div",{className:"Info__icon"},o.a.createElement(S.default,null)),o.a.createElement("div",{className:"Info__body"},o.a.createElement(d.FormattedHTMLMessage,{id:"admin.ssoSettings.instructions"}))),t?this.renderForm():this.renderLoading())):o.a.createElement("div",{className:"permission-denied"},o.a.createElement("div",{className:"permission-denied__inner"},o.a.createElement("div",{className:"permission-denied__icon"},o.a.createElement("i",{className:"icon--blocked"})),o.a.createElement("div",{className:"permission-denied__title"},o.a.createElement(d.FormattedMessage,{id:"permissionDenied.title"})),o.a.createElement("div",{className:"permission-denied__subtitle"},o.a.createElement(d.FormattedMessage,{id:"permissionDenied.subtitle"}))))}}])&&C(n.prototype,r),a&&C(n,a),t}(l.a),A(x,"propTypes",{dispatch:a.a.func.isRequired,ssoSettings:a.a.object,hasPermission:a.a.bool,roles:a.a.array}),N=T))||N)||N},3081:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),l=n(5),c=n(6),s=n(10),u=n(613),m=n(1044),d=n(1048),f=n(2),p=n(8),b=n(282),y=n(2366);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _,v,g,E=o.a.createElement("path",{d:"M400 208h-73.8V80c0-26.5-21.5-48-48-48H169.8c-26.5 0-48 21.5-48 48v128H48.1c-42.6 0-64.2 51.7-33.9 81.9l175.9 176c18.7 18.7 49.1 18.7 67.9 0l176-176c30-30.1 8.7-81.9-34-81.9zM224 432L48 256h121.8V80h108.3v176H400L224 432z"}),w=function(e){return o.a.createElement("svg",h({viewBox:"0 0 448 512",width:"1em",height:"1em"},e),E)},O=n(64),j=n(2266),k=n(96),S=n(13),P=n(47),N=n(416),x=n(372),T=n.n(x),R=n(505);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return D}));var L,A,z,D=Object(c.connect)((function(e){var t=e.ssoGroups,n=e.ssoSettings,r=e.roles,a=Object(p.getCurrentRole)(e);return{roles:r,ssoGroups:t,ssoUsers:Object.values(e.ssoUsers),ssoSettings:n,hasPermission:a.attributes.can_edit_site}}))((g=v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,q(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.props.dispatch,t.next=4,regeneratorRuntime.awrap(Promise.all([e(Object(m.fetch)()),e(Object(u.fetchAll)()),e(Object(d.fetchAll)())]));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),this.setState((function(){throw t.t0}));case 9:case"end":return t.stop()}}),null,this,[[0,6]])}},{key:"handleSsoCopyUsers",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.dispatch,t.prev=1,t.next=4,regeneratorRuntime.awrap(e(Object(u.copyUsers)()));case 4:e(Object(s.notice)("admin.ssoUsers.copy.success")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e(Object(s.alertResponseFailure)(t.t0,"admin.ssoUsers.copy.failure"));case 10:case"end":return t.stop()}}),null,this,[[1,7]])}},{key:"handleExportSsoUsers",value:function(){var e,t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:e=this.props.ssoUsers,(t=[]).push("data:text/csv;charset=utf-8,".concat((n=["firstname","lastname","email","username","phone","company","department","group","role","password","title","status","delete"]).join(","))),e.forEach((function(e){var r=[e.attributes.first_name,e.attributes.last_name,e.attributes.username,e.attributes.username].concat(Object(R.a)(n.length-4).map((function(){return""})));t.push(r.join(","))})),window.open(encodeURI(t.join("\n")));case 6:case"end":return r.stop()}}),null,this)}},{key:"handleDestroy",value:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props.dispatch,r.next=3,regeneratorRuntime.awrap(Object(P.showConfirm)("messages.confirm.destroyUser"));case 3:if(r.sent){r.next=5;break}return r.abrupt("return");case 5:return r.prev=5,r.prev=6,r.next=9,regeneratorRuntime.awrap(t(Object(u.destroy)(e.id,null)));case 9:r.next=24;break;case 11:if(r.prev=11,r.t0=r.catch(6),!r.t0||!r.t0.data||"DESTINATION_USER_REQUIRED"!==r.t0.data[0].attributes.code){r.next=23;break}return r.next=16,regeneratorRuntime.awrap(Object(N.a)(e,"editor.editor.destroy.newCreator.title","editor.editor.destroy.newCreator.description","editor.editor.destroy.newCreator.field","editor.editor.destroy.newCreator.submit"));case 16:if(n=r.sent){r.next=19;break}return r.abrupt("return");case 19:return r.next=21,regeneratorRuntime.awrap(t(Object(u.destroy)(e.id,n)));case 21:r.next=24;break;case 23:throw r.t0;case 24:t(Object(s.notice)("editor.editor.destroy.success")),r.next=30;break;case 27:r.prev=27,r.t1=r.catch(5),t(Object(s.alertResponseFailure)(r.t1,"editor.editor.destroy.failure"));case 30:case"end":return r.stop()}}),null,this,[[5,27],[6,11]])}},{key:"renderRow",value:function(e){var t=this.props,n=t.ssoGroups,r=t.roles,a="notSynced";e.attributes.external_id&&(a=e.attributes.is_active?"synced":"deactivated");var i=e.relationships.groups.data.map((function(e){return n[e.id]})).filter((function(e){return e})),l=T()({"is-disabled":!e.attributes.is_active});return o.a.createElement("tr",{key:e.id},o.a.createElement("td",{className:l},o.a.createElement(O.a,{withEmail:!0,withAvatar:!0,user:e,size:40})),o.a.createElement("td",{className:l},o.a.createElement(f.FormattedMessage,{id:"admin.ssoUsers.status.".concat(a)})),o.a.createElement("td",null,o.a.createElement(S.Dropdown,{label:r[e.relationships.role.data.id].attributes.name,icon:j.default},o.a.createElement(S.Menu,null,o.a.createElement(S.Text,null,0===i.length?o.a.createElement(f.FormattedMessage,{id:"admin.ssoUsers.groups.noGroups"}):o.a.createElement(f.FormattedMessage,{id:"admin.ssoUsers.groups.groups",values:{groups:Object(b.a)(i.map((function(e){return e.attributes.name})),", "," and ")}})),o.a.createElement(S.Separator,null),o.a.createElement(S.Option,{red:!0,icon:k.default,onClick:this.handleDestroy.bind(this,e)},o.a.createElement(f.FormattedMessage,{id:"admin.ssoUsers.remove"}))))))}},{key:"renderUsers",value:function(){var e=this,t=this.props.ssoUsers;return o.a.createElement(o.a.Fragment,null,0===t.length?this.renderBlankSlate():o.a.createElement("div",{className:"space--bottom-3"},o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"User"),o.a.createElement("th",null,"Status"),o.a.createElement("th",null,"Role"))),o.a.createElement("tbody",null,t.filter((function(e){return e.attributes.is_active&&e.attributes.external_id})).map((function(t){return e.renderRow(t)})),t.filter((function(e){return e.attributes.is_active&&!e.attributes.external_id})).map((function(t){return e.renderRow(t)})),t.filter((function(e){return!e.attributes.is_active})).map((function(t){return e.renderRow(t)}))))))}},{key:"renderBlankSlate",value:function(){return o.a.createElement("div",{className:"blank-slate"},o.a.createElement("p",{className:"blank-slate__title"},o.a.createElement(f.FormattedMessage,{id:"admin.ssoUsers.noUsers.title"})),o.a.createElement("p",{className:"blank-slate__description"},o.a.createElement(f.FormattedHTMLMessage,{id:"admin.ssoUsers.noUsers.description"})))}},{key:"render",value:function(){var e=this.props,t=e.ssoSettings;return e.hasPermission?o.a.createElement("div",{className:"Page"},o.a.createElement("div",{className:"Page__inner"},o.a.createElement("div",{className:"Page__header"},o.a.createElement("div",{className:"Page__title"},o.a.createElement(f.FormattedMessage,{id:"admin.ssoUsers.title"})),o.a.createElement("div",{className:"Page__space"}),t&&t.relationships.default_role.data&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{type:"button",className:"Page__action--primary",onClick:this.handleSsoCopyUsers.bind(this)},o.a.createElement(y.a,null),o.a.createElement(f.FormattedMessage,{id:"admin.ssoUsers.copyUsers.button.default"})),o.a.createElement("button",{type:"button",className:"Page__action--primary",onClick:this.handleExportSsoUsers.bind(this)},o.a.createElement(w,null),o.a.createElement(f.FormattedMessage,{id:"admin.ssoUsers.exportUsers.button.default"})))),this.renderUsers())):o.a.createElement("div",{className:"permission-denied"},o.a.createElement("div",{className:"permission-denied__inner"},o.a.createElement("div",{className:"permission-denied__icon"},o.a.createElement("i",{className:"icon--blocked"})),o.a.createElement("div",{className:"permission-denied__title"},o.a.createElement(f.FormattedMessage,{id:"permissionDenied.title"})),o.a.createElement("div",{className:"permission-denied__subtitle"},o.a.createElement(f.FormattedMessage,{id:"permissionDenied.subtitle"}))))}}])&&M(n.prototype,r),a&&M(n,a),t}(l.a),L=v,A="propTypes",z={dispatch:a.a.func.isRequired,roles:a.a.object,ssoUsers:a.a.array,ssoGroups:a.a.object,ssoSettings:a.a.object,hasPermission:a.a.bool},A in L?Object.defineProperty(L,A,{value:z,enumerable:!0,configurable:!0,writable:!0}):L[A]=z,_=g))||_},3082:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(0),o=n.n(i),l=n(5),c=n(2);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p,b,y,h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,d(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"handleChoiceClick",value:function(e,t){var n=this.props.onBlur;t.stopPropagation(),t.preventDefault(),n(e)}},{key:"renderChoice",value:function(e){var t=this.props,n=t.value,r=t.defaultValue,a="ChoicesInput__item";return(n||r||null)===e.value&&(a+=" ChoicesInput__item--active"),e.recommended&&(a+=" ChoicesInput__item--recommendend"),o.a.createElement("a",{href:"#",className:a,key:e.value,onClick:this.handleChoiceClick.bind(this,e.value)},o.a.createElement("div",{className:"ChoicesInput__item__inner"},e.iconUrl&&o.a.createElement("div",{className:"ChoicesInput__item__image"},o.a.createElement("img",{src:e.iconUrl,alt:e.label})),o.a.createElement("div",{className:"ChoicesInput__item__label"},e.label)))}},{key:"render",value:function(){var e=this.props.choices;return o.a.createElement("div",{className:"ChoicesInput"},o.a.createElement("div",{className:"ChoicesInput__header"},o.a.createElement("div",{className:"ChoicesInput__header__inner"},o.a.createElement("div",{className:"ChoicesInput__header__title"},o.a.createElement(c.FormattedMessage,{id:"site.buildTriggerAdapters.recommended"})),o.a.createElement("div",{className:"ChoicesInput__header__sub"},o.a.createElement(c.FormattedMessage,{id:"site.buildTriggerAdapters.recommendedSub"})))),o.a.createElement("div",{className:"ChoicesInput__options"},e.filter((function(e){return e.recommended})).map(this.renderChoice.bind(this))),o.a.createElement("div",{className:"ChoicesInput__header"},o.a.createElement("div",{className:"ChoicesInput__header__inner"},o.a.createElement("div",{className:"ChoicesInput__header__title"},o.a.createElement(c.FormattedMessage,{id:"site.buildTriggerAdapters.other"})),o.a.createElement("div",{className:"ChoicesInput__header__sub"},o.a.createElement(c.FormattedMessage,{id:"site.buildTriggerAdapters.otherSub"})))),o.a.createElement("div",{className:"ChoicesInput__options"},e.filter((function(e){return!e.recommended})).map(this.renderChoice.bind(this))))}}])&&u(n.prototype,r),a&&u(n,a),t}(l.a);p=h,b="propTypes",y={choices:a.a.array.isRequired,value:a.a.string,defaultValue:a.a.object,onBlur:a.a.func},b in p?Object.defineProperty(p,b,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[b]=y;var _=h;function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,w(t).apply(this,arguments))}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),n=t,(r=[{key:"handleAdapterChange",value:function(e){(0,this.props.onSelect)({activeAdapter:e,settings:null})}},{key:"render",value:function(){var e=[{label:this.t("site.buildTriggerAdapters.netlify"),iconUrl:"/assets/images/netlify.png",value:"netlify",recommended:!0},{label:this.t("site.buildTriggerAdapters.zeit"),iconUrl:"/assets/images/zeit.svg",value:"zeit",recommended:!0},{label:this.t("site.buildTriggerAdapters.travis"),iconUrl:"/assets/images/travis.png",value:"travis"},{label:this.t("site.buildTriggerAdapters.gitlab"),iconUrl:"/assets/images/gitlab.png",value:"gitlab"},{label:this.t("site.buildTriggerAdapters.circle_ci"),iconUrl:"/assets/images/circle_ci.png",value:"circle_ci"},{label:this.t("site.buildTriggerAdapters.custom"),iconUrl:"/assets/images/custom.png",value:"custom"}];return o.a.createElement(_,{choices:e,onBlur:this.handleAdapterChange.bind(this)})}}])&&g(n.prototype,r),a&&g(n,a),t}(l.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(j,"propTypes",{onSelect:a.a.func});t.default=j},3091:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function l(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),l=i(n(0)),c=i(n(37)),s=i(n(194)),u=n(15),m=n(6),d=n(8),f=n(58),p=i(n(964)),b=i(n(303)),y=i(n(2513)),h=i(n(2514)),_=i(n(2515)),v=i(n(2266)),g=i(n(2516)),E=i(n(2517)),w=i(n(2518)),O=i(n(519)),j=i(n(2519)),k=i(n(2520)),S=i(n(3074)),P=i(n(3075)),N=i(n(2521)),x=i(n(3076)),T=i(n(3064)),R=i(n(3067)),F=i(n(3077)),M=i(n(3069)),C=i(n(3066)),q=i(n(3078)),I=i(n(3079)),L=i(n(3070)),A=i(n(3072)),z=i(n(3080)),D=i(n(3081)),B=i(n(2537)),H=i(n(579)),U=n(1041);t.default=function(e){var t=this,n=e.match.url,i=m.useDispatch(),V=m.useSelector(d.getCurrentRole),G=m.useSelector(d.isSsoEnabled),W=m.useSelector(d.allowedBuildTriggerIds),J=m.useSelector((function(e){return d.isSubscriptionLimitPositive(e,"sandbox_environments")}));if(H.default((function(){return r(t,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,i(U.fetch("sandbox_environments"))];case 1:return e.sent(),[2]}}))}))}),[]),V){var $=V.attributes;return l.default.createElement(s.default,{minSize:220,defaultSize:240,split:"vertical"},l.default.createElement("div",{className:"AdminAreaBar"},l.default.createElement("div",{className:"AdminAreaBar__inner"},($.can_edit_schema||$.can_edit_environment)&&l.default.createElement("div",{className:"AdminAreaBar__macro-group"},l.default.createElement("div",{className:"AdminAreaBar__group"},l.default.createElement("div",{className:"AdminAreaBar__group__name"},l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.environment"}),l.default.createElement("a",{className:"AdminAreaBar__group__name__extra",href:u.erdUrl()},l.default.createElement("i",{className:"icon--download"}),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.erd"}))),$.can_edit_environment&&l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/environment"},l.default.createElement(b.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.environmentSettings"})),$.can_edit_schema&&l.default.createElement(l.default.Fragment,null,l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/item_types"},l.default.createElement(h.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.itemTypes"})),l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/plugins"},l.default.createElement(_.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.plugins"}))))),l.default.createElement("div",{className:"AdminAreaBar__macro-group"},($.can_manage_environments&&J||$.can_edit_site)&&l.default.createElement("div",{className:"AdminAreaBar__group"},l.default.createElement("div",{className:"AdminAreaBar__group__name"},l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.project"})),$.can_edit_site&&l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/site"},l.default.createElement(b.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.siteSettings"})),J&&$.can_manage_environments&&l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/environments"},l.default.createElement(y.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.environments"}))),($.can_manage_users||$.can_manage_access_tokens)&&l.default.createElement("div",{className:"AdminAreaBar__group"},l.default.createElement("div",{className:"AdminAreaBar__group__name"},l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.permissions"})),$.can_manage_users&&l.default.createElement(c.default,{to:n+"/roles",className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active"},l.default.createElement(v.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.manageRoles"})),$.can_manage_users&&l.default.createElement(c.default,{to:n+"/users",className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active"},l.default.createElement(g.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.manageEditors"})),$.can_manage_access_tokens&&l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/access_tokens"},l.default.createElement(j.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.apiTokens"}))),$.can_manage_webhooks&&l.default.createElement("div",{className:"AdminAreaBar__group"},l.default.createElement("div",{className:"AdminAreaBar__group__name"},l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.webhooks"})),l.default.createElement(c.default,{to:n+"/webhooks",className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active"},l.default.createElement(w.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.manageWebhooks"})),l.default.createElement(c.default,{to:n+"/webhook_calls",className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active"},l.default.createElement(E.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.webhookCalls"}))),($.can_manage_build_triggers||W.length>0)&&l.default.createElement("div",{className:"AdminAreaBar__group"},l.default.createElement("div",{className:"AdminAreaBar__group__name"},l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.deployment"})),$.can_manage_build_triggers&&l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/build_triggers"},l.default.createElement(O.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.deploymentSettings"})),W.length>0&&l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/deployment_logs"},l.default.createElement(E.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.deploymentLogs"}))),G&&$.can_edit_site&&l.default.createElement("div",{className:"AdminAreaBar__group"},l.default.createElement("div",{className:"AdminAreaBar__group__name"},l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.sso"})),l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/sso-settings"},l.default.createElement(b.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.ssoSettings"})),l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/sso-users"},l.default.createElement(g.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.ssoUsers"})),l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/sso-groups"},l.default.createElement(k.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.ssoGroups"}))),$.can_edit_schema&&l.default.createElement("div",{className:"AdminAreaBar__group"},l.default.createElement("div",{className:"AdminAreaBar__group__name"},l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.usageGroup"})),l.default.createElement(c.default,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:n+"/usage"},l.default.createElement(y.default,null),l.default.createElement(o.FormattedMessage,{id:"adminArea.splitPane.usage"})))))),l.default.createElement(f.Switch,null,l.default.createElement(p.default,{condition:$.can_edit_site,path:n+"/site",component:S.default}),l.default.createElement(p.default,{condition:$.can_edit_schema,path:n+"/usage",component:x.default}),l.default.createElement(p.default,{path:n+"/item_types",condition:$.can_edit_schema,component:T.default}),l.default.createElement(p.default,{path:n+"/plugins",condition:$.can_edit_schema,component:C.default}),l.default.createElement(p.default,{path:n+"/roles",condition:$.can_manage_users,component:M.default}),l.default.createElement(p.default,{path:n+"/users",condition:$.can_manage_users,component:A.default}),l.default.createElement(p.default,{path:n+"/access_tokens",condition:$.can_manage_access_tokens,component:L.default}),l.default.createElement(p.default,{path:n+"/webhook_calls",condition:$.can_manage_webhooks,component:F.default}),l.default.createElement(p.default,{path:n+"/webhooks",condition:$.can_manage_webhooks,component:R.default}),l.default.createElement(p.default,{path:n+"/deployment_logs",condition:W.length>0,component:I.default}),l.default.createElement(p.default,{path:n+"/build_triggers",condition:$.can_manage_build_triggers,component:q.default}),l.default.createElement(p.default,{path:n+"/sso-settings",condition:G&&$.can_edit_site,component:z.default}),l.default.createElement(p.default,{path:n+"/sso-users",condition:G&&$.can_edit_site,component:D.default}),l.default.createElement(p.default,{condition:$.can_edit_site,path:n+"/environment",component:P.default}),l.default.createElement(p.default,{condition:$.can_manage_environments,path:n+"/environments",component:N.default}),l.default.createElement(p.default,{condition:$.can_edit_schema,path:n+"/usage",component:x.default}),l.default.createElement(p.default,{path:n+"/sso-groups",condition:G&&$.can_edit_site,component:B.default}),l.default.createElement(f.Redirect,{to:n+"/item_types"})))}}}}]);
//# sourceMappingURL=admin.bundle.js.map